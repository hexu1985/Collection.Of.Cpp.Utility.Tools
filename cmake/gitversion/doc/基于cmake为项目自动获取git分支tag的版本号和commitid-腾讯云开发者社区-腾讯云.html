<!DOCTYPE html>
<html lang="zh" munual-autotracker-init="" qct-uid="" qct-pv-id="PTV_1WyR-wnYjO3XsBidw" qct-ip="118.193.105.162"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><style class="vjs-styles-defaults">
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    </style><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="format-detection" content="telephone=no"><title>基于cmake为项目自动获取git分支tag的版本号和commitid-腾讯云开发者社区-腾讯云</title><meta name="subject" content="通用技术-开发技术-git,其他-空类-cmake,其他-空类-version,其他-空类-程序,其他-空类-源码"><meta name="subjectTime" content="2024-07-20 11:29:13"><meta name="articleSource" content="W"><meta name="magicSource" content="N"><meta name="authorType" content=""><meta name="productSlug" content="none"><meta name="keywords" content="git,cmake,version,程序,源码"><meta name="description" content="  在项目构建的时候，我们经常会希望能够将git提交的分支信息和提交号(commitid)以及当前版本发布的tag信息作为版本号自动构建到程序里面，以便后续能够快速定位所运行的程序所定影的git源码的版本，从而快速发现和定位问题。  "><meta property="og:title" content="基于cmake为项目自动获取git分支tag的版本号和commitid-腾讯云开发者社区-腾讯云"><meta property="og:description" content="  在项目构建的时候，我们经常会希望能够将git提交的分支信息和提交号(commitid)以及当前版本发布的tag信息作为版本号自动构建到程序里面，以便后续能够快速定位所运行的程序所定影的git源码的版本，从而快速发现和定位问题。  "><meta property="og:image" content="https://cloudcache.tencentcs.com/open_proj/proj_qcloud_v2/gateway/shareicons/cloud.png"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover"><link rel="dns-prefetch" href="https://qccommunity.qcloudimg.com/"><link rel="dns-prefetch" href="https://ask.qcloudimg.com/"><link rel="dns-prefetch" href="https://cloudcache.tencentcs.com/"><link rel="canonical" href="https://cloud.tencent.com/developer/article/2437695"><meta name="next-head-count" content="20"><link rel="stylesheet" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/base.css"><link rel="stylesheet" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/base-202412271719.css"><style type="text/css">
        .rno-markdown p * {
          white-space: pre-wrap;
          word-break: break-all;
        }
        .tea-overlay {
          z-index: 99999!important;
        }
      </style><link rel="stylesheet" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/Article-202412191146.css"><link rel="stylesheet" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/draft-master-v2.0.163.d4s2ddo9sb.css"><link rel="stylesheet" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/tcplayer.min.css"><script type="text/javascript" async="" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/destination.js"></script><script async="" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/analytics.js"></script><script async="" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/gtm.js"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/aegis.min.js"></script><script>
              if (Aegis) {
                new Aegis({
                  id: 'dWlmyFvjDnalkbZO8q',
                  env: 'production',
                  onError: true,
                  pagePerformance: true,
                  reportAssetSpeed: true,
                  api: {
                    reportRequest: true,
                    resHeaders: ['x-req-id'],
                  },
                  reportApiSpeed: true,
                  beforeRequest: function (data) {
                    // load js failed
                    if (data.logType === 'log') {
                      if (data.logs.level === '32' && data.logs.msg.indexOf('google') > -1) return false;
                    }
                    var ignoreKeys = [
                      'Script error',
                      'chrome-extension',
                      'qq.com',
                      'queryWeappQrcodeStatus',
                      'login/ajax/info',
                      'woa.com',
                      'trafficCollect.php',
                      'google',
                      'dscache',
                      'act-api',
                      'set_qc_cookie',
                      'opc.cloud.tencent.com',
                      'uc_gre_ad_buss',
                      'eb.xcj.pub',
                      'UCShellJava',
                      '/developer/labs/quick/loader',
                      'edgeImmersiveReaderDOM',
                      'sendBeacon',
                      'error-decoder.html',
                      'qcloud-community-track.min.js'
                    ];
                    var alarmMsg = [data.logs.url, data.logs.msg].join('|');
                    for (var i = 0; i < ignoreKeys.length; i++) {
                      if (alarmMsg.indexOf(ignoreKeys[i]) != -1) return false;
                    }
                    if (/bot|wechatdevtools|spider/i.test(navigator.userAgent)) {
                      return false;
                    }
                    if (location.hostname.indexOf('cloud.tencent.') === -1) {
                      return false;
                    }
                  },
                });
              }
    </script><link rel="preload" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/15864e0bbdb1e0dc.css" as="style"><link rel="stylesheet" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/15864e0bbdb1e0dc.css" data-n-g=""><link rel="preload" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/76e9fe126c1f99d5.css" as="style"><link rel="stylesheet" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/76e9fe126c1f99d5.css" data-n-p=""><link rel="preload" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/6bae135cca0bd2a2.css" as="style"><link rel="stylesheet" href="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/6bae135cca0bd2a2.css" data-n-p=""><noscript data-n-css=""></noscript><script defer="defer" nomodule="" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/polyfills-c67a75d1b6f99dc8.js"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/webpack-342e38565d69754d.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/framework-bae252e255276064.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/main-b171722e7f1a1add.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/_app-7fc53ae33d269e32.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/1001-936271c3be05c972.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/900-754acf570f26d1b3.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/5711-898cb74d6254b622.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/1522-ac3b1777b1c36fd6.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/4031-e3e3905dc88f3f92.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/9142-8d6871ee01ef3752.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/2929-2732ed4070c148cd.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/6213-344a4a0bb9c83cc6.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/3751-d6902cb0fa3abff0.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/9159-237e4ba66a152bd5.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/4036-2075796778f5bd67.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/1126-c4d27d89bdcaa920.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/432-509d80099d1daa87.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/2654-a4137ccd8ac059bd.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/856-06c42ea61ae5c3f2.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/9179-8e6d979e9f59fb65.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/3189-6f199450486aa487.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/7879-33a41b64e7ea2398.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/8899-bacdc38fc7960a61.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/2142-4c9ff21c43ce61e7.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/4989-ab5859ddb53d3104.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/9621-b3b61af8ebf621bf.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/6508-a902c656e8cf56d8.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/9156-828c2e057845f7f8.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/[articleId]-890049dbc06c2acc.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/_buildManifest.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/_ssgManifest.js" defer="defer"></script><script type="text/javascript" async="" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/MathJax.js"></script><style id="dynamic-inserted-css-tea-transition-scale-738412514">
.tea-transition-scale-738412514-enter {
    opacity: 0 !important;
    transform: scale3d(0.94, 0.94, 0.94);
    transform-origin: bottom;
}
.tea-transition-scale-738412514-enter-active {
    opacity: 1 !important;
    transform: scale3d(1, 1, 1);
    transition: opacity 50ms ease,
                transform 50ms ease;
    transform-origin: bottom;
}
.tea-transition-scale-738412514-exit {
    opacity: 1 !important;
    transform: scale3d(1, 1, 1);
    transform-origin: bottom;
}
.tea-transition-scale-738412514-exit-active {
    opacity: 0 !important;
    transform: scale3d(0.94, 0.94, 0.94);
    transition: opacity 300ms ease,
                transform 300ms ease;
    transform-origin: bottom;
}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script type="text/javascript" async="" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/f.txt"></script><script type="text/javascript" async="" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/f_002.txt"></script><style data-opc-ads-placement-id="10013">.ad-content__Ptf {
  position: relative;
  height: 48px;
}

.ad-link__Y38 {
  display: block;
  height: 100%;
  background-repeat: no-repeat;
  background-size: auto 100%;
  background-position: 50%;
}

.ad-close__PWN {
  position: absolute;
  top: 50%;
  right: 16px;
  width: 24px;
  height: 24px;
  transform: translateY(-50%);
  cursor: pointer;
  background-image: url("data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' %3e %3cg%3e %3ccircle cx='12' cy='12' r='12' fill='black' fill-opacity='.25' /%3e %3cpath d='M7.383 7.383c-.51.51-.51 1.336 0 1.847l2.77 2.77-2.77 2.77a1.306 1.306 0 001.847 1.848L12 13.846l2.77 2.77a1.306 1.306 0 001.848-1.847L13.846 12l2.77-2.77a1.306 1.306 0 00-1.847-1.847L12 10.153l-2.77-2.77a1.306 1.306 0 00-1.847 0z' fill='white' /%3e %3c/g%3e %3c/svg%3e");
}
</style><style data-opc-ads-placement-id="10004">.ad-content__Y46 {
  position: relative;
  display: block;
  border: 1px solid #f64041;
  border-radius: 2px;
  background: linear-gradient(180deg, #fff, #fff3f3);
  cursor: pointer;
}

.ad-link__QDu:hover {
  text-decoration: none;
}

.ad-text__x1f {
  color: #f64041;
  font-size: 12px;
  line-height: 20px;
  max-width: 25em;
  padding: 0 8px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
</style><style data-opc-ads-placement-id="10005">.ad-content__Sgq {
  display: block;
}

.ad-text__FJ4 {
  font-size: 14px;
  line-height: 22px;
  color: #4b5b76;
}

.ad-text__FJ4:hover {
  color: #0052d9;
}

.ad-image__QlD {
  display: block;
  width: 100%;
  height: 100%;
}
</style><style data-opc-ads-placement-id="10002">.ad-content__HDU {
  display: block;
  position: relative;
  height: auto;
  width: 100%;
}

.ad-static-text__mhA {
  position: absolute;
  bottom: 8px;
  right: 8px;
  width: 32px;
  height: 18px;
  font-size: 12px;
  line-height: 18px;
  text-align: center;
  color: #fff;
  background-color: rgba(0, 0, 0, 0.3);
}

.ad-image__yRE {
  width: 100%;
  height: auto;
  vertical-align: middle;
}

.ad-close__G5e {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 9px;
  height: 9px;
  z-index: 10;
  cursor: pointer;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='9' height='9' fill='none' viewBox='0 0 9 9' %3e %3cpath fill-rule='evenodd' clip-rule='evenodd' d='M9 1.286L5.786 4.5 9 7.714 7.714 9 4.5 5.786 1.286 9 0 7.714 3.214 4.5 0 1.286 1.286 0 4.5 3.214 7.714 0 9 1.286z' fill='%23666' fill-opacity='.3' /%3e %3c/svg%3e");
}
</style></head><body class=""><div id="MathJax_Message" style="display: none;"></div><div id="__next"><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/qcloudStatApi.js"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/exposure-plugin-4.1.15.min.js"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/qcloud-community-track.min.js"></script><div class="cdc-responsive-layout" aegis-first-screen-timing="true" qct-area="文章详情页"><div class="cdc-article-page cdc-global is-bannerFocus show-ad"><div class="cdc-sticky-header mod-sticky-header is-hidden" style="left: 0px;"><div id="community-top-sticky-header-product-container" data-opc-ads-placement-id="10013"><div class="ad-content__Ptf cdc-top-ad">
  <a href="https://cloud.tencent.com/act/pro/cos?ad_trace=d9b7eaf686de4ed5a6d8b50d9ee52706&amp;from=24826&amp;from_column=24826" target="_blank" class="ad-link__Y38" style="background-image: url(https://dscache.tencent-cloud.cn/upload//4-f917b061d414ac3d3a4bfd65813eb278501cc0df.png)" data-ad-role-click="">
  </a>
  <div class="ad-close__PWN" data-ad-role-close=""></div>
</div>
</div><div class="cdc-sticky-header__inner"><div class="cdc-sticky-header__main"><div class="mod-sticky-header__main"><div class="mod-sticky-header__author"><span class="cdc-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/2120676/rzl0j09fic.png&quot;);" href="https://cloud.tencent.com/developer/user/2120676" target="_blank"></a></span><div class="author-info"><a class="author-info__name" href="https://cloud.tencent.com/developer/user/2120676" target="_blank"><span class="name-text">码农心语</span></a><div class="author-info__article"><i class="icon-recommend"></i>作者相关精选</div></div></div><div class="mod-sticky-header__split"></div><div class="mod-sticky-header__title"><div class="mod-sticky-header__title-content"><h2 class="title-text">基于cmake为项目自动获取git分支tag的版本号和commitid</h2></div></div></div></div><div class="cdc-sticky-header__extra"><div class="mod-sticky-header__operates"><button class="cdc-btn mod-sticky-header__operate btn-focus cdc-btn--primary"><i class="add-icon"></i><span>关注作者</span></button></div></div></div></div><div class="cdc-m-guider-banner"><div class="cdc-m-guider-banner__guide-mvp is-detail-page"><div class="cdc-m-guider-banner__guide-mvp-text">前往小程序，Get<em>更优</em>阅读体验！</div><div class="cdc-m-guider-banner__guide-mvp-btn">立即前往</div></div></div><div class="cdc-header cdc-header--block show-ad" track="导航"><div class="cdc-header__placeholder"></div><div class="cdc-header__inner"><div id="community-top-header-product-container" data-opc-ads-placement-id="10013"><div class="ad-content__Ptf cdc-top-ad">
  <a href="https://cloud.tencent.com/act/pro/cos?ad_trace=d9b7eaf686de4ed5a6d8b50d9ee52706&amp;from=24826&amp;from_column=24826" target="_blank" class="ad-link__Y38" style="background-image: url(https://dscache.tencent-cloud.cn/upload//4-f917b061d414ac3d3a4bfd65813eb278501cc0df.png)" data-ad-role-click="">
  </a>
  <div class="ad-close__PWN" data-ad-role-close=""></div>
</div>
</div><div class="cdc-header__top"><div class="cdc-header__top-left"><a href="https://cloud.tencent.com/?from=20060&amp;from_column=20060" target="_blank" class="cdc-header__top-logo" hotrep="" track="腾讯云官网入口"><i>腾讯云</i></a><div class="cdc-header__top-line"></div><a href="https://cloud.tencent.com/developer" class="cdc-header__top-logo community"><i>开发者社区</i></a><div class="cdc-header__activity"><div id="cloud-header-product-container" data-opc-ads-placement-id="10004"><a class="ad-content__Y46 ad-link__QDu " href="https://cloud.tencent.com/developer/tutorial/practice/1003?ad_trace=d9b7eaf686de4ed5a6d8b50d9ee52706&amp;from=22907&amp;from_column=22907" target="_blank" data-ad-role-click="">
  <div class="ad-text__x1f">使用DNSPod，实现在外也可访问群晖NAS</div>
</a>
</div></div></div><div class="cdc-header__top-operates"><a href="https://cloud.tencent.com/document/product?from=20702&amp;from_column=20702" target="_blank" class="cdc-header__link">文档</a><a href="https://cloud.tencent.com/voc/?from=20703&amp;from_column=20703" target="_blank" class="cdc-header__link">建议反馈</a><a href="https://console.cloud.tencent.com/?from=20063&amp;from_column=20063" target="_blank" class="cdc-header__link" track-click="{&quot;areaId&quot;:102001,&quot;subAreaId&quot;:1}">控制台</a><div class="cdc-header__account"><div class="cdc-header__account-inner"><button class="cdc-btn cdc-header__account-btn  cdc-btn--primary">登录/注册</button></div></div></div></div><div class="cdc-header__bottom"><div class="cdc-header__bottom-nav"><a href="https://cloud.tencent.com/developer" class="cdc-header__bottom-home">首页</a><div class="cdc-header__nav-list"><div class="cdc-header__nav-item">学习</div><div class="cdc-header__nav-item">活动</div></div><div class="cdc-header__more"><span class="cdc-header__more-text">更多</span><div class="cdc-header__more-dropdown"><div class="cdc-header__more-dropdown-inner"><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/tm" target="_blank">腾讯云架构师技术同盟交流圈</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/tencentdb" target="_blank">腾讯云数据库专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/cloudnative?from=19164" target="_blank">腾讯云原生专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/tencenthunyuan" target="_blank">腾讯混元专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/tce" target="_blank">腾讯云TCE专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/lighthouse" target="_blank">腾讯云Lighthouse专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/hai" target="_blank">腾讯云HAI专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/tencentcloudedgeone" target="_blank">腾讯云Edgeone专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/cos" target="_blank">腾讯云存储专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/ai" target="_blank">腾讯云智能专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/ipaas" target="_blank">腾讯轻联专区 </a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/tencentcloudbase" target="_blank">腾讯云开发专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/zone/tapd" target="_blank">TAPD专区</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/product/acc?from=22178" target="_blank">腾讯云AI代码助手</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/product/coding?from=20154&amp;from_column=20154" target="_blank">CODING DevOps</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/product/cloudstudio?from=20154&amp;from_column=20154" target="_blank">Cloud Studio</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/document/sdk?from=20154&amp;from_column=20154" target="_blank">SDK中心</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/document/api?from=20154&amp;from_column=20154" target="_blank">API中心</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/document/product/440/6176?from=20154&amp;from_column=20154" target="_blank">命令行工具</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/tvp?from=20154&amp;from_column=20154" target="_blank">TVP</a></div><div class="cdc-header__more-item"><a href="https://cloud.tencent.com/developer/program/tm" target="_blank">腾讯云架构师技术同盟<div class="cdc-badge"><div class="cdc-badge-inner"><div class="cdc-badge-text"></div></div></div></a></div><div class="cdc-header__more-item"><div id="community-header-more-product-container" data-opc-ads-placement-id="10005"><a class="ad-content__Sgq " href="https://cloud.tencent.com/developer/tutorial/practice/1003?ad_trace=d9b7eaf686de4ed5a6d8b50d9ee52706&amp;from=23486&amp;from_column=23486" target="_blank" data-ad-role-click="">
  <span class="ad-text__FJ4">免费试用DNSPod</span>
</a>
</div></div></div></div></div></div><div class="cdc-header__bottom-operates"><div class="cdc-header__search"><div class="cdc-search__wrap"><div class="cdc-search"><span class="cdc-search__text">文章/答案/技术大牛</span><button class="cdc-search__btn">搜索<i class="cdc-search__i search"></i></button></div><div class="cdc-search__dropdown"><div class="cdc-search__bar"><input type="text" class="cdc-search__bar-input" placeholder="文章/答案/技术大牛"><div class="cdc-search__bar-btns"><button class="cdc-search__btn">搜索<i class="cdc-search__i search"></i></button><button class="cdc-search__btn">关闭<i class="cdc-search__i clear"></i></button></div></div></div></div></div><div class="cdc-header__create"><span class="cdc-header__create-btn not-logged"><span class="cdc-svg-icon-con"><span class="cdc-svg-icon" style="width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path d="M14.2466 12.0145C14.1698 13.6258 12.8381 14.9131 11.2129 14.9131H11.1579H4.0927H4.03772C2.4125 14.9131 1.08014 13.6258 1.00334 12.0145H1V11.8668V4.07213V4.04627V3.89922H1.00334C1.08014 2.28732 2.4125 1 4.03772 1H9.6473V1.00069H10.0786L8.7688 2.10773H8.43888H7.7916H6.37904H4.03772C2.97234 2.10773 2.10445 2.9777 2.10445 4.04629V4.41869V4.4472V6.39498V11.4269V11.4309V11.8668C2.10445 12.9354 2.97234 13.8053 4.03772 13.8053H6.37904H8.87153H11.2129C12.2782 13.8053 13.1461 12.9355 13.1461 11.8668V11.466V11.454V9.5181V6.39364L14.2506 5.3051V11.8668V12.0145H14.2466ZM10.4324 7.15226L9.63146 7.99761C9.36577 8.2693 8.69326 8.95104 8.48066 9.17631C8.26726 9.40288 8.09039 9.58901 7.95061 9.73544C7.81079 9.88188 7.72667 9.96597 7.70083 9.98656C7.63321 10.0488 7.55703 10.1144 7.47022 10.1846C7.38412 10.2542 7.29404 10.3099 7.20063 10.3516C7.10722 10.4007 6.97072 10.459 6.79049 10.5305C6.61028 10.6001 6.42213 10.6676 6.22468 10.7339C6.02792 10.8002 5.84109 10.8571 5.66484 10.9061C5.48795 10.9538 5.3561 10.9863 5.2693 11.0009C5.08977 11.0214 4.96988 10.993 4.90956 10.9168C4.84931 10.8405 4.83276 10.7107 4.85924 10.5312C4.87315 10.4331 4.9043 10.292 4.95468 10.1078C5.00431 9.92297 5.05802 9.7315 5.11431 9.53341C5.1713 9.33526 5.22629 9.15179 5.27926 8.98484C5.33297 8.8179 5.37599 8.7026 5.40978 8.64032C5.44953 8.54357 5.49463 8.45413 5.54495 8.37399C5.59465 8.29379 5.66616 8.20503 5.75965 8.10766C5.79934 8.06588 5.89281 7.96649 6.03988 7.81018C6.18624 7.65311 6.80114 7.02774 7.02104 6.79783L7.75117 6.03524L8.56212 5.1899L10.6345 3.02466L12.5214 4.93874L10.4324 7.15226ZM13.816 3.58581C13.7166 3.68987 13.6272 3.78064 13.5483 3.85883C13.4694 3.93703 13.4006 4.0066 13.3423 4.06686C13.276 4.13643 13.2144 4.19738 13.1561 4.24903L11.2785 2.33569C11.3785 2.24025 11.4965 2.12565 11.6336 1.99115C11.7707 1.85668 11.8854 1.75061 11.9761 1.67242C12.0934 1.57708 12.2133 1.51013 12.3385 1.47109C12.4525 1.43529 12.5644 1.41805 12.6751 1.41876H12.7056C12.7665 1.42139 12.8268 1.42729 12.8851 1.43724C12.8838 1.4366 12.8811 1.43724 12.8798 1.4366C12.8811 1.4366 12.8838 1.4366 12.8851 1.43724C13.1376 1.48428 13.4019 1.62009 13.6265 1.83743C13.7511 1.95871 13.8524 2.09382 13.9259 2.23296C14.0346 2.43834 14.0863 2.65304 14.0763 2.8491C14.0763 2.87294 14.0783 2.89748 14.0783 2.92201C14.0783 3.03529 14.0571 3.14789 14.0154 3.26055C13.9737 3.37314 13.9067 3.48185 13.816 3.58581Z" fill="#0052D9"></path></svg></span></span>发布<span class="cdc-svg-icon-con cdc-header__create-btn-arrow"><span class="cdc-svg-icon" style="width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path d="M8.16377 4L9.57798 5.41421L14.5277 10.364L13.1135 11.7782L8.1638 6.829L3.21402 11.7782L1.7998 10.364L8.16377 4Z"></path></svg></span></span></span></div></div></div></div></div><div class="cdc-m-sticky-header is-hidden is-sticky"><div class="cdc-m-sticky-header__placeholder"></div><div class="cdc-m-sticky-header__main"><div class="cdc-m-sticky-header__con"><div class="cdc-m-sticky-header__trigger"></div><div class="cdc-m-header-article__menu"><div class="cdc-m-header-article__menu-mask"></div><div class="cdc-m-header-article__menu-side"><div class="cdc-m-header__sidebar"><div class="cdc-m-header__sidebar-top"><i class="cdc-m-header__sidebar-top__logo"></i><span class="cdc-m-header__sidebar-top__back"></span></div><div class="cdc-m-header__sidebar-menus"><a href="https://cloud.tencent.com/developer" class="cdc-m-header__sidebar-menu link">首页</a><div class="tpm1-collapse"><div class="tpm1-collapse__panel"><header class="tpm1-collapse__panel-hd"><div class="tpm1-collapse__panel-title">学习</div></header></div><div class="tpm1-collapse__panel"><header class="tpm1-collapse__panel-hd"><div class="tpm1-collapse__panel-title">活动</div></header></div><div class="tpm1-collapse__panel"><header class="tpm1-collapse__panel-hd"><div class="tpm1-collapse__panel-title">专区</div></header></div><div class="tpm1-collapse__panel"><header class="tpm1-collapse__panel-hd"><div class="tpm1-collapse__panel-title">工具</div></header></div></div><a href="https://cloud.tencent.com/tvp?from=20154&amp;from_column=20154" class="cdc-m-header__sidebar-menu link">TVP</a><a class="cdc-m-header__sidebar-activity" href="https://cloud.tencent.com/developer/program/tm" target="_blank">腾讯云架构师技术同盟<div class="cdc-badge"><div class="cdc-badge-inner"><div class="cdc-badge-text"></div></div></div></a></div><div class="cdc-m-header__sidebar-back"><a href="https://cloud.tencent.com/?from=20060&amp;from_column=20060" class="cdc-m-header__sidebar-back__link"><i></i><span>返回腾讯云官网</span></a></div></div></div></div><div class="cdc-m-sticky-header__author"><span class="cdc-avatar large circle" style="cursor: unset;"><span class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/2120676/rzl0j09fic.png&quot;);"></span></span><div class="cdc-m-sticky-header__author-name">码农心语</div></div></div><div class="cdc-m-sticky-header__extra"><div class="cdc-m-sticky-header__extra-icon"><i class="extra-search"></i></div><div class="cdc-m-sticky-header__extra-icon"><i class="extra-share"></i></div><div class="cdc-m-sticky-header__extra-operate"><div class="cdc-m-sticky-header__extra-icon"><i class="extra-man"></i></div></div></div></div></div><div class="cdc-m-header-article"><div class="cdc-m-header-article__placeholder"></div><div class="cdc-m-header-article__content"><div class="cdc-m-header-article__main"><div class="cdc-m-header-article__con"><div class="cdc-m-header-article__trigger"></div><div class="cdc-m-header-article__menu"><div class="cdc-m-header-article__menu-mask"></div><div class="cdc-m-header-article__menu-side"><div class="cdc-m-header__sidebar"><div class="cdc-m-header__sidebar-top"><i class="cdc-m-header__sidebar-top__logo"></i><span class="cdc-m-header__sidebar-top__back"></span></div><div class="cdc-m-header__sidebar-menus"><a href="https://cloud.tencent.com/developer" class="cdc-m-header__sidebar-menu link">首页</a><div class="tpm1-collapse"><div class="tpm1-collapse__panel"><header class="tpm1-collapse__panel-hd"><div class="tpm1-collapse__panel-title">学习</div></header></div><div class="tpm1-collapse__panel"><header class="tpm1-collapse__panel-hd"><div class="tpm1-collapse__panel-title">活动</div></header></div><div class="tpm1-collapse__panel"><header class="tpm1-collapse__panel-hd"><div class="tpm1-collapse__panel-title">专区</div></header></div><div class="tpm1-collapse__panel"><header class="tpm1-collapse__panel-hd"><div class="tpm1-collapse__panel-title">工具</div></header></div></div><a href="https://cloud.tencent.com/tvp?from=20154&amp;from_column=20154" class="cdc-m-header__sidebar-menu link">TVP</a><a class="cdc-m-header__sidebar-activity" href="https://cloud.tencent.com/developer/program/tm" target="_blank">腾讯云架构师技术同盟<div class="cdc-badge"><div class="cdc-badge-inner"><div class="cdc-badge-text"></div></div></div></a></div><div class="cdc-m-header__sidebar-back"><a href="https://cloud.tencent.com/?from=20060&amp;from_column=20060" class="cdc-m-header__sidebar-back__link"><i></i><span>返回腾讯云官网</span></a></div></div></div></div></div><div class="cdc-m-header-article__title"><div class="cdc-m-header-article__title-logo"></div></div><div class="cdc-m-header-article__extra"><div class="cdc-m-header-article__extra-icon"><i class="extra-search"></i></div><div class="cdc-m-header-article__extra-operate"><div class="cdc-m-header-article__extra-icon"><i class="extra-man"></i></div></div></div></div></div></div><div class="cdc-global__main"><div class="cdc-article__body"><div class="cdc-layout"><div class="cdc-layout__main"><div class="cdc-crumb mod-crumb"><div class="cdc-crumb__inner"><a class="cdc-crumb__item" href="https://cloud.tencent.com/developer">社区首页</a><span class="cdc-crumb__split"> &gt;</span><a class="cdc-crumb__item" href="https://cloud.tencent.com/developer/column">专栏</a><span class="cdc-crumb__split"> &gt;</span><span class="cdc-crumb__item current">基于cmake为项目自动获取git分支tag的版本号和commitid</span></div></div><div class="mod-article-content"><div class="mod-header"><div class="mod-header__top"><div class="mod-header__title"><h1 class="title-text">基于cmake为项目自动获取git分支tag的版本号和commitid</h1></div></div><div class="mod-article-source header"><div class="mod-article-source__main"><div class="mod-article-source__avatar"><img src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/rzl0j09fic.png" alt="作者头像"></div><div class="mod-article-source__detail"><div class="mod-article-source__name"><span>码农心语</span></div></div><button class="cdc-btn mod-article-source__operate cdc-btn--primary"><span><i></i>关注</span></button></div></div><div class="mod-header__bottom"><div class="mod-header__detail"><div class="mod-header__date"><span class="date-text">发布于 2024-07-20 11:29:13</span></div><div class="mod-header__date is-mobile"><span class="date-text">发布于 2024-07-20 11:29:13</span></div><div class="mod-header__infos"><div class="cdc-icon__list"><span class="cdc-svg-icon-con"><span class="cdc-svg-icon" style="width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><g id="icon-view" transform="translate(0.000000, 3.000000)" fill="currentcolor" fill-rule="nonzero"><path d="M15.885,4.68036 C14.9951,3.57569 11.7987,-0.004272 7.99883,-0.004272 C4.19895,-0.004272 1.02302,3.57569 0.112682,4.68036 C0.040058,4.77107 0.000488281,4.88381 0.000488281,5 C0.000488281,5.1162 0.040058,5.22894 0.112682,5.31964 C1.00767,6.42432 4.20407,10.0043 7.99883,10.0043 C11.7936,10.0043 14.9951,6.42432 15.885,5.31964 C15.9576,5.22894 15.9972,5.1162 15.9972,5 C15.9972,4.88381 15.9576,4.77107 15.885,4.68036 Z M7.99883,8.97632 C4.93029,8.97632 2.25555,6.25043 1.17644,4.99745 C2.25555,3.74446 4.95586,1.01857 7.99883,1.01857 C11.0418,1.01857 13.7421,3.74446 14.8314,4.99745 C13.7421,6.25043 11.0418,8.97632 7.99883,8.97632 Z" id="形状"></path><path d="M7.97304,2.55286 C7.49865,2.55286 7.03491,2.69353 6.64046,2.95709 C6.24602,3.22065 5.93859,3.59525 5.75704,4.03354 C5.5755,4.47182 5.528,4.95409 5.62055,5.41937 C5.7131,5.88465 5.94154,6.31203 6.27699,6.64748 C6.61244,6.98293 7.03982,7.21137 7.5051,7.30392 C7.97038,7.39647 8.45265,7.34897 8.89093,7.16743 C9.32922,6.98588 9.70382,6.67845 9.96738,6.28401 C10.2309,5.88956 10.3716,5.42582 10.3716,4.95143 C10.3716,4.31529 10.1189,3.7052 9.66909,3.25538 C9.21927,2.80556 8.60918,2.55286 7.97304,2.55286 Z M7.97304,6.32716 C7.70095,6.32716 7.43496,6.24647 7.20872,6.09531 C6.98249,5.94414 6.80616,5.72928 6.70203,5.4779 C6.59791,5.22652 6.57066,4.94991 6.62374,4.68304 C6.67683,4.41617 6.80785,4.17104 7.00025,3.97864 C7.19265,3.78625 7.43778,3.65522 7.70465,3.60214 C7.97151,3.54905 8.24813,3.5763 8.49951,3.68042 C8.75089,3.78455 8.96575,3.96088 9.11692,4.18712 C9.26808,4.41335 9.34877,4.67934 9.34877,4.95143 C9.35012,5.13295 9.31553,5.31295 9.247,5.48104 C9.17846,5.64913 9.07734,5.802 8.94946,5.93084 C8.82158,6.05967 8.66946,6.16192 8.50188,6.2317 C8.3343,6.30147 8.15457,6.33739 7.97304,6.33739 L7.97304,6.32716 Z" id="形状"></path></g></svg></span><span class="cdc-svg-icon-text">269</span></span><span class="cdc-svg-icon-con is-comment"><span class="cdc-svg-icon" style="width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 13.414L5.58594 11H2V3H14V11H10.4141L8 13.414ZM5.17175 12L8 14.8282L10.8282 12H15V2H1V12H5.17175ZM4 6C3.44775 6 3 6.44769 3 7C3 7.55231 3.44775 8 4 8C4.55225 8 5 7.55231 5 7C5 6.44769 4.55225 6 4 6ZM7 7C7 6.44769 7.44775 6 8 6C8.55225 6 9 6.44769 9 7C9 7.55231 8.55225 8 8 8C7.44775 8 7 7.55231 7 7ZM12 6C11.4478 6 11 6.44769 11 7C11 7.55231 11.4478 8 12 8C12.5522 8 13 7.55231 13 7C13 6.44769 12.5522 6 12 6Z"></path></svg></span><span class="cdc-svg-icon-text">0</span></span></div></div></div><div class="mod-header__operates"><div class="mod-header__operate"><span class="cdc-svg-icon-con is-operate"><span class="cdc-svg-icon" style="width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.21101 2.54545C8.80733 1.81818 7.79814 1.81818 7.39446 2.54545L1.94481 12.3636C1.54113 13.0909 2.04573 14 2.85308 14H13.7524C14.5597 14 15.0643 13.0909 14.6607 12.3636L9.21101 2.54545ZM2.85308 12.9091L8.30273 3.09091L13.7524 12.9091H2.85308ZM8.00037 6H9.00037V10H8.00037V6ZM8.00037 11H9.00037V12H8.00037V11Z" fill="currentcolor"></path></svg></span><span class="cdc-svg-icon-text">举报</span></span></div></div></div><div class="mod-header__special"><div class="cdc-special-guide"><span><i class="cdc-special-guide-icon"></i>文章被收录于专栏：</span><a class="cdc-special-guide-name">码农心语</a></div></div></div><div class="mod-content"><div class="mod-content__markdown"><div><div class="rno-markdown new-version rno-"><ol class="ol-level-0"><li><strong>引言</strong></li></ol><p>  在项目构建的时候，我们经常会希望能够将<span class="mod-overview__keyword">git</span>提交的分支信息和提交号(commitid)以及当前版本发布的tag信息作为版本号自动构建到程序里面，以便后续能够快速定位所运行的程序所定影的git源码的版本，从而快速发现和定位问题。  </p><p>    本文利用cmake的自动构建能力，来实现以下信息的自动提取并构建到程序中：</p><ul class="ul-level-0"><li>当前代码的git 分支名</li><li>当前代码的git 提交号(commitid)</li><li>当前代码的tag所设置的版本号</li><li>当前代码的构建时间</li><li>当前代码的构建号(buildno)</li></ul><p>  以下以c语言构成为例，展示了利用cmake自动生成config.h文件，从而将以上信息自动集成到c语言工程代码中的过程。</p><ol class="ol-level-0"><li><strong>实现过程</strong></li></ol><h3 id="8q3gk" name="2.1-%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95%E8%A7%84%E5%88%92">2.1 工程目录规划</h3><p>  如下图：</p><figure class=""><div class="rno-markdown-img-url" style="text-align: center;"><div class="rno-markdown-img-url-inner" style="width: 81.22%;"><div style="width: 100%;"><img src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/740aba264655a3c417444b73c6660e12.png" alt="" style="width: 100%;"></div></div></div></figure><p>  其中有c语言源码都放在工程根目录下面，当然，对于比较大型的工程，可以对源码目录进行更细地拆分和规划，本demo只有一个test.c和config.h的c源码文件，因此源码目录从简；创建一个cmake目录，用来存放自定义的cmake模块文件；创建一个build目录，用来存放cmake运行所产生的输出文件。</p><h3 id="827lv" name="2.2-c%E7%A8%8B%E5%BA%8F%E6%96%87%E4%BB%B6">2.2 c程序文件</h3><p>  test.c 文件的内容如下：</p><div class="rno-markdown-code"><div class="rno-markdown-code-toolbar"><div class="rno-markdown-code-toolbar-info"><div class="rno-markdown-code-toolbar-item is-type"><span class="is-m-hidden">代码语言：</span>javascript</div></div><div class="rno-markdown-code-toolbar-opt"><div class="rno-markdown-code-toolbar-copy"><i class="icon-copy"></i><span class="is-m-hidden">复制</span></div></div></div><div class="developer-code-block"><pre class="prism-token token line-numbers language-javascript" tabindex="0"><code class="language-javascript" style="margin-left: 0px;">#include <span class="token operator">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token operator">&gt;</span>
#include <span class="token string">"config.h"</span>

int <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"version: %s\n"</span><span class="token punctuation">,</span> <span class="token constant">PROJECT_VERSION</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"commit:  %s\n"</span><span class="token punctuation">,</span> <span class="token constant">GIT_COMMITID</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"branch:  %s\n"</span><span class="token punctuation">,</span> <span class="token constant">GIT_BRANCH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"build time: %s\n"</span><span class="token punctuation">,</span> <span class="token constant">BUILD_TIME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"build no: %s\n"</span><span class="token punctuation">,</span> <span class="token constant">BUILD_NO</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div><p>    程序非常简单，无需多言。</p><p>  config.h文件的内容如下：</p><div class="rno-markdown-code"><div class="rno-markdown-code-toolbar"><div class="rno-markdown-code-toolbar-info"><div class="rno-markdown-code-toolbar-item is-type"><span class="is-m-hidden">代码语言：</span>javascript</div></div><div class="rno-markdown-code-toolbar-opt"><div class="rno-markdown-code-toolbar-copy"><i class="icon-copy"></i><span class="is-m-hidden">复制</span></div></div></div><div class="developer-code-block"><pre class="prism-token token line-numbers language-javascript" tabindex="0"><code class="language-javascript" style="margin-left: 0px;">#ifndef __CONFIG_H__
#define __CONFIG_H__

#define <span class="token constant">PROJECT_VERSION</span> <span class="token string">"0-1-9-alpha"</span>
#define <span class="token constant">GIT_COMMITID</span>    <span class="token string">"51045662cffc38c5cf706090a6f0c3d16311d85e"</span>
#define <span class="token constant">GIT_BRANCH</span>      <span class="token string">"test"</span>
#define <span class="token constant">BUILD_TIME</span>      <span class="token string">"2024-07-10 10:45:29"</span>
#define <span class="token constant">BUILD_NO</span>        <span class="token string">"10"</span>

#endif<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div><p>     这个config.h文件是用cmake自动构建出来的，不需要每次手工修改。以下是程序运行的效果：</p><div class="rno-markdown-code"><div class="rno-markdown-code-toolbar"><div class="rno-markdown-code-toolbar-info"><div class="rno-markdown-code-toolbar-item is-type"><span class="is-m-hidden">代码语言：</span>javascript</div></div><div class="rno-markdown-code-toolbar-opt"><div class="rno-markdown-code-toolbar-copy"><i class="icon-copy"></i><span class="is-m-hidden">复制</span></div></div></div><div class="developer-code-block"><pre class="prism-token token line-numbers language-javascript" tabindex="0"><code class="language-javascript" style="margin-left: 0px;"><span class="token literal-property property">stone</span><span class="token operator">:</span>build$ <span class="token punctuation">.</span><span class="token operator">/</span>gitversion

<span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token number">0</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token operator">-</span>alpha
<span class="token literal-property property">commit</span><span class="token operator">:</span>  51045662cffc38c5cf706090a6f0c3d16311d85e
<span class="token literal-property property">branch</span><span class="token operator">:</span>  test
build time<span class="token operator">:</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">45</span><span class="token operator">:</span><span class="token number">29</span>
build no<span class="token operator">:</span> <span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div><p>2.3 CMakeLists.txt</p><div class="rno-markdown-code"><div class="rno-markdown-code-toolbar"><div class="rno-markdown-code-toolbar-info"><div class="rno-markdown-code-toolbar-item is-type"><span class="is-m-hidden">代码语言：</span>javascript</div></div><div class="rno-markdown-code-toolbar-opt"><div class="rno-markdown-code-toolbar-copy"><i class="icon-copy"></i><span class="is-m-hidden">复制</span></div></div></div><div class="developer-code-block"><pre class="prism-token token line-numbers language-javascript" tabindex="0"><code class="language-javascript" style="margin-left: 0px;"><span class="token function">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token constant">VERSION</span> <span class="token number">3.5</span> <span class="token constant">FATAL_ERROR</span><span class="token punctuation">)</span>

<span class="token function">project</span><span class="token punctuation">(</span>gitversion <span class="token constant">C</span><span class="token punctuation">)</span>

# 设置自定义模块文件的所在路径
<span class="token function">list</span><span class="token punctuation">(</span><span class="token constant">APPEND</span> <span class="token constant">CMAKE_MODULE_PATH</span> <span class="token string">"${PROJECT_SOURCE_DIR}/cmake/"</span><span class="token punctuation">)</span>

# 导入自定义模型文件
<span class="token function">include</span><span class="token punctuation">(</span>GitVersion<span class="token punctuation">)</span>
<span class="token function">include</span><span class="token punctuation">(</span>BuildNumber<span class="token punctuation">)</span>

# 获取程序的版本信息
<span class="token function">fetch_version_from_git</span><span class="token punctuation">(</span><span class="token string">"GITVERSION"</span><span class="token punctuation">)</span>

# 获取程序的构建号
<span class="token function">new_build_number</span><span class="token punctuation">(</span><span class="token string">"GITVERSION"</span><span class="token punctuation">)</span>

<span class="token function">set</span><span class="token punctuation">(</span><span class="token constant">GITVERSION_VERSION</span> <span class="token string">"${GITVERSION_VERSION_MAJOR}-${GITVERSION_VERSION_MINOR}-${GITVERSION_VERSION_PATCH}-${GITVERSION_VERSION_STAGE}"</span><span class="token punctuation">)</span>

# 生成程序的构建时间
<span class="token function">string</span><span class="token punctuation">(</span><span class="token constant">TIMESTAMP</span> <span class="token constant">BUILD_TIME</span> <span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>

# 利用config<span class="token punctuation">.</span>h<span class="token punctuation">.</span>in模板文件自动生成config<span class="token punctuation">.</span>h文件
<span class="token function">configure_file</span><span class="token punctuation">(</span><span class="token string">"${PROJECT_SOURCE_DIR}/config.h.in"</span>
            <span class="token string">"${PROJECT_SOURCE_DIR}/config.h"</span> @<span class="token constant">ONLY</span><span class="token punctuation">)</span>

# 创建构建目标为可执行程序
<span class="token function">add_executable</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">PROJECT_NAME</span><span class="token punctuation">}</span> test<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div><p>2.4 GitVersion.cmake文件</p><div class="rno-markdown-code"><div class="rno-markdown-code-toolbar"><div class="rno-markdown-code-toolbar-info"><div class="rno-markdown-code-toolbar-item is-type"><span class="is-m-hidden">代码语言：</span>javascript</div></div><div class="rno-markdown-code-toolbar-opt"><div class="rno-markdown-code-toolbar-copy"><i class="icon-copy"></i><span class="is-m-hidden">复制</span></div></div></div><div class="developer-code-block"><pre class="prism-token token line-numbers language-javascript" tabindex="0"><code class="language-javascript" style="margin-left: 0px;"># This module defines the following variables utilizing
# git to determine the parent tag<span class="token punctuation">.</span> And <span class="token keyword">if</span> found the macro
# will attempt to parse them <span class="token keyword">in</span> the github tag format
#
# Useful <span class="token keyword">for</span> auto<span class="token operator">-</span>versioning <span class="token keyword">in</span> our CMakeLists
#
#  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_MAJOR <span class="token operator">-</span> Major version<span class="token punctuation">.</span>
#  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_MINOR <span class="token operator">-</span> Minor version
#  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_PATCH <span class="token operator">-</span> Patch number
#  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_STAGE <span class="token operator">-</span> Stage version
#  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_COMMITID      <span class="token operator">-</span> Git commitid
#  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_BRANCH        <span class="token operator">-</span> Git branch
#
# Example usage<span class="token operator">:</span>
#
# <span class="token function">fetch_version_from_git</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span>
#    <span class="token function">message</span><span class="token punctuation">(</span><span class="token string">"        major=${test_VERSION_MAJOR}"</span><span class="token punctuation">)</span>
#    <span class="token function">message</span><span class="token punctuation">(</span><span class="token string">"        minor=${test_VERSION_MINOR}"</span><span class="token punctuation">)</span>
#    <span class="token function">message</span><span class="token punctuation">(</span><span class="token string">"        patch=${test_VERSION_PATCH}"</span><span class="token punctuation">)</span>
#    <span class="token function">message</span><span class="token punctuation">(</span><span class="token string">"        stage=${test_VERSION_STAGE}"</span><span class="token punctuation">)</span>
#    <span class="token function">message</span><span class="token punctuation">(</span><span class="token string">"        stage=${test_BRANCH}"</span><span class="token punctuation">)</span>

<span class="token function">include</span><span class="token punctuation">(</span>FindGit<span class="token punctuation">)</span>

<span class="token function">macro</span><span class="token punctuation">(</span>fetch_version_from_git <span class="token constant">VARPREFIX</span><span class="token punctuation">)</span>
    # <span class="token keyword">set</span> our defaults<span class="token punctuation">.</span>
    <span class="token function">set</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_MAJOR <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">set</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_MINOR <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token function">set</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_PATCH <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token function">set</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_STAGE <span class="token string">"alpha-dev"</span><span class="token punctuation">)</span>

    <span class="token function">find_package</span><span class="token punctuation">(</span>Git<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">GIT_FOUND</span><span class="token punctuation">)</span>
        # 获取git的提交号
        <span class="token function">execute_process</span><span class="token punctuation">(</span>
           <span class="token constant">COMMAND</span>
                $<span class="token punctuation">{</span><span class="token constant">GIT_EXECUTABLE</span><span class="token punctuation">}</span> rev<span class="token operator">-</span>parse  <span class="token constant">HEAD</span>
            <span class="token constant">WORKING_DIRECTORY</span>
                $<span class="token punctuation">{</span><span class="token constant">PROJECT_SOURCE_DIR</span><span class="token punctuation">}</span>
            <span class="token constant">RESULT_VARIABLE</span>
                <span class="token constant">GITRET</span>
            <span class="token constant">OUTPUT_VARIABLE</span>
                $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_COMMITID
            <span class="token constant">OUTPUT_STRIP_TRAILING_WHITESPACE</span>
        <span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">NOT</span> <span class="token constant">GITRET</span> <span class="token constant">EQUAL</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">message</span><span class="token punctuation">(</span><span class="token constant">FATAL_ERROR</span> <span class="token string">"Failed to fetch current git commitid."</span><span class="token punctuation">)</span>
        <span class="token function">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        # 获取git的分支名
        <span class="token function">execute_process</span><span class="token punctuation">(</span>
           <span class="token constant">COMMAND</span>
                $<span class="token punctuation">{</span><span class="token constant">GIT_EXECUTABLE</span><span class="token punctuation">}</span> rev<span class="token operator">-</span>parse  <span class="token operator">--</span>abbrev<span class="token operator">-</span>ref <span class="token constant">HEAD</span>
            <span class="token constant">WORKING_DIRECTORY</span>
                $<span class="token punctuation">{</span><span class="token constant">PROJECT_SOURCE_DIR</span><span class="token punctuation">}</span>
            <span class="token constant">RESULT_VARIABLE</span>
                <span class="token constant">GITRET</span>
            <span class="token constant">OUTPUT_VARIABLE</span>
                $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_BRANCH
            <span class="token constant">OUTPUT_STRIP_TRAILING_WHITESPACE</span>
        <span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">NOT</span> <span class="token constant">GITRET</span> <span class="token constant">EQUAL</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">message</span><span class="token punctuation">(</span><span class="token constant">FATAL_ERROR</span> <span class="token string">"Failed to fetch current git branch name."</span><span class="token punctuation">)</span>
        <span class="token function">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        # 通过git的tag获取工程的版本号
        <span class="token function">execute_process</span><span class="token punctuation">(</span>
            <span class="token constant">COMMAND</span>
                $<span class="token punctuation">{</span><span class="token constant">GIT_EXECUTABLE</span><span class="token punctuation">}</span> describe <span class="token operator">--</span>abbrev<span class="token operator">=</span><span class="token number">0</span> <span class="token operator">--</span>always
            <span class="token constant">WORKING_DIRECTORY</span>
                $<span class="token punctuation">{</span><span class="token constant">PROJECT_SOURCE_DIR</span><span class="token punctuation">}</span>
            <span class="token constant">RESULT_VARIABLE</span>
                <span class="token constant">GITRET</span>
            <span class="token constant">OUTPUT_VARIABLE</span>
                <span class="token constant">GITVERSION</span>
            <span class="token constant">OUTPUT_STRIP_TRAILING_WHITESPACE</span>
        <span class="token punctuation">)</span>

        # <span class="token function">匹配</span><span class="token punctuation">(</span><span class="token punctuation">.</span>、_、<span class="token operator">-</span><span class="token punctuation">)</span>，并替换为<span class="token punctuation">;</span>  即将字符串分割成字符串列表
        # 获取到的版本信息如：release<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.1</span><span class="token operator">-</span>alpha<span class="token punctuation">,</span> 总共<span class="token number">5</span>段
        <span class="token function">string</span><span class="token punctuation">(</span><span class="token constant">REGEX</span> <span class="token constant">REPLACE</span> <span class="token string">"[\\._-]"</span> <span class="token string">";"</span> <span class="token constant">VERSION_LIST</span> <span class="token string">"${GITVERSION}"</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">VERSION_LIST</span><span class="token punctuation">)</span>
            <span class="token function">list</span><span class="token punctuation">(</span><span class="token constant">LENGTH</span> <span class="token constant">VERSION_LIST</span> <span class="token constant">VERSION_LIST_LENGTH</span><span class="token punctuation">)</span>
        <span class="token function">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">GITRET</span> <span class="token constant">EQUAL</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token constant">AND</span> <span class="token punctuation">(</span><span class="token constant">VERSION_LIST_LENGTH</span> <span class="token constant">EQUAL</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token function">list</span><span class="token punctuation">(</span><span class="token constant">GET</span> <span class="token constant">VERSION_LIST</span> <span class="token number">1</span> _MAJOR<span class="token punctuation">)</span>
            <span class="token function">list</span><span class="token punctuation">(</span><span class="token constant">GET</span> <span class="token constant">VERSION_LIST</span> <span class="token number">2</span> _MINOR<span class="token punctuation">)</span>
            <span class="token function">list</span><span class="token punctuation">(</span><span class="token constant">GET</span> <span class="token constant">VERSION_LIST</span> <span class="token number">3</span> _PATCH<span class="token punctuation">)</span>
            <span class="token function">list</span><span class="token punctuation">(</span><span class="token constant">GET</span> <span class="token constant">VERSION_LIST</span> <span class="token number">4</span> _STAGE<span class="token punctuation">)</span>

            <span class="token function">set</span><span class="token punctuation">(</span>_DEFAULT_VERSION <span class="token string">"${${VARPREFIX}_GIT___VERSION_MAJOR}.${${VARPREFIX}_GIT___VERSION_MINOR}.${${VARPREFIX}_GIT___VERSION_PATCH}-${${VARPREFIX}_GIT___VERSION_STAGE}"</span><span class="token punctuation">)</span>
            <span class="token function">set</span><span class="token punctuation">(</span>_GIT_VERSION     <span class="token string">"${_MAJOR}.${_MINOR}.${_PATCH}-${_STAGE}"</span><span class="token punctuation">)</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token punctuation">{</span>_DEFAULT_VERSION<span class="token punctuation">}</span> <span class="token constant">VERSION_LESS</span> $<span class="token punctuation">{</span>_GIT_VERSION<span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token function">set</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_MAJOR $<span class="token punctuation">{</span>_MAJOR<span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token function">set</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_MINOR $<span class="token punctuation">{</span>_MINOR<span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token function">set</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_PATCH $<span class="token punctuation">{</span>_PATCH<span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token function">set</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_STAGE $<span class="token punctuation">{</span>_STAGE<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token function">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">endmacro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div><p>    以上fetch_version_from_git 宏利用git命令来获取工程的git提交号、分支名、以及版本号。其中版本号是在所打的git tag中获取的，tag名称的格式如下：gitversion-0.1.9-alpha。总共分为3个部分，第一个部分是工程名；第二个部分是版本号，要求格式为主版本号.次版本号.PATCH版本号；第三部分是版本发布阶段，包括rc、alpha、beta、alpha-dev、release、stable等等。 </p><p>    最后获取到的信息放在对应的变量中,其中变量名的前缀由宏的调用者传入，如下：</p><div class="rno-markdown-code"><div class="rno-markdown-code-toolbar"><div class="rno-markdown-code-toolbar-info"><div class="rno-markdown-code-toolbar-item is-type"><span class="is-m-hidden">代码语言：</span>javascript</div></div><div class="rno-markdown-code-toolbar-opt"><div class="rno-markdown-code-toolbar-copy"><i class="icon-copy"></i><span class="is-m-hidden">复制</span></div></div></div><div class="developer-code-block"><pre class="prism-token token line-numbers language-javascript" tabindex="0"><code class="language-javascript" style="margin-left: 0px;">  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_MAJOR <span class="token operator">-</span> Major version<span class="token punctuation">.</span>
  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_MINOR <span class="token operator">-</span> Minor version
  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_PATCH <span class="token operator">-</span> Patch number
  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_VERSION_STAGE <span class="token operator">-</span> Stage version
  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_COMMITID      <span class="token operator">-</span> Git commitid
  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_BRANCH        <span class="token operator">-</span> Git branch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div><p>2.5 BuildNumber.cmake文件</p><div class="rno-markdown-code"><div class="rno-markdown-code-toolbar"><div class="rno-markdown-code-toolbar-info"><div class="rno-markdown-code-toolbar-item is-type"><span class="is-m-hidden">代码语言：</span>javascript</div></div><div class="rno-markdown-code-toolbar-opt"><div class="rno-markdown-code-toolbar-copy"><i class="icon-copy"></i><span class="is-m-hidden">复制</span></div></div></div><div class="developer-code-block"><pre class="prism-token token line-numbers language-javascript" tabindex="0"><code class="language-javascript" style="margin-left: 0px;"># This module defines the following variables to denote 
# <span class="token keyword">new</span> <span class="token class-name">generated</span> buildno
#
#  $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_BUILD_NUMBER  <span class="token operator">-</span> New generated BuildNo
#
# If the build_number<span class="token punctuation">.</span>txt file does not exist under 
# $<span class="token punctuation">{</span><span class="token constant">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">}</span> directory<span class="token punctuation">,</span> a <span class="token keyword">new</span> <span class="token class-name">build_number<span class="token punctuation">.</span>txt</span> 
# will be created and the build no will be <span class="token keyword">set</span> to <span class="token number">1</span><span class="token punctuation">,</span> otherwise 
# the build no will increment one by one everytime cmake command 
# is executed<span class="token punctuation">.</span>
#
# Example usage<span class="token operator">:</span>
#
# <span class="token function">new_build_number</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span>
#    <span class="token function">message</span><span class="token punctuation">(</span><span class="token string">"        buildno=${test_BUILD_NUMBER}"</span><span class="token punctuation">)</span>

<span class="token function">macro</span><span class="token punctuation">(</span>new_build_number <span class="token constant">VARPREFIX</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">EXISTS</span> <span class="token string">"${CMAKE_CURRENT_SOURCE_DIR}/build_number.txt"</span><span class="token punctuation">)</span>
        <span class="token function">file</span><span class="token punctuation">(</span><span class="token constant">READ</span> <span class="token string">"${CMAKE_CURRENT_SOURCE_DIR}/build_number.txt"</span> $<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_BUILD_NUMBER<span class="token punctuation">)</span>
        <span class="token function">string</span><span class="token punctuation">(</span><span class="token constant">STRIP</span> $<span class="token punctuation">{</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_BUILD_NUMBER<span class="token punctuation">}</span> <span class="token constant">BUILD_NUMBER</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">set</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span><span class="token constant">VARPREFIX</span><span class="token punctuation">}</span>_BUILD_NUMBER  <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    # 将 build number 加<span class="token number">1</span>
    <span class="token function">math</span><span class="token punctuation">(</span><span class="token constant">EXPR</span> <span class="token constant">NEW_BUILD_NUMBER</span> <span class="token string">"${${VARPREFIX}_BUILD_NUMBER} + 1"</span><span class="token punctuation">)</span>

    # 写入新的 build number 到文件
    <span class="token function">file</span><span class="token punctuation">(</span><span class="token constant">WRITE</span> <span class="token string">"${CMAKE_CURRENT_SOURCE_DIR}/build_number.txt"</span> <span class="token string">"${NEW_BUILD_NUMBER}"</span><span class="token punctuation">)</span>

<span class="token function">endmacro</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div><p>   以上宏代码会读取build_number.txt文件中的构建号，加1后从新写回build_number.txt中；如果build_number.txt文件不存在，则会创建一个新的build_number.txt,并将构件号设置为1。读取的构建号放在${VARPREFIX}_BUILD_NUMBER中。</p></div></div></div><div class="mod-content__source"><div class="mod-content__source-inner"><div class="mod-content__source-title">本文参与&nbsp;<a href="https://cloud.tencent.com/developer/support-plan" target="_blank">腾讯云自媒体同步曝光计划</a>，分享自微信公众号。</div><div class="mod-content__source-desc">原始发表：2024-07-14，如有侵权请联系&nbsp;<a href="mailto:cloudcommunity@tencent.com">cloudcommunity@tencent.com</a> 删除</div></div><div class="mod-content__source-qr"></div></div><div class="mod-statement-m"><div class="cdc-tag__list mod-content__tags" track-click=""><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/10283" target="_blank">git</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/12613" target="_blank">cmake</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/16786" target="_blank">version</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/17215" target="_blank">程序</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/17567" target="_blank">源码</a></div></div><div class="mod-content__statement"><p>本文分享自 <span>码农心语</span> 微信公众号，<span style="color: rgb(0, 82, 217);">前往查看</span></p><p>如有侵权，请联系 <a href="mailto:cloudcommunity@tencent.com">cloudcommunity@tencent.com</a> 删除。</p><p class="mod-content__statement-tip">本文参与&nbsp;<a href="https://cloud.tencent.com/developer/support-plan" target="_blank">腾讯云自媒体同步曝光计划</a>&nbsp; ，欢迎热爱写作的你一起参与！</p></div></div><div class="cdc-tag__list mod-content__tags" track-click=""><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/10283" target="_blank">git</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/12613" target="_blank">cmake</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/16786" target="_blank">version</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/17215" target="_blank">程序</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/17567" target="_blank">源码</a></div></div></div></div><div class="mod-article-content is-pill-hidden"><div class="mod-comment"><div class="mod-relevant__title">评论</div><div class="cdc-comment-response is-blank"><div class="cdc-comment-response-single-edit not-logged"><div class="cdc-comment-response-single-edit__inner"><span class="cdc-avatar cdc-comment-response-single-edit__avatar cdc-comment__avatar circle"><span class="cdc-avatar__inner" style="background-image: url(&quot;https://qcloudimg.tencent-cloud.cn/raw/2eca91c9c29816ff056d22815949d83c.png&quot;);" target="_blank"></span></span><div class="cdc-comment-response-single-edit__main"><span>登录</span>后参与评论</div></div></div><div class="cdc-comment-response__toolbar"></div><div class="cdc-comment-response-inner"><div class="cdc-comment-response__body is-blank"><div class="cdc-comment-response__blank"><i class="cdc-comment-response__blank-img"></i><div class="cdc-comment-response__blank-tip">暂无评论</div></div></div></div><div class="cdc-operate-footer"><div class="cdc-operate-footer__inner"><div class="cdc-operate-footer__toggle is-logout"><div class="cdc-operate-footer__toggle-text"><span>登录 </span>后参与评论</div></div></div></div></div></div></div><div class="mod-article-content recommend"><div class="mod-relevant" qct-area="推荐阅读" qct-exposure=""><div class="mod-relevant__title recommend-read">推荐阅读</div><div class="cdc-article-rank" qct-area="编辑精选文章" qct-exposure=""><div class="cdc-article-rank__hd"><div class="cdc-article-rank__title">编辑精选文章</div><div class="cdc-article-rank__refresh">换一批<i class="icon-refresh"></i></div></div><div class="cdc-article-rank__bd"><div class="t-row t-row--start t-row--top" style="margin-left: -25px; margin-right: -25px; row-gap: 16px;"><div class="t-col t-col-6 t-col-offset-0 t-col-pull-0 t-col-push-0 t-col-order-0" style="padding-left: 25px; padding-right: 25px;"><a class="cdc-article-rank__item" href="https://cloud.tencent.com/developer/article/2453570" target="_blank" qct-area="文章-2453570" qct-click="" qct-exposure=""><i class="icon-article"></i><span class="cdc-article-rank__item-title">鹅厂写码13年，我总结的程序员高效阅读方法论</span><div class="cdc-article-rank__item-view"><i class="icon-view"></i>3318</div></a></div><div class="t-col t-col-6 t-col-offset-0 t-col-pull-0 t-col-push-0 t-col-order-0" style="padding-left: 25px; padding-right: 25px;"><a class="cdc-article-rank__item" href="https://cloud.tencent.com/developer/article/2457614" target="_blank" qct-area="文章-2457614" qct-click="" qct-exposure=""><i class="icon-article"></i><span class="cdc-article-rank__item-title">进程，线程，协程 - 你了解多少？</span><div class="cdc-article-rank__item-view"><i class="icon-view"></i>1408</div></a></div><div class="t-col t-col-6 t-col-offset-0 t-col-pull-0 t-col-push-0 t-col-order-0" style="padding-left: 25px; padding-right: 25px;"><a class="cdc-article-rank__item" href="https://cloud.tencent.com/developer/article/2461018" target="_blank" qct-area="文章-2461018" qct-click="" qct-exposure=""><i class="icon-article"></i><span class="cdc-article-rank__item-title">微服务与分布式系统设计看这篇就够了！</span><div class="cdc-article-rank__item-view"><i class="icon-view"></i>1237</div></a></div><div class="t-col t-col-6 t-col-offset-0 t-col-pull-0 t-col-push-0 t-col-order-0" style="padding-left: 25px; padding-right: 25px;"><a class="cdc-article-rank__item" href="https://cloud.tencent.com/developer/article/2461446" target="_blank" qct-area="文章-2461446" qct-click="" qct-exposure=""><i class="icon-article"></i><span class="cdc-article-rank__item-title">腾讯文档表格卡顿指标探索之路</span><div class="cdc-article-rank__item-view"><i class="icon-view"></i>1124</div></a></div><div class="t-col t-col-6 t-col-offset-0 t-col-pull-0 t-col-push-0 t-col-order-0" style="padding-left: 25px; padding-right: 25px;"><a class="cdc-article-rank__item" href="https://cloud.tencent.com/developer/article/2463810" target="_blank" qct-area="文章-2463810" qct-click="" qct-exposure=""><i class="icon-article"></i><span class="cdc-article-rank__item-title">从Hadoop1.0到Hadoop2.0架构的优化和发展探索详解</span><div class="cdc-article-rank__item-view"><i class="icon-view"></i>1134</div></a></div><div class="t-col t-col-6 t-col-offset-0 t-col-pull-0 t-col-push-0 t-col-order-0" style="padding-left: 25px; padding-right: 25px;"><a class="cdc-article-rank__item" href="https://cloud.tencent.com/developer/article/2465281" target="_blank" qct-area="文章-2465281" qct-click="" qct-exposure=""><i class="icon-article"></i><span class="cdc-article-rank__item-title">微服务架构：由浅入深带你了解底层注册中心</span><div class="cdc-article-rank__item-view"><i class="icon-view"></i>1083</div></a></div></div></div></div><div class="mod-relevant__list" qct-area="相关文章"><div class="cdc-article-panel-response__list"><div class="cdc-article-panel-response" qct-area="文章-1920045" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1920045" target="_blank" class="cdc-article-panel-response__title">CMake 基础学习</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10278" target="_blank">ide</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10166" target="_blank">c++</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1920045" target="_blank">使用 {}进行变量的引用。例如：message({Hello_VERSION})， Hello为工程名。CMake提供了很多有用的变量。以下仅列举常用的变量：</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/male/BJ1gsdabHO7.png&quot;);" href="https://cloud.tencent.com/developer/user/6099270" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">艳龙</div></div><div class="cdc-article-panel-response__date">2021/12/16</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.8K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2237572" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2237572" target="_blank" class="cdc-article-panel-response__title">CMake -- CPack工具</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10364" target="_blank">文件存储</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10278" target="_blank">ide</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/2237572" target="_blank">官网介绍：Configure generators for binary installers and source packages</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://developer.qcloudimg.com/http-save/10011/fc6cf403874bf6b17cad344f1879893c.jpg&quot;);" href="https://cloud.tencent.com/developer/user/4363812" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">何其不顾四月天</div></div><div class="cdc-article-panel-response__date">2023/03/10</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">674</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2422896" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2422896" target="_blank" class="cdc-article-panel-response__title">学习了C/C++，居然不了解Cmake这一利器</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/12613" target="_blank">cmake</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/17190" target="_blank">编译</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/17205" target="_blank">测试</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10166" target="_blank">c++</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10752" target="_blank">单元测试</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/2422896" target="_blank">CMake 是一个跨平台的自动化建构系统，可以用简单的命令来控制软件编译过程。下面是一个关于如何使用 CMake 进行项目配置和编译的教程。</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/http-save/yehe-3007360/249ce3e190f7d30d1f8e283784edb489.jpeg&quot;);" href="https://cloud.tencent.com/developer/user/3007360" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">鳄鱼儿</div></div><div class="cdc-article-panel-response__date">2024/05/29</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">150</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div><div class="cdc-article-panel-response__object"><img class="cdc-article-panel-response__object-thumbnail" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/dc569a2abde8bbffabc5bbc9148ae2ac.webp" alt="学习了C/C++，居然不了解Cmake这一利器"></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1193993" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1193993" target="_blank" class="cdc-article-panel-response__title">cmake用法</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/125" target="_blank">其他</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1193993" target="_blank">示例源码
 在 linux 平台下使用 CMake 生成 Makefile 并编译的流程如下：</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/2929716/8mq53o3vpl.png&quot;);" href="https://cloud.tencent.com/developer/user/2929716" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">用户2929716</div></div><div class="cdc-article-panel-response__date">2018/08/23</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div><div class="cdc-article-panel-response__object"><img class="cdc-article-panel-response__object-thumbnail" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/7x5ikiqow7.png" alt="cmake用法"></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1890013" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1890013" target="_blank" class="cdc-article-panel-response__title">关于 CMake 使用，看这一篇可能就够了</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10308" target="_blank">linux</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10195" target="_blank">regex</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10170" target="_blank">javascript</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1890013" target="_blank">cmake 是一个跨平台、开源的构建系统。它是一个集软件构建、测试、打包于一身的软件。它使用与平台和编译器独立的配置文件来对软件编译过程进行控制。</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/http-save/yehe-7399394/s4e1ixg9zm.jpeg&quot;);" href="https://cloud.tencent.com/developer/user/7399394" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">字节流动</div></div><div class="cdc-article-panel-response__date">2021/10/18</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">5.6K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2168467" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2168467" target="_blank" class="cdc-article-panel-response__title">CMake常用命令的一些整理</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10278" target="_blank">ide</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/2168467" target="_blank">CMake 是什么我就不用再多说什么了，相信大家都有接触才会看一篇文章。对于不太熟悉的开发人员可以把这篇文章当个查找手册。</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/9895632/9j701ti3r1.jpg&quot;);" href="https://cloud.tencent.com/developer/user/9895632" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">混说Linux</div></div><div class="cdc-article-panel-response__date">2022/11/18</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.6K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2298644" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2298644" target="_blank" class="cdc-article-panel-response__title">万字总结编译利器CMake，从入门到项目实战演练</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/14486" target="_blank">linux-kernel</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/12613" target="_blank">cmake</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/17217" target="_blank">程序员</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/2298644" target="_blank">你
或许听过好几种 Make 工具，例如 GNU Make ，QT 的 qmake ，微软的 MS nmake，BSD 
Make（pmake），Makepp，等等。这些 Make 工具遵循着不同的规范和标准，所执行的 Makefile 
格式也千差万别。这样就带来了一个严峻的问题：如果软件想跨平台，必须要保证能够在不同平台编译。而如果使用上面的 Make 
工具，就得为每一种标准写一次 Makefile ，这将是一件让人抓狂的工作。</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/http-save/yehe-10025783/f944dfc5449517953be67757d24bdb1e.jpg&quot;);" href="https://cloud.tencent.com/developer/user/10025783" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">嵌入式Linux内核</div></div><div class="cdc-article-panel-response__date">2023/06/28</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.3K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div><div class="cdc-article-panel-response__object"><img class="cdc-article-panel-response__object-thumbnail" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/20230628-32fddd03.jpg" alt="万字总结编译利器CMake，从入门到项目实战演练"></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1606950" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1606950" target="_blank" class="cdc-article-panel-response__title">CMake---优雅的构建C/C++软件项目实践(1)</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10278" target="_blank">ide</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10283" target="_blank">git</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10284" target="_blank">github</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1606950" target="_blank">首
先说明的是本篇文章不从cmake的整个语法上去讲述，而是从一个实际项目的构建上入手，去了解如何优雅的去构建一个软件项目，搭建一个C/C++软件项
目基本的依赖组件，最后形成一个构建C/C++软件项目的模板，方便后面新项目的重复使用。相信对我们日常的软件项目构建都会有很好的收获。废话不都说，
开始。</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/http-save/yehe-4503683/jcgtc4otgk.jpeg&quot;);" href="https://cloud.tencent.com/developer/user/4503683" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">别打名名</div></div><div class="cdc-article-panel-response__date">2020/03/31</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">8.4K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1510219" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1510219" target="_blank" class="cdc-article-panel-response__title">CMAKE入门实战</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1510219" target="_blank">最
近做的项目使用CLION构建，而这个采用CMakeLists.txt管理，因此为了更好的学习，故找到了一篇大牛级别的入门文章，有文章有代码，本文
是花了一点时间把这篇文章学习后的重要点记录吧，原作者github地址：https://github.com/wzpan/cmake-demo。</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/custom-avatar/1021473/a2siavwtr6.jpg&quot;);" href="https://cloud.tencent.com/developer/user/1021473" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">公众号guangcity</div></div><div class="cdc-article-panel-response__date">2019/09/20</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.5K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div><div class="cdc-article-panel-response__object"><img class="cdc-article-panel-response__object-thumbnail" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/46a2bcsv4f.png" alt="CMAKE入门实战"></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2237575" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2237575" target="_blank" class="cdc-article-panel-response__title">QMake 工程 转换为CMake 工程</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/2237575" target="_blank">QMake 工程 转换为CMake 工程

源码目录结构
.
├── build.sh
├── businesscontrol.cpp
├── businesscontrol.h
├── globaldef.h
├── lib
│   └── x86_64
├── log
│   ├── LogFileManager.cpp
│   ├── LogFileManager.h
├── main.cpp
├── mqtt
│   ├── mqttclient.cpp
│   ├── mqttclient.h
├</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://developer.qcloudimg.com/http-save/10011/fc6cf403874bf6b17cad344f1879893c.jpg&quot;);" href="https://cloud.tencent.com/developer/user/4363812" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">何其不顾四月天</div></div><div class="cdc-article-panel-response__date">2023/03/10</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1010072" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1010072" target="_blank" class="cdc-article-panel-response__title">CMake学习笔记（二）——CMake语法</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10205" target="_blank">html</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10278" target="_blank">ide</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a></div></div><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/1124993/y5j3a89lpy.jpg&quot;);" href="https://cloud.tencent.com/developer/user/1124993" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">剑影啸清寒</div></div><div class="cdc-article-panel-response__date">2018/01/02</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">5.6K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1010068" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1010068" target="_blank" class="cdc-article-panel-response__title">CMake学习笔记（一）——CMake官网教程</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10278" target="_blank">ide</a></div></div><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/1124993/y5j3a89lpy.jpg&quot;);" href="https://cloud.tencent.com/developer/user/1124993" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">剑影啸清寒</div></div><div class="cdc-article-panel-response__date">2018/01/02</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">4.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2029809" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2029809" target="_blank" class="cdc-article-panel-response__title">CMakeLists.txt 语法介绍与实例演练</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10308" target="_blank">linux</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/2029809" target="_blank">cmake 是一个跨平台、开源的构建系统。它是一个集软件构建、测试、打包于一身的软件。它使用与平台和编译器独立的配置文件来对软件编译过程进行控制。</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://developer.qcloudimg.com/http-save/10011/03368abb2838cad17b1e5c9f359274d9.jpg&quot;);" href="https://cloud.tencent.com/developer/user/8223537" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">全栈程序员站长</div></div><div class="cdc-article-panel-response__date">2022/06/24</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">2.3K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div><div class="cdc-article-panel-response__object"><img class="cdc-article-panel-response__object-thumbnail" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/67086e777f950d4a1e2a1eeb7c281812.png" alt="CMakeLists.txt 语法介绍与实例演练"></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1661528" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1661528" target="_blank" class="cdc-article-panel-response__title">【CMake教程】（二）CMake 通过CMakeLists.txt自动配置程序版本号</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10171" target="_blank">c#</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1661528" target="_blank">  本文主要讲述如何使用CMakeLists.txt，配置程序的版本号。程序在发布的时候需要对用的版本号，同时为了保证程序的兼容性，往往需要在程序中判断当前程序的版本。所以如果在编译过程中将版本号自动的传入程序中，就可以使程序更智能。</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/random-avatar/7471823/9j5kxyhadx.png&quot;);" href="https://cloud.tencent.com/developer/user/7471823" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">CNNer</div></div><div class="cdc-article-panel-response__date">2020/07/14</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">3.3K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div><div class="cdc-article-panel-response__object"><img class="cdc-article-panel-response__object-thumbnail" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/paydhplytx.jpeg" alt="【CMake教程】（二）CMake 通过CMakeLists.txt自动配置程序版本号"></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1338356" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1338356" target="_blank" class="cdc-article-panel-response__title">cmake教程5-macro宏定义以及传递参数给源文件</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/125" target="_blank">其他</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10620" target="_blank">http</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1338356" target="_blank"> 					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/haluoluo211/article/details/80861543				</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/2442861/044vq01u7m.png&quot;);" href="https://cloud.tencent.com/developer/user/2442861" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">bear_fish</div></div><div class="cdc-article-panel-response__date">2018/09/14</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">10.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div><div class="cdc-article-panel-response__object"><img class="cdc-article-panel-response__object-thumbnail" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/d777dx5cxr.jpeg" alt="cmake教程5-macro宏定义以及传递参数给源文件"></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1495137" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1495137" target="_blank" class="cdc-article-panel-response__title">cmake-tutorial cmake入门指引</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10205" target="_blank">html</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1495137" target="_blank">Below
 is a step-by-step tutorial covering common build system use cases that 
CMake helps to address. Many of these topics have been introduced in 
Mastering CMakeas separate issues but seeing how they all work together 
in an example project can be very helpful. This tutorial can be found in
 the Tests/Tutorial directory of the CMake source code tree. Each step 
has its own subdirectory containing a complete copy of the tutorial for 
that step.</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/http-save/yehe-1039840/i23bfo1z53.jpeg&quot;);" href="https://cloud.tencent.com/developer/user/1039840" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">望天</div></div><div class="cdc-article-panel-response__date">2019/08/29</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1665639" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1665639" target="_blank" class="cdc-article-panel-response__title">【CMake教程】（四）CMake 配置生成lib或者so的库文件</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10166" target="_blank">c++</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1665639" target="_blank">上
面几个教程我们的程序都是生成可执行文件。但是我们在合作开发算法的时候经常需要交付的是一个模块，该模块提供特定的算法功能，用于给整体的项目进行调
用。但我们又不能直接提供源码，所以我们可以提供一个库文件（静态库或者动态库），配置接口文件可以在不提供源代码的情况下给他人提供算法模块功能。本文
主要讲述如何使用CMakeLists.txt，配置生成动态和静态库文件。</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/random-avatar/7471823/9j5kxyhadx.png&quot;);" href="https://cloud.tencent.com/developer/user/7471823" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">CNNer</div></div><div class="cdc-article-panel-response__date">2020/07/21</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">12.6K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1433668" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1433668" target="_blank" class="cdc-article-panel-response__title">git:自动升级源码中版本号,并提交，tag,push的脚本实现</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10164" target="_blank">java</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10300" target="_blank">maven</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10695" target="_blank">正则表达式</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1433668" target="_blank">                         版权声明：本文为博主原创文章，转载请注明源地址。          https://blog.csdn.net/10km/article/details/82016166        </a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://developer.qcloudimg.com/http-save/10011/3234b0c36695fce0b14d93a5064a1d70.jpg&quot;);" href="https://cloud.tencent.com/developer/user/1148648" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">10km</div></div><div class="cdc-article-panel-response__date">2019/05/25</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">3K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1670521" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1670521" target="_blank" class="cdc-article-panel-response__title">CMake入门实战——其他</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10308" target="_blank">linux</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10275" target="_blank">打包</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10663" target="_blank">编程算法</a><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/10497" target="_blank">腾讯云测试服务</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1670521" target="_blank">让 CMake 支持 gdb 的设置也很容易，只需要指定 Debug 模式下开启 -g 选项：</a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/http-save/yehe-4558262/2bvx73phm1.jpeg&quot;);" href="https://cloud.tencent.com/developer/user/4558262" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">AI异构</div></div><div class="cdc-article-panel-response__date">2020/07/29</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">517</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1341049" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1341049" target="_blank" class="cdc-article-panel-response__title">使用 GitVersion 在编译或持续构建时自动使用语义版本号（Semantic Versioning）</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-tag-links cdc-article-panel-response__tags"><i class="cdc-tag-links__icon"></i><div class="cdc-tag-links__items"><a class="cdc-tag-links__item" href="https://cloud.tencent.com/developer/tag/125" target="_blank">其他</a></div></div><div class="cdc-article-panel-response__media"><a class="cdc-article-panel-response__desc" href="https://cloud.tencent.com/developer/article/1341049" target="_blank">                 发布于 2018-04-12 13:45              
                 更新于 2018-09-01 00:11              </a></div><div class="cdc-article-panel-response__infos"><div class="cdc-article-panel-response__user"><span class="cdc-avatar large cdc-article-panel-response__user-avatar circle"><a class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/3310939/zwbz2dczjd.png&quot;);" href="https://cloud.tencent.com/developer/user/3310939" target="_blank"></a></span><div class="cdc-article-panel-response__user-name">walterlv</div></div><div class="cdc-article-panel-response__date">2018/09/18</div><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">2.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div><div class="cdc-article-panel-response__object"><img class="cdc-article-panel-response__object-thumbnail" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/x7796tmhta.png" alt="使用 GitVersion 在编译或持续构建时自动使用语义版本号（Semantic Versioning）"></div></div></div></div></div></div></div><div class="mod-recommend"><div class="mod-recommend__title">推荐阅读</div><div class="mod-recommend__topic"><div class="mod-recommend__topic-list"><div class="cdc-m-article-rank" qct-area="编辑精选文章" qct-exposure=""><div class="cdc-m-article-rank__hd"><div class="cdc-m-article-rank__title">编辑精选文章</div></div><div class="cdc-m-article-rank__bd"><a class="cdc-m-article-rank__item" href="https://cloud.tencent.com/developer/article/2453570" qct-area="编辑精选-2453570" qct-click="" qct-exposure=""><i class="cdc-m-article-rank__item-icon"></i><span class="cdc-m-article-rank__item-title">鹅厂写码13年，我总结的程序员高效阅读方法论</span></a><a class="cdc-m-article-rank__item" href="https://cloud.tencent.com/developer/article/2457614" qct-area="编辑精选-2457614" qct-click="" qct-exposure=""><i class="cdc-m-article-rank__item-icon"></i><span class="cdc-m-article-rank__item-title">进程，线程，协程 - 你了解多少？</span></a><a class="cdc-m-article-rank__item" href="https://cloud.tencent.com/developer/article/2461018" qct-area="编辑精选-2461018" qct-click="" qct-exposure=""><i class="cdc-m-article-rank__item-icon"></i><span class="cdc-m-article-rank__item-title">微服务与分布式系统设计看这篇就够了！</span></a></div></div><div class="cdc-m-article-rank" qct-area="相关讨论" qct-exposure=""><div class="cdc-m-article-rank__hd"><div class="cdc-m-article-rank__title">相关讨论</div></div><div class="cdc-m-article-rank__bd"><a class="cdc-m-article-rank__item" href="https://cloud.tencent.com/developer/ask/70088" qct-area="相关-70088" qct-click="" qct-exposure=""><i class="cdc-m-article-rank__item-icon"></i><span class="cdc-m-article-rank__item-title">将所有远程git分支跟踪为本地分支。</span></a><a class="cdc-m-article-rank__item" href="https://cloud.tencent.com/developer/ask/27276" qct-area="相关-27276" qct-click="" qct-exposure=""><i class="cdc-m-article-rank__item-icon"></i><span class="cdc-m-article-rank__item-title">git远程分支删除，但仍然出现在“分支-a”？</span></a><a class="cdc-m-article-rank__item" href="https://cloud.tencent.com/developer/ask/26459" qct-area="相关-26459" qct-click="" qct-exposure=""><i class="cdc-m-article-rank__item-icon"></i><span class="cdc-m-article-rank__item-title">如何在不同的Git分支中查看文件，而不改变分支？</span></a></div></div><div class="cdc-m-article-rank" qct-area="相关课程" qct-exposure=""><div class="cdc-m-article-rank__hd"><div class="cdc-m-article-rank__title">相关课程</div></div><div class="cdc-m-article-rank__bd"><a class="cdc-m-article-rank__item" href="https://cloud.tencent.com/developer/learning/camp/25" qct-area="相关-25" qct-click="" qct-exposure=""><i class="cdc-m-article-rank__item-icon"></i><span class="cdc-m-article-rank__item-title">AI驱动的TDSQL-Cserverless实战营</span></a><a class="cdc-m-article-rank__item" href="https://cloud.tencent.com/developer/learning/camp/21" qct-area="相关-21" qct-click="" qct-exposure=""><i class="cdc-m-article-rank__item-icon"></i><span class="cdc-m-article-rank__item-title">ES Serverless一站式日志分析入门到精通</span></a><a class="cdc-m-article-rank__item" href="https://cloud.tencent.com/developer/learning/camp/11" qct-area="相关-11" qct-click="" qct-exposure=""><i class="cdc-m-article-rank__item-icon"></i><span class="cdc-m-article-rank__item-title">微信公众号在线学习平台搭建实践_《硅谷课堂》</span></a></div></div></div></div><div class="mod-recommend__list" qct-area="相关文章" qct-exposure=""><div class="cdc-article-panel-response__list"><div class="cdc-article-panel-response" qct-area="文章-1920045" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1920045" target="_blank" class="cdc-article-panel-response__title">CMake 基础学习</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.8K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2237572" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2237572" target="_blank" class="cdc-article-panel-response__title">CMake -- CPack工具</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">674</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2422896" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2422896" target="_blank" class="cdc-article-panel-response__title">学习了C/C++，居然不了解Cmake这一利器</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">150</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1193993" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1193993" target="_blank" class="cdc-article-panel-response__title">cmake用法</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1890013" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1890013" target="_blank" class="cdc-article-panel-response__title">关于 CMake 使用，看这一篇可能就够了</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">5.6K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2168467" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2168467" target="_blank" class="cdc-article-panel-response__title">CMake常用命令的一些整理</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.6K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2298644" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2298644" target="_blank" class="cdc-article-panel-response__title">万字总结编译利器CMake，从入门到项目实战演练</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.3K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-event-card with-tag"><span class="cdc-event-card__tag orange" track-click="{&quot;elementId&quot;:1}">广告</span><div track-click="{&quot;elementId&quot;:2}" class="cdc-event-card__close"></div><div class="cdc-event-card__inner"><div class="cdc-event-card__object" track-click="{&quot;elementId&quot;:3}"><div class="cdc-event-card__object-image" style="background-image: url(&quot;https://developer.qcloudimg.com/comm/operation/900005/20230817-4ac4d5ae.jpg&quot;);"></div></div><div class="cdc-event-card__detail"><div class="cdc-event-card__title" track-click="{&quot;elementId&quot;:4}">云开发个人版 免费体验1个月</div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1606950" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1606950" target="_blank" class="cdc-article-panel-response__title">CMake---优雅的构建C/C++软件项目实践(1)</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">8.4K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1510219" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1510219" target="_blank" class="cdc-article-panel-response__title">CMAKE入门实战</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.5K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2237575" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2237575" target="_blank" class="cdc-article-panel-response__title">QMake 工程 转换为CMake 工程</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1010072" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1010072" target="_blank" class="cdc-article-panel-response__title">CMake学习笔记（二）——CMake语法</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">5.6K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1010068" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1010068" target="_blank" class="cdc-article-panel-response__title">CMake学习笔记（一）——CMake官网教程</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">4.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-2029809" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/2029809" target="_blank" class="cdc-article-panel-response__title">CMakeLists.txt 语法介绍与实例演练</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">2.3K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1661528" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1661528" target="_blank" class="cdc-article-panel-response__title">【CMake教程】（二）CMake 通过CMakeLists.txt自动配置程序版本号</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">3.3K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1338356" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1338356" target="_blank" class="cdc-article-panel-response__title">cmake教程5-macro宏定义以及传递参数给源文件</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">10.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1495137" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1495137" target="_blank" class="cdc-article-panel-response__title">cmake-tutorial cmake入门指引</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">1.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1665639" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1665639" target="_blank" class="cdc-article-panel-response__title">【CMake教程】（四）CMake 配置生成lib或者so的库文件</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">12.6K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1433668" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1433668" target="_blank" class="cdc-article-panel-response__title">git:自动升级源码中版本号,并提交，tag,push的脚本实现</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">3K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1670521" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1670521" target="_blank" class="cdc-article-panel-response__title">CMake入门实战——其他</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">517</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div><div class="cdc-article-panel-response" qct-area="文章-1341049" qct-click="" qct-exposure=""><a href="https://cloud.tencent.com/developer/article/1341049" target="_blank" class="cdc-article-panel-response__title">使用 GitVersion 在编译或持续构建时自动使用语义版本号（Semantic Versioning）</a><div class="cdc-article-panel-response__inner"><div class="cdc-article-panel-response__main"><div class="cdc-article-panel-response__media"></div><div class="cdc-article-panel-response__infos"><div class="cdc-icon__list cdc-article-panel-response__operate"><span class="cdc-icon"><i class="icon-view"></i><span class="cdc-icon__number">2.2K</span></span><span class="cdc-icon"><i class="icon-ask"></i><span class="cdc-icon__number">0</span></span></div></div></div></div></div></div></div></div><div class="cdc-layout__side"><div class="cdc-personal-info2 mod-author"><div class="cdc-personal-info2__inner"><div class="cdc-personal-info2__detail"><div class="cdc-personal-info2__main"><div class="cdc-personal-info2__name"><a href="https://cloud.tencent.com/developer/user/2120676" target="_blank" class="cdc-personal-info2__name-text">码农心语</a>0</div><div class="cdc-personal-info2__level"><div class="cdc-personal-info2__level-number">LV.0</div><div class="cdc-emblems cdc-personal-info2__level-emblems"></div></div><div class="cdc-personal-info2__position"></div></div><div class="cdc-personal-info2__avatar"><span class="cdc-avatar xlarge circle" style="cursor: pointer;"><span class="cdc-avatar__inner" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/2120676/rzl0j09fic.png&quot;);"></span><button class="cdc-btn cdc-avatar__btn cdc-btn--hole"><i class="icon-add"></i>关注</button></span></div></div><div class="cdc-personal-info2__list"><a class="cdc-personal-info2__item" href="https://cloud.tencent.com/developer/user/2120676/articles" target="_blank"><div class="cdc-personal-info2__item-text">文章</div><div class="cdc-personal-info2__item-number">17</div></a><a class="cdc-personal-info2__item" href="https://cloud.tencent.com/developer/user/2120676" target="_blank"><div class="cdc-personal-info2__item-text">获赞</div><div class="cdc-personal-info2__item-number">17</div></a><a href="https://cloud.tencent.com/developer/column/102557" class="cdc-personal-info2__item" target="_blank"><div class="cdc-personal-info2__item-text">专栏</div><div class="cdc-personal-info2__item-number">1</div></a></div><div class="cdc-personal-info2__recommend"><div class="cdc-personal-info2__recommend-hd"><div class="cdc-personal-info2__recommend-title"><i class="icon-choice"></i>作者相关精选</div><div class="cdc-personal-info2__recommend-change">换一批<i class="icon-change"></i></div></div><div class="cdc-personal-info2__recommend-bd"><ul class="cdc-personal-info2__recommend-list"><li><a href="https://cloud.tencent.com/developer/article/2437694" class="cdc-personal-info2__recommend-item" target="_blank"><i class="icon-article"></i><span class="cdc-personal-info2__recommend-text">给基于cmake的工程添加uninstall功能</span></a></li><li><a href="https://cloud.tencent.com/developer/article/2425233" class="cdc-personal-info2__recommend-item" target="_blank"><i class="icon-article"></i><span class="cdc-personal-info2__recommend-text">nginx中的哈夫曼编解码算法[中]-解码</span></a></li><li><a href="https://cloud.tencent.com/developer/article/2418294" class="cdc-personal-info2__recommend-item" target="_blank"><i class="icon-article"></i><span class="cdc-personal-info2__recommend-text">一文读懂H.264 NALU起始码快速搜索算法</span></a></li></ul></div></div></div></div><div class="mod-sticky-act"><div class="cdc-directory is-just-commercial"><div class="cdc-directory__wrap"><div class="cdc-directory__inner"><div class="cdc-directory__hd">目录</div><div class="cdc-directory__bd"><div class="cdc-directory__bd-box"><ul class="cdc-directory__list level-1"><li class="cdc-directory__item is-active"><span class="cdc-directory__target" id="menu-8q3gk">2.1 工程目录规划</span></li><li class="cdc-directory__item"><span class="cdc-directory__target" id="menu-827lv">2.2 c程序文件</span></li></ul></div></div></div></div></div><div class="cdc-commercial-card mod-group-card" track-click="{&quot;areaId&quot;:1002,&quot;objectType&quot;:&quot;ad&quot;}" track-exposure="{&quot;areaId&quot;:1002,&quot;objectType&quot;:&quot;ad&quot;}"><div class="cdc-commercial-card__inner"><img src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/789ec94e-0358-4d12-a5ca-0c7ec3478c14.png" class="cdc-commercial-card__img"></div><div class="cdc-commercial-card__close"></div></div><div id="content-product-container" data-opc-ads-placement-id="10002"><a class="ad-content__HDU cdc-commercial-card " href="https://cloud.tencent.com/act/pro/tdsql-c-sls?ad_trace=d9b7eaf686de4ed5a6d8b50d9ee52706&amp;from=24498&amp;from_column=24498" target="_blank" data-ad-role-click="">
  <img src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/rhino-design-686x194-cb86d921e8ff7b3ea9b7f313b0364cc71444c70.png" class="ad-image__yRE">
  <span class="ad-static-text__mhA">广告</span>
  <span class="ad-close__G5e" data-ad-role-close=""></span>
</a>
</div><div class="cdc-discussion-card"><div class="cdc-discussion-card__inner"><div class="cdc-discussion-card__hd"><div class="cdc-discussion-card__hd-title">加入讨论</div><a href="https://cloud.tencent.com/developer/ask" target="_blank" class="cdc-discussion-card__hd-link"><i class="icon-topic"></i>的问答专区 &gt;</a></div><div class="cdc-discussion-card__detail"><div class="cdc-discussion-card__avatar"><span class="cdc-avatar circle" style="cursor: pointer;"><span class="cdc-avatar__inner" style="background-image: url(&quot;https://developer.qcloudimg.com/http-save/10011/ab4363a10c022768e82858d83b4eee53.jpg&quot;);"></span></span></div><div class="cdc-discussion-card__main"><div class="cdc-discussion-card__name"><a href="https://cloud.tencent.com/developer/user/8235736" target="_blank" class="cdc-discussion-card__name-text">Echo_Wish</a>0</div></div><div class="cdc-discussion-card__btn"><button class="cdc-btn cdc-btn--hole">提问</button></div></div><div class="cdc-discussion-card__recommend"><ul class="cdc-discussion-card__recommend-list"><li class="cdc-discussion-card__recommend-item"><a class="cdc-discussion-card__recommend-topic" href="https://cloud.tencent.com/developer/ask/70088" target="_blank"><i class="icon-discuss"></i><span class="cdc-discussion-card__recommend-text">将所有远程git分支跟踪为本地分支。</span></a></li><li class="cdc-discussion-card__recommend-item"><a class="cdc-discussion-card__recommend-topic" href="https://cloud.tencent.com/developer/ask/27276" target="_blank"><i class="icon-discuss"></i><span class="cdc-discussion-card__recommend-text">git远程分支删除，但仍然出现在“分支-a”？</span></a></li><li class="cdc-discussion-card__recommend-item"><a class="cdc-discussion-card__recommend-topic" href="https://cloud.tencent.com/developer/ask/26459" target="_blank"><i class="icon-discuss"></i><span class="cdc-discussion-card__recommend-text">如何在不同的Git分支中查看文件，而不改变分支？</span></a></li></ul></div></div></div><div class="cdc-free-course-card"><div class="cdc-free-course-card__inner"><div class="cdc-free-course-card__hd"><div class="cdc-free-course-card__hd-title">相关课程</div><a href="https://cloud.tencent.com/developer/learning" class="cdc-free-course-card__hd-link" target="_blank"><i class="icon-topic"></i>一站式学习中心 &gt;</a></div><div class="cdc-free-course-card__detail"><div class="cdc-free-course-card__detail-item"><a href="https://cloud.tencent.com/developer/learning/camp/25" class="cdc-free-course-card__detail-main" target="_blank" track-click="{&quot;areaId&quot;:106017,&quot;positionId&quot;:0,&quot;objectId&quot;:25,&quot;recPolicyId&quot;:1001}" track-exposure="{&quot;areaId&quot;:106017,&quot;positionId&quot;:0,&quot;objectId&quot;:25,&quot;recPolicyId&quot;:1001}"><div class="cdc-free-course-card__detail-icon"><i class="icon-course"></i></div><div class="cdc-free-course-card__detail-info"><div class="cdc-free-course-card__detail-name">AI驱动的TDSQL-Cserverless实战营</div><div class="cdc-free-course-card__detail-num"><i class="icon-join"></i>1390人在学</div></div></a><div class="cdc-tag__list cdc-free-course-card__detail-tags" track-click=""><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/11122" target="_blank">云原生数据库 TDSQL-C</a></div></div></div><div class="cdc-free-course-card__detail-item"><a href="https://cloud.tencent.com/developer/learning/camp/21" class="cdc-free-course-card__detail-main" target="_blank" track-click="{&quot;areaId&quot;:106017,&quot;positionId&quot;:1,&quot;objectId&quot;:21,&quot;recPolicyId&quot;:1001}" track-exposure="{&quot;areaId&quot;:106017,&quot;positionId&quot;:1,&quot;objectId&quot;:21,&quot;recPolicyId&quot;:1001}"><div class="cdc-free-course-card__detail-icon"><i class="icon-course"></i></div><div class="cdc-free-course-card__detail-info"><div class="cdc-free-course-card__detail-name">ES Serverless一站式日志分析入门到精通</div><div class="cdc-free-course-card__detail-num"><i class="icon-join"></i>1116人在学</div></div></a><div class="cdc-tag__list cdc-free-course-card__detail-tags" track-click=""><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/11206" target="_blank">Elasticsearch Service</a></div></div></div><div class="cdc-free-course-card__detail-item"><a href="https://cloud.tencent.com/developer/learning/camp/11" class="cdc-free-course-card__detail-main" target="_blank" track-click="{&quot;areaId&quot;:106017,&quot;positionId&quot;:2,&quot;objectId&quot;:11,&quot;recPolicyId&quot;:1001}" track-exposure="{&quot;areaId&quot;:106017,&quot;positionId&quot;:2,&quot;objectId&quot;:11,&quot;recPolicyId&quot;:1001}"><div class="cdc-free-course-card__detail-icon"><i class="icon-course"></i></div><div class="cdc-free-course-card__detail-info"><div class="cdc-free-course-card__detail-name">微信公众号在线学习平台搭建实践_《硅谷课堂》</div><div class="cdc-free-course-card__detail-num"><i class="icon-join"></i>364人在学</div></div></a><div class="cdc-tag__list cdc-free-course-card__detail-tags" track-click=""><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/10364" target="_blank">文件存储</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/106" target="_blank">云点播</a></div><div class="cdc-tag" track-click="" track-exposure=""><a class="cdc-tag__inner" href="https://cloud.tencent.com/developer/tag/10946" target="_blank">CODING DevOps</a></div></div></div></div></div></div></div></div></div></div></div><div class="cdc-widget-global"><div class="cdc-widget-global__btn announcement"></div><div class="cdc-widget-global__btn code"><div class="cdc-widget-global__btn-tag">领券</div></div><div class="cdc-widget-global__btn top" style="visibility: hidden;"></div></div><div class="cdc-footer"><div class="cdc-footer__inner"><div class="cdc-footer__main"><div class="cdc-footer__website"><ul class="cdc-footer__website-group"><li class="cdc-footer__website-column"><div class="cdc-footer__website-box"><h3 class="cdc-footer__website-title">社区</h3><ul class="cdc-footer__website-list"><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/column">技术文章</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/ask">技术问答</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/salon">技术沙龙</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/video">技术视频</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/learning">学习中心</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/techpedia">技术百科</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/zone/list">技术专区</a></li></ul></div></li><li class="cdc-footer__website-column"><div class="cdc-footer__website-box"><h3 class="cdc-footer__website-title">活动</h3><ul class="cdc-footer__website-list"><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/support-plan">自媒体同步曝光计划</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/support-plan-invitation">邀请作者入驻</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/article/1535830">自荐上首页</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/competition">技术竞赛</a></li></ul></div></li><li class="cdc-footer__website-column"><div class="cdc-footer__website-box"><h3 class="cdc-footer__website-title">资源</h3><ul class="cdc-footer__website-list"><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/specials">技术周刊</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/tags">社区标签</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/developer/devdocs">开发者手册</a></li><li class="cdc-footer__website-item"><a href="https://cloud.tencent.com/lab?from=20064&amp;from_column=20064">开发者实验室</a></li></ul></div></li><li class="cdc-footer__website-column"><div class="cdc-footer__website-box"><h3 class="cdc-footer__website-title">关于</h3><ul class="cdc-footer__website-list"><li class="cdc-footer__website-item"><a rel="nofollow" href="https://cloud.tencent.com/developer/article/1006434">社区规范</a></li><li class="cdc-footer__website-item"><a rel="nofollow" href="https://cloud.tencent.com/developer/article/1006435">免责声明</a></li><li class="cdc-footer__website-item"><a rel="nofollow" href="mailto:cloudcommunity@tencent.com">联系我们</a></li><li class="cdc-footer__website-item"><a rel="nofollow" href="https://cloud.tencent.com/developer/friendlink">友情链接</a></li></ul></div></li></ul></div><div class="cdc-footer__qr"><h3 class="cdc-footer__qr-title">腾讯云开发者</h3><div class="cdc-footer__qr-object"><img src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/a8907230cd5be483497c7e90b061b861.png" class="cdc-footer__qr-image" alt="扫码关注腾讯云开发者"></div><div class="cdc-footer__qr-infos"><p class="cdc-footer__qr-info"><span class="cdc-footer__qr-text">扫码关注腾讯云开发者</span></p><p class="cdc-footer__qr-info"><span class="cdc-footer__qr-text">领取腾讯云代金券</span></p></div></div></div><div class="cdc-footer__recommend"><div class="cdc-footer__recommend-rows"><div class="cdc-footer__recommend-cell"><h3 class="cdc-footer__recommend-title">热门产品</h3><div class="cdc-footer__recommend-wrap"><ul class="cdc-footer__recommend-list"><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://dnspod.cloud.tencent.com/?from=20064&amp;from_column=20064">域名注册</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/cvm?from=20064&amp;from_column=20064">云服务器</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/tbaas?from=20064&amp;from_column=20064">区块链服务</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/mq?from=20064&amp;from_column=20064">消息队列</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/dsa?from=20064&amp;from_column=20064">网络加速</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/tencentdb-catalog?from=20064&amp;from_column=20064">云数据库</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/cns?from=20064&amp;from_column=20064">域名解析</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/cos?from=20064&amp;from_column=20064">云存储</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/css?from=20064&amp;from_column=20064">视频直播</a></li></ul></div></div><div class="cdc-footer__recommend-cell"><h3 class="cdc-footer__recommend-title">热门推荐</h3><div class="cdc-footer__recommend-wrap"><ul class="cdc-footer__recommend-list"><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/facerecognition?from=20064&amp;from_column=20064">人脸识别</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/tm?from=20064&amp;from_column=20064">腾讯会议</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/act/pro/enterprise2019?from=20064&amp;from_column=20064">企业云</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/cdn-scd?from=20064&amp;from_column=20064">CDN加速</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/trtc?from=20064&amp;from_column=20064">视频通话</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/tiia?from=20064&amp;from_column=20064">图像分析</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/cdb?from=20064&amp;from_column=20064">MySQL 数据库</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/symantecssl?from=20064&amp;from_column=20064">SSL 证书</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/asr?from=20064&amp;from_column=20064">语音识别</a></li></ul></div></div><div class="cdc-footer__recommend-cell"><h3 class="cdc-footer__recommend-title">更多推荐</h3><div class="cdc-footer__recommend-wrap"><ul class="cdc-footer__recommend-list"><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/solution/data_protection?from=20064&amp;from_column=20064">数据安全</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/clb?from=20064&amp;from_column=20064">负载均衡</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/sms?from=20064&amp;from_column=20064">短信</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/ocr?from=20064&amp;from_column=20064">文字识别</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/vod?from=20064&amp;from_column=20064">云点播</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://tm.cloud.tencent.com/?from=20064&amp;from_column=20064">商标注册</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/solution/la?from=20064&amp;from_column=20064">小程序开发</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/cat?from=20064&amp;from_column=20064">网站监控</a></li><li class="cdc-footer__recommend-item"><a class="com-2-footer-recommend-link" href="https://cloud.tencent.com/product/cdm?from=20064&amp;from_column=20064">数据迁移</a></li></ul></div></div></div></div><div class="cdc-footer__copyright"><div class="cdc-footer__copyright-text"><p>Copyright © 2013 - 2025 Tencent Cloud. All Rights Reserved. 腾讯云 版权所有&nbsp;</p><p>深圳市腾讯计算机系统有限公司 ICP备案/许可证号：<a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">粤B2-20090059&nbsp;</a><a href="https://www.beian.gov.cn/portal/index.do" target="_blank">深公网安备号 44030502008569</a></p><p>腾讯云计算（北京）有限责任公司 京ICP证150476号 | &nbsp;<a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">京ICP备11018762号</a> | <a href="https://www.beian.gov.cn/portal/index.do" target="_blank">京公网安备号11010802020287</a></p></div></div></div></div><div style="display: none;"><a href="https://cloud.tencent.com/developer/ask/archives.html">问题归档</a><a href="https://cloud.tencent.com/developer/column/archives.html">专栏文章</a><a href="https://cloud.tencent.com/developer/news/archives.html">快讯文章归档</a><a href="https://cloud.tencent.com/developer/information/all.html">关键词归档</a><a href="https://cloud.tencent.com/developer/devdocs/archives.html">开发者手册归档</a><a href="https://cloud.tencent.com/developer/devdocs/sections_p1.html">开发者手册 Section 归档</a></div><div class="cdc-m-footer"><div class="cdc-m-footer__inner"><div class="cdc-m-footer__copyright"><p>Copyright © 2013 - 2025 Tencent Cloud.</p><p>All Rights Reserved. 腾讯云 版权所有</p></div></div></div><div class="cdc-operate-footer"><div class="cdc-operate-footer__inner"><div class="cdc-operate-footer__toggle is-logout"><div class="cdc-operate-footer__toggle-text"><span>登录 </span>后参与评论</div></div><div class="cdc-operate-footer__operations"><div class="cdc-operate-footer__operate"><i class="cdc-operate-footer__operate-icon comment"></i></div><div class="cdc-operate-footer__operate emoji"><div class="emoji-item"><span class="emoji-item-icon update"></span></div><span class="cdc-operate-footer__operate-text">1</span></div><div class="cdc-operate-footer__operate"><i class="cdc-operate-footer__operate-icon book"></i></div><div class="cdc-operate-footer__operate"><i class="cdc-operate-footer__operate-icon menu"></i></div><div class="cdc-operate-footer__operate"><i class="cdc-operate-footer__operate-icon more"></i></div></div></div></div><div class="cdc-suspend-pill"><div class="cdc-suspend-pill__inner"><button class="cdc-icon-btn cdc-suspend-pill__item emoji cdc-icon-btn--text"><div class="emoji-item"><span class="emoji-item-icon like"></span></div><span class="cdc-suspend-pill__item-number">1</span></button><button class="cdc-icon-btn cdc-suspend-pill__item like cdc-icon-btn--text"><span class="cdc-svg-icon-con"><span class="cdc-svg-icon" style="width: 24px; height: 24px;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.5 11.25C17.5 11.9404 16.9404 12.5 16.25 12.5C15.5596 12.5 15 11.9404 15 11.25C15 10.5596 15.5596 10 16.25 10C16.9404 10 17.5 10.5596 17.5 11.25Z M12.25 12.5C12.9404 12.5 13.5 11.9404 13.5 11.25C13.5 10.5596 12.9404 10 12.25 10C11.5596 10 11 10.5596 11 11.25C11 11.9404 11.5596 12.5 12.25 12.5Z M8.25 12.5C8.94036 12.5 9.5 11.9404 9.5 11.25C9.5 10.5596 8.94036 10 8.25 10C7.55964 10 7 10.5596 7 11.25C7 11.9404 7.55964 12.5 8.25 12.5Z M5 3C3.34315 3 2 4.34315 2 6V16C2 17.6569 3.34315 19 5 19H8.34311L10.5858 21.2426C11.3668 22.0237 12.6331 22.0237 13.4142 21.2426L15.6568 19H19C20.6569 19 22 17.6569 22 16V6C22 4.34315 20.6569 3 19 3H5ZM4 6C4 5.44772 4.44772 5 5 5H19C19.5523 5 20 5.44772 20 6V16C20 16.5523 19.5523 17 19 17H14.8284L12 19.8284L9.17154 17H5C4.44772 17 4 16.5523 4 16V6Z"></path></svg></span></span><span class="cdc-suspend-pill__item-number">0</span></button><button class="cdc-icon-btn cdc-suspend-pill__item collect cdc-icon-btn--text" qct-area="收藏文章" qct-click=""><span class="cdc-svg-icon-con"><span class="cdc-svg-icon" style="width: 24px; height: 24px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.2057 3.11487C10.9393 1.62838 13.059 1.62838 13.7927 3.11487L15.9724 7.53141L20.8463 8.23963C22.4867 8.478 23.1418 10.4939 21.9547 11.651L18.4279 15.0888L19.2605 19.9431C19.5407 21.5769 17.8258 22.8228 16.3586 22.0514L11.9992 19.7596L7.63981 22.0514C6.17255 22.8228 4.45769 21.5769 4.73791 19.9431L5.57048 15.0888L2.04366 11.651C0.856629 10.4939 1.51165 8.478 3.15209 8.23963L8.02603 7.53141L10.2057 3.11487ZM11.9992 4L9.8195 8.41654C9.52818 9.00683 8.96504 9.41597 8.31363 9.51062L3.43969 10.2188L6.9665 13.6566C7.43787 14.1161 7.65297 14.7781 7.5417 15.4269L6.70913 20.2812L11.0685 17.9893C11.6512 17.683 12.3472 17.683 12.9299 17.9893L17.2893 20.2812L16.4567 15.4269C16.3454 14.7781 16.5605 14.1161 17.0319 13.6566L20.5587 10.2188L15.6848 9.51062C15.0333 9.41597 14.4702 9.00683 14.1789 8.41654L11.9992 4Z"></path></svg></span></span><span class="cdc-suspend-pill__item-number">0</span></button><button class="cdc-icon-btn cdc-suspend-pill__item cdc-icon-btn--text"><span class="cdc-svg-icon-con"><span class="cdc-svg-icon" style="width: 24px; height: 24px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path d="M13.0001 4V6H17.5859L10.1787 13.4072L11.6043 14.81L19.0001 7.41424V12H21.0001V4H13.0001Z"></path><path d="M3 12.9996C3 8.71646 5.99202 5.13211 10 4.22266V6.28952C7.10851 7.15007 5 9.82862 5 12.9996C5 16.8656 8.13401 19.9996 12 19.9996C15.1709 19.9996 17.8494 17.8912 18.71 14.9999H20.7769C19.8674 19.0077 16.2831 21.9996 12 21.9996C7.02944 21.9996 3 17.9702 3 12.9996Z"></path></svg></span></span></button><button class="cdc-icon-btn cdc-suspend-pill__item cdc-icon-btn--text"><span class="cdc-svg-icon-con"><span class="cdc-svg-icon" style="width: 24px; height: 24px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 6C2 4.34315 3.34315 3 5 3H17C18.6569 3 20 4.34315 20 6V11H18V6C18 5.44772 17.5523 5 17 5H5C4.44772 5 4 5.44772 4 6V18C4 18.5523 4.44772 19 5 19H12V21H5C3.34315 21 2 19.6569 2 18V6ZM6 8H12V10H6V8ZM6 12H15V14H6V12ZM22 16H19V13H17V16H14V18H17V21H19V18H22V16Z"></path></svg></span></span></button><div class="cdc-suspend-pill__line"></div><button class="cdc-icon-btn cdc-suspend-pill__item cdc-icon-btn--text"><span class="cdc-svg-icon-con"><span class="cdc-svg-icon" style="width: 24px; height: 24px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path d="M16.5047 6H13V4H20V10.876H18V7.33313L14.4571 10.876L13.0429 9.46182L16.5047 6Z"></path><path d="M11 6.00006H7.4953L10.9571 9.46189L9.54291 10.8761L6 7.33319V10.8761H4V4.00006H11V6.00006Z"></path><path d="M7.4953 18.8761H11V20.8761H4V14.0001H6V17.543L9.54291 14.0001L10.9571 15.4143L7.4953 18.8761Z"></path><path d="M16.5047 18.8761H13V20.8761H20V14.0001H18V17.543L14.4571 14.0001L13.0429 15.4143L16.5047 18.8761Z"></path></svg></span></span></button><button class="cdc-icon-btn cdc-suspend-pill__item recommend cdc-icon-btn--text" track-click="{&quot;areaId&quot;:106019,&quot;recPolicyId&quot;:1002,&quot;elementId&quot;:2}" track-exposure="{&quot;areaId&quot;:106019,&quot;recPolicyId&quot;:1002,&quot;elementId&quot;:2}"><span class="cdc-svg-icon-con"><span class="cdc-svg-icon" style="width: 24px; height: 24px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path d="M5 8H10V10H5V8Z"></path><path d="M10 12H5V14H10V12Z"></path><path d="M14 8H19V10H14V8Z"></path><path d="M19 12H14V14H19V12Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11 20.608L9.57047 20.1996C8.83303 19.9889 8.05701 19.9506 7.30243 20.0878L4.35777 20.6232C3.13009 20.8464 2 19.9033 2 18.6555V5.2669C2 4.2325 2.78877 3.36877 3.81893 3.27512L6.52892 3.02875C7.95704 2.89892 9.39058 3.21084 10.6356 3.9223L12 4.70194L13.3644 3.9223C14.6094 3.21084 16.043 2.89892 17.4711 3.02875L20.1811 3.27512C21.2112 3.36877 22 4.2325 22 5.2669V18.6555C22 19.9033 20.8699 20.8464 19.6422 20.6232L16.6976 20.0878C15.943 19.9506 15.167 19.9889 14.4295 20.1996L13 20.608L12.5 20.8535L12 20.8937L11.5 20.8535L11 20.608ZM6.70999 5.02054C7.73007 4.9278 8.75403 5.1506 9.64336 5.65879L11 6.43401V18.528L10.1199 18.2765C9.0875 17.9815 8.00107 17.928 6.94466 18.1201L4 18.6555V5.2669L6.70999 5.02054ZM13 18.528L13.8801 18.2765C14.9125 17.9815 15.9989 17.928 17.0553 18.1201L20 18.6555V5.2669L17.29 5.02054C16.2699 4.9278 15.246 5.1506 14.3566 5.65879L13 6.43401V18.528Z"></path></svg></span></span><span class="cdc-suspend-pill__item-text">推荐</span></button></div></div></div></div></div><script>
          if (!String.prototype.replaceAll) {
            String.prototype.replaceAll = function (str, newStr) {
              // If a regex pattern
              if (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {
                return this.replace(str, newStr);
              }
        
              // If a string
              return this.replace(new RegExp(str, 'g'), newStr);
            };
          }
          </script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/jquery.min.js"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/api.aa10538055.js"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/react.16.8.6.min.js"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/TXLivePlayer-1.3.5.min.js" defer="defer"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/hls.min.1.1.7.js"></script><script src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/tcplayer.v5.1.0.min.js"></script><script id="__NEXT_DATA__" type="application/json">{"props":{"isMobile":false,"isSupportWebp":false,"currentDomain":"cloud.tencent.com","baseUrl":"https://cloud.tencent.com","reqId":"PTV_1WyR-wnYjO3XsBidw","query":{"articleId":"2437695"},"platform":"other","env":"production","__N_SSP":true,"pageProps":{"fallback":{"#url:\"/api/article/detail\",params:#articleId:2437695,,":{"articleData":{"articleId":2437695,"codeLineNum":201,"readingTime":233,"wordsNum":1069},"articleInfo":{"articleId":2437695,"channel":4,"commentNum":0,"content":{"blocks":[{"key":"a4jcl","text":"引言","type":"ordered-list-item","depth":0,"inlineStyleRanges":[{"offset":0,"length":2,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"782pi","text":"  在项目构建的时候，我们经常会希望能够将git提交的分支信息和提交号(commitid)以及当前版本发布的tag信息作为版本号自动构建到程序里面，以便后续能够快速定位所运行的程序所定影的git源码的版本，从而快速发现和定位问题。  ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fto52","text":"    本文利用cmake的自动构建能力，来实现以下信息的自动提取并构建到程序中：","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"7im0r","text":"当前代码的git 分支名","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fd5k4","text":"当前代码的git 提交号(commitid)","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"auuf","text":"当前代码的tag所设置的版本号","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"b5192","text":"当前代码的构建时间","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"938u4","text":"当前代码的构建号(buildno)","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"b23bj","text":"  以下以c语言构成为例，展示了利用cmake自动生成config.h文件，从而将以上信息自动集成到c语言工程代码中的过程。","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2rb5o","text":"实现过程","type":"ordered-list-item","depth":0,"inlineStyleRanges":[{"offset":0,"length":4,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"8q3gk","text":"2.1 工程目录规划","type":"header-two","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{"text":"2.1-%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95%E8%A7%84%E5%88%92"}},{"key":"6fl6l","text":"  如下图：","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"8i0qk","text":"\ud83d","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[{"offset":0,"length":1,"key":0}],"data":{}},{"key":"bgaqv","text":"  其中有c语言源码都放在工程根目录下面，当然，对于比较大型的工程，可以对源码目录进行更细地拆分和规划，本demo只有一个test.c和config.h的c源码文件，因此源码目录从简；创建一个cmake目录，用来存放自定义的cmake模块文件；创建一个build目录，用来存放cmake运行所产生的输出文件。","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"827lv","text":"2.2 c程序文件","type":"header-two","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{"text":"2.2-c%E7%A8%8B%E5%BA%8F%E6%96%87%E4%BB%B6"}},{"key":"2j4fi","text":"  test.c 文件的内容如下：","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"3l5a9","text":"#include \u003cstdio.h\u003e\n#include \"config.h\"\n\nint main()\n{\n    printf(\"version: %s\\n\", PROJECT_VERSION);\n    printf(\"commit:  %s\\n\", GIT_COMMITID);\n    printf(\"branch:  %s\\n\", GIT_BRANCH);\n    printf(\"build time: %s\\n\", BUILD_TIME);\n    printf(\"build no: %s\\n\", BUILD_NO);\n    return 0;\n}","type":"code-block","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{"syntax":"javascript"}},{"key":"ekh77","text":"    程序非常简单，无需多言。","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"95pvu","text":"  config.h文件的内容如下：","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"d89tn","text":"#ifndef __CONFIG_H__\n#define __CONFIG_H__\n\n#define PROJECT_VERSION \"0-1-9-alpha\"\n#define GIT_COMMITID    \"51045662cffc38c5cf706090a6f0c3d16311d85e\"\n#define GIT_BRANCH      \"test\"\n#define BUILD_TIME      \"2024-07-10 10:45:29\"\n#define BUILD_NO        \"10\"\n\n#endif","type":"code-block","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{"syntax":"javascript"}},{"key":"52sek","text":"     这个config.h文件是用cmake自动构建出来的，不需要每次手工修改。以下是程序运行的效果：","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"7i425","text":"stone:build$ ./gitversion\n\nversion: 0-1-9-alpha\ncommit:  51045662cffc38c5cf706090a6f0c3d16311d85e\nbranch:  test\nbuild time: 2024-07-10 10:45:29\nbuild no: 10","type":"code-block","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{"syntax":"javascript"}},{"key":"eqfl9","text":"2.3 CMakeLists.txt","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"cerjc","text":"cmake_minimum_required(VERSION 3.5 FATAL_ERROR)\n\nproject(gitversion C)\n\n# 设置自定义模块文件的所在路径\nlist(APPEND CMAKE_MODULE_PATH \"${PROJECT_SOURCE_DIR}/cmake/\")\n\n# 导入自定义模型文件\ninclude(GitVersion)\ninclude(BuildNumber)\n\n# 获取程序的版本信息\nfetch_version_from_git(\"GITVERSION\")\n\n# 获取程序的构建号\nnew_build_number(\"GITVERSION\")\n\nset(GITVERSION_VERSION \"${GITVERSION_VERSION_MAJOR}-${GITVERSION_VERSION_MINOR}-${GITVERSION_VERSION_PATCH}-${GITVERSION_VERSION_STAGE}\")\n\n# 生成程序的构建时间\nstring(TIMESTAMP BUILD_TIME \"%Y-%m-%d %H:%M:%S\")\n\n# 利用config.h.in模板文件自动生成config.h文件\nconfigure_file(\"${PROJECT_SOURCE_DIR}/config.h.in\"\n            \"${PROJECT_SOURCE_DIR}/config.h\" @ONLY)\n\n# 创建构建目标为可执行程序\nadd_executable(${PROJECT_NAME} test.c)","type":"code-block","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{"syntax":"javascript"}},{"key":"1fhrk","text":"2.4 GitVersion.cmake文件","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"4f8l7","text":"# This module defines the following variables utilizing\n# git to determine the parent tag. And if found the macro\n# will attempt to parse them in the github tag format\n#\n# Useful for auto-versioning in our CMakeLists\n#\n#  ${VARPREFIX}_VERSION_MAJOR - Major version.\n#  ${VARPREFIX}_VERSION_MINOR - Minor version\n#  ${VARPREFIX}_VERSION_PATCH - Patch number\n#  ${VARPREFIX}_VERSION_STAGE - Stage version\n#  ${VARPREFIX}_COMMITID      - Git commitid\n#  ${VARPREFIX}_BRANCH        - Git branch\n#\n# Example usage:\n#\n# fetch_version_from_git(\"test\")\n#    message(\"        major=${test_VERSION_MAJOR}\")\n#    message(\"        minor=${test_VERSION_MINOR}\")\n#    message(\"        patch=${test_VERSION_PATCH}\")\n#    message(\"        stage=${test_VERSION_STAGE}\")\n#    message(\"        stage=${test_BRANCH}\")\n\ninclude(FindGit)\n\nmacro(fetch_version_from_git VARPREFIX)\n    # set our defaults.\n    set(${VARPREFIX}_VERSION_MAJOR 1)\n    set(${VARPREFIX}_VERSION_MINOR 0)\n    set(${VARPREFIX}_VERSION_PATCH 0)\n    set(${VARPREFIX}_VERSION_STAGE \"alpha-dev\")\n\n    find_package(Git)\n\n    if (GIT_FOUND)\n        # 获取git的提交号\n        execute_process(\n           COMMAND\n                ${GIT_EXECUTABLE} rev-parse  HEAD\n            WORKING_DIRECTORY\n                ${PROJECT_SOURCE_DIR}\n            RESULT_VARIABLE\n                GITRET\n            OUTPUT_VARIABLE\n                ${VARPREFIX}_COMMITID\n            OUTPUT_STRIP_TRAILING_WHITESPACE\n        )\n\n        if (NOT GITRET EQUAL 0)\n            message(FATAL_ERROR \"Failed to fetch current git commitid.\")\n        endif()\n\n        # 获取git的分支名\n        execute_process(\n           COMMAND\n                ${GIT_EXECUTABLE} rev-parse  --abbrev-ref HEAD\n            WORKING_DIRECTORY\n                ${PROJECT_SOURCE_DIR}\n            RESULT_VARIABLE\n                GITRET\n            OUTPUT_VARIABLE\n                ${VARPREFIX}_BRANCH\n            OUTPUT_STRIP_TRAILING_WHITESPACE\n        )\n\n        if (NOT GITRET EQUAL 0)\n            message(FATAL_ERROR \"Failed to fetch current git branch name.\")\n        endif()\n\n        # 通过git的tag获取工程的版本号\n        execute_process(\n            COMMAND\n                ${GIT_EXECUTABLE} describe --abbrev=0 --always\n            WORKING_DIRECTORY\n                ${PROJECT_SOURCE_DIR}\n            RESULT_VARIABLE\n                GITRET\n            OUTPUT_VARIABLE\n                GITVERSION\n            OUTPUT_STRIP_TRAILING_WHITESPACE\n        )\n\n        # 匹配(.、_、-)，并替换为;  即将字符串分割成字符串列表\n        # 获取到的版本信息如：release-2.2.1-alpha, 总共5段\n        string(REGEX REPLACE \"[\\\\._-]\" \";\" VERSION_LIST \"${GITVERSION}\")\n        if(VERSION_LIST)\n            list(LENGTH VERSION_LIST VERSION_LIST_LENGTH)\n        endif()\n\n        if ((GITRET EQUAL 0) AND (VERSION_LIST_LENGTH EQUAL 5))\n            list(GET VERSION_LIST 1 _MAJOR)\n            list(GET VERSION_LIST 2 _MINOR)\n            list(GET VERSION_LIST 3 _PATCH)\n            list(GET VERSION_LIST 4 _STAGE)\n\n            set(_DEFAULT_VERSION \"${${VARPREFIX}_GIT___VERSION_MAJOR}.${${VARPREFIX}_GIT___VERSION_MINOR}.${${VARPREFIX}_GIT___VERSION_PATCH}-${${VARPREFIX}_GIT___VERSION_STAGE}\")\n            set(_GIT_VERSION     \"${_MAJOR}.${_MINOR}.${_PATCH}-${_STAGE}\")\n\n            if (${_DEFAULT_VERSION} VERSION_LESS ${_GIT_VERSION})\n                set(${VARPREFIX}_VERSION_MAJOR ${_MAJOR})\n                set(${VARPREFIX}_VERSION_MINOR ${_MINOR})\n                set(${VARPREFIX}_VERSION_PATCH ${_PATCH})\n                set(${VARPREFIX}_VERSION_STAGE ${_STAGE})\n            endif()\n        endif()\n    endif()\nendmacro()","type":"code-block","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{"syntax":"javascript"}},{"key":"bt1u5","text":"    以上fetch_version_from_git 宏利用git命令来获取工程的git提交号、分支名、以及版本号。其中版本号是在所打的git tag中获取的，tag名称的格式如下：gitversion-0.1.9-alpha。总共分为3个部分，第一个部分是工程名；第二个部分是版本号，要求格式为主版本号.次版本号.PATCH版本号；第三部分是版本发布阶段，包括rc、alpha、beta、alpha-dev、release、stable等等。 ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"tb8t","text":"    最后获取到的信息放在对应的变量中,其中变量名的前缀由宏的调用者传入，如下：","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"c14o4","text":"  ${VARPREFIX}_VERSION_MAJOR - Major version.\n  ${VARPREFIX}_VERSION_MINOR - Minor version\n  ${VARPREFIX}_VERSION_PATCH - Patch number\n  ${VARPREFIX}_VERSION_STAGE - Stage version\n  ${VARPREFIX}_COMMITID      - Git commitid\n  ${VARPREFIX}_BRANCH        - Git branch","type":"code-block","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{"syntax":"javascript"}},{"key":"p3ns","text":"2.5 BuildNumber.cmake文件","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"u94r","text":"# This module defines the following variables to denote \n# new generated buildno\n#\n#  ${VARPREFIX}_BUILD_NUMBER  - New generated BuildNo\n#\n# If the build_number.txt file does not exist under \n# ${CMAKE_CURRENT_SOURCE_DIR} directory, a new build_number.txt \n# will be created and the build no will be set to 1, otherwise \n# the build no will increment one by one everytime cmake command \n# is executed.\n#\n# Example usage:\n#\n# new_build_number(\"test\")\n#    message(\"        buildno=${test_BUILD_NUMBER}\")\n\nmacro(new_build_number VARPREFIX)\n    if (EXISTS \"${CMAKE_CURRENT_SOURCE_DIR}/build_number.txt\")\n        file(READ \"${CMAKE_CURRENT_SOURCE_DIR}/build_number.txt\" ${VARPREFIX}_BUILD_NUMBER)\n        string(STRIP ${${VARPREFIX}_BUILD_NUMBER} BUILD_NUMBER)\n    else()\n        set(${VARPREFIX}_BUILD_NUMBER  1)\n    endif()\n\n    # 将 build number 加1\n    math(EXPR NEW_BUILD_NUMBER \"${${VARPREFIX}_BUILD_NUMBER} + 1\")\n\n    # 写入新的 build number 到文件\n    file(WRITE \"${CMAKE_CURRENT_SOURCE_DIR}/build_number.txt\" \"${NEW_BUILD_NUMBER}\")\n\nendmacro()\n","type":"code-block","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{"syntax":"javascript"}},{"key":"4qmgu","text":"   以上宏代码会读取build_number.txt文件中的构建号，加1后从新写回build_number.txt中；如果build_number.txt文件不存在，则会创建一个新的build_number.txt,并将构件号设置为1。读取的构建号放在${VARPREFIX}_BUILD_NUMBER中。","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}}],"entityMap":{"0":{"type":"IMAGE","mutability":"IMMUTABLE","data":{"imageUrl":"https://developer.qcloudimg.com/http-save/yehe-2120676/740aba264655a3c417444b73c6660e12.png","imageAlt":"","name":"","blockWidth":536,"blockHeight":604}}}},"createTime":1721446153,"ext":{"closeTextLink":0,"comment_ban":0,"description":"","focusRead":0},"favNum":0,"isOriginal":0,"likeNum":1,"pic":"https://developer.qcloudimg.com/http-save/yehe-2120676/101561a7e07abb43251c90cfc5f115bd.jpg","plain":"引言\n  在项目构建的时候，我们经常会希望能够将git提交的分支信息和提交号(commitid)以及当前版本发布的tag信息作为版本号自动构建到程序里面，以便后续能够快速定位所运行的程序所定影的git源码的版本，从而快速发现和定位问题。  \n    本文利用cmake的自动构建能力，来实现以下信息的自动提取并构建到程序中：\n当前代码的git 分支名\n当前代码的git 提交号(commitid)\n当前代码的tag所设置的版本号\n当前代码的构建时间\n当前代码的构建号(buildno)\n  以下以c语言构成为例，展示了利用cmake自动生成config.h文件，从而将以上信息自动集成到c语言工程代码中的过程。\n实现过程\n2.1 工程目录规划\n  如下图：\n  其中有c语言源码都放在工程根目录下面，当然，对于比较大型的工程，可以对源码目录进行更细地拆分和规划，本demo只有一个test.c和config.h的c源码文件，因此源码目录从简；创建一个cmake目录，用来存放自定义的cmake模块文件；创建一个build目录，用来存放cmake运行所产生的输出文件。\n2.2 c程序文件\n  test.c 文件的内容如下：\n#include \u003cstdio.h\u003e\n#include \"config.h\"\n\nint main()\n{\n    printf(\"version: %s\\n\", PROJECT_VERSION);\n    printf(\"commit:  %s\\n\", GIT_COMMITID);\n    printf(\"branch:  %s\\n\", GIT_BRANCH);\n    printf(\"build time: %s\\n\", BUILD_TIME);\n    printf(\"build no: %s\\n\", BUILD_NO);\n    return 0;\n}\n    程序非常简单，无需多言。\n  config.h文件的内容如下：\n#ifndef __CONFIG_H__\n#define __CONFIG_H__\n\n#define PROJECT_VERSION \"0-1-9-alpha\"\n#define GIT_COMMITID    \"51045662cffc38c5cf706090a6f0c3d16311d85e\"\n#define GIT_BRANCH      \"test\"\n#define BUILD_TIME      \"2024-07-10 10:45:29\"\n#define BUILD_NO        \"10\"\n\n#endif\n     这个config.h文件是用cmake自动构建出来的，不需要每次手工修改。以下是程序运行的效果：\nstone:build$ ./gitversion\n\nversion: 0-1-9-alpha\ncommit:  51045662cffc38c5cf706090a6f0c3d16311d85e\nbranch:  test\nbuild time: 2024-07-10 10:45:29\nbuild no: 10\n2.3 CMakeLists.txt\ncmake_minimum_required(VERSION 3.5 FATAL_ERROR)\n\nproject(gitversion C)\n\n# 设置自定义模块文件的所在路径\nlist(APPEND CMAKE_MODULE_PATH \"${PROJECT_SOURCE_DIR}/cmake/\")\n\n# 导入自定义模型文件\ninclude(GitVersion)\ninclude(BuildNumber)\n\n# 获取程序的版本信息\nfetch_version_from_git(\"GITVERSION\")\n\n# 获取程序的构建号\nnew_build_number(\"GITVERSION\")\n\nset(GITVERSION_VERSION \"${GITVERSION_VERSION_MAJOR}-${GITVERSION_VERSION_MINOR}-${GITVERSION_VERSION_PATCH}-${GITVERSION_VERSION_STAGE}\")\n\n# 生成程序的构建时间\nstring(TIMESTAMP BUILD_TIME \"%Y-%m-%d %H:%M:%S\")\n\n# 利用config.h.in模板文件自动生成config.h文件\nconfigure_file(\"${PROJECT_SOURCE_DIR}/config.h.in\"\n            \"${PROJECT_SOURCE_DIR}/config.h\" @ONLY)\n\n# 创建构建目标为可执行程序\nadd_executable(${PROJECT_NAME} test.c)\n2.4 GitVersion.cmake文件\n# This module defines the following variables utilizing\n# git to determine the parent tag. And if found the macro\n# will attempt to parse them in the github tag format\n#\n# Useful for auto-versioning in our CMakeLists\n#\n#  ${VARPREFIX}_VERSION_MAJOR - Major version.\n#  ${VARPREFIX}_VERSION_MINOR - Minor version\n#  ${VARPREFIX}_VERSION_PATCH - Patch number\n#  ${VARPREFIX}_VERSION_STAGE - Stage version\n#  ${VARPREFIX}_COMMITID      - Git commitid\n#  ${VARPREFIX}_BRANCH        - Git branch\n#\n# Example usage:\n#\n# fetch_version_from_git(\"test\")\n#    message(\"        major=${test_VERSION_MAJOR}\")\n#    message(\"        minor=${test_VERSION_MINOR}\")\n#    message(\"        patch=${test_VERSION_PATCH}\")\n#    message(\"        stage=${test_VERSION_STAGE}\")\n#    message(\"        stage=${test_BRANCH}\")\n\ninclude(FindGit)\n\nmacro(fetch_version_from_git VARPREFIX)\n    # set our defaults.\n    set(${VARPREFIX}_VERSION_MAJOR 1)\n    set(${VARPREFIX}_VERSION_MINOR 0)\n    set(${VARPREFIX}_VERSION_PATCH 0)\n    set(${VARPREFIX}_VERSION_STAGE \"alpha-dev\")\n\n    find_package(Git)\n\n    if (GIT_FOUND)\n        # 获取git的提交号\n        execute_process(\n           COMMAND\n                ${GIT_EXECUTABLE} rev-parse  HEAD\n            WORKING_DIRECTORY\n                ${PROJECT_SOURCE_DIR}\n            RESULT_VARIABLE\n                GITRET\n            OUTPUT_VARIABLE\n                ${VARPREFIX}_COMMITID\n            OUTPUT_STRIP_TRAILING_WHITESPACE\n        )\n\n        if (NOT GITRET EQUAL 0)\n            message(FATAL_ERROR \"Failed to fetch current git commitid.\")\n        endif()\n\n        # 获取git的分支名\n        execute_process(\n           COMMAND\n                ${GIT_EXECUTABLE} rev-parse  --abbrev-ref HEAD\n            WORKING_DIRECTORY\n                ${PROJECT_SOURCE_DIR}\n            RESULT_VARIABLE\n                GITRET\n            OUTPUT_VARIABLE\n                ${VARPREFIX}_BRANCH\n            OUTPUT_STRIP_TRAILING_WHITESPACE\n        )\n\n        if (NOT GITRET EQUAL 0)\n            message(FATAL_ERROR \"Failed to fetch current git branch name.\")\n        endif()\n\n        # 通过git的tag获取工程的版本号\n        execute_process(\n            COMMAND\n                ${GIT_EXECUTABLE} describe --abbrev=0 --always\n            WORKING_DIRECTORY\n                ${PROJECT_SOURCE_DIR}\n            RESULT_VARIABLE\n                GITRET\n            OUTPUT_VARIABLE\n                GITVERSION\n            OUTPUT_STRIP_TRAILING_WHITESPACE\n        )\n\n        # 匹配(.、_、-)，并替换为;  即将字符串分割成字符串列表\n        # 获取到的版本信息如：release-2.2.1-alpha, 总共5段\n        string(REGEX REPLACE \"[\\\\._-]\" \";\" VERSION_LIST \"${GITVERSION}\")\n        if(VERSION_LIST)\n            list(LENGTH VERSION_LIST VERSION_LIST_LENGTH)\n        endif()\n\n        if ((GITRET EQUAL 0) AND (VERSION_LIST_LENGTH EQUAL 5))\n            list(GET VERSION_LIST 1 _MAJOR)\n            list(GET VERSION_LIST 2 _MINOR)\n            list(GET VERSION_LIST 3 _PATCH)\n            list(GET VERSION_LIST 4 _STAGE)\n\n            set(_DEFAULT_VERSION \"${${VARPREFIX}_GIT___VERSION_MAJOR}.${${VARPREFIX}_GIT___VERSION_MINOR}.${${VARPREFIX}_GIT___VERSION_PATCH}-${${VARPREFIX}_GIT___VERSION_STAGE}\")\n            set(_GIT_VERSION     \"${_MAJOR}.${_MINOR}.${_PATCH}-${_STAGE}\")\n\n            if (${_DEFAULT_VERSION} VERSION_LESS ${_GIT_VERSION})\n                set(${VARPREFIX}_VERSION_MAJOR ${_MAJOR})\n                set(${VARPREFIX}_VERSION_MINOR ${_MINOR})\n                set(${VARPREFIX}_VERSION_PATCH ${_PATCH})\n                set(${VARPREFIX}_VERSION_STAGE ${_STAGE})\n            endif()\n        endif()\n    endif()\nendmacro()\n    以上fetch_version_from_git 宏利用git命令来获取工程的git提交号、分支名、以及版本号。其中版本号是在所打的git tag中获取的，tag名称的格式如下：gitversion-0.1.9-alpha。总共分为3个部分，第一个部分是工程名；第二个部分是版本号，要求格式为主版本号.次版本号.PATCH版本号；第三部分是版本发布阶段，包括rc、alpha、beta、alpha-dev、release、stable等等。 \n    最后获取到的信息放在对应的变量中,其中变量名的前缀由宏的调用者传入，如下：\n  ${VARPREFIX}_VERSION_MAJOR - Major version.\n  ${VARPREFIX}_VERSION_MINOR - Minor version\n  ${VARPREFIX}_VERSION_PATCH - Patch number\n  ${VARPREFIX}_VERSION_STAGE - Stage version\n  ${VARPREFIX}_COMMITID      - Git commitid\n  ${VARPREFIX}_BRANCH        - Git branch\n2.5 BuildNumber.cmake文件\n# This module defines the following variables to denote \n# new generated buildno\n#\n#  ${VARPREFIX}_BUILD_NUMBER  - New generated BuildNo\n#\n# If the build_number.txt file does not exist under \n# ${CMAKE_CURRENT_SOURCE_DIR} directory, a new build_number.txt \n# will be created and the build no will be set to 1, otherwise \n# the build no will increment one by one everytime cmake command \n# is executed.\n#\n# Example usage:\n#\n# new_build_number(\"test\")\n#    message(\"        buildno=${test_BUILD_NUMBER}\")\n\nmacro(new_build_number VARPREFIX)\n    if (EXISTS \"${CMAKE_CURRENT_SOURCE_DIR}/build_number.txt\")\n        file(READ \"${CMAKE_CURRENT_SOURCE_DIR}/build_number.txt\" ${VARPREFIX}_BUILD_NUMBER)\n        string(STRIP ${${VARPREFIX}_BUILD_NUMBER} BUILD_NUMBER)\n    else()\n        set(${VARPREFIX}_BUILD_NUMBER  1)\n    endif()\n\n    # 将 build number 加1\n    math(EXPR NEW_BUILD_NUMBER \"${${VARPREFIX}_BUILD_NUMBER} + 1\")\n\n    # 写入新的 build number 到文件\n    file(WRITE \"${CMAKE_CURRENT_SOURCE_DIR}/build_number.txt\" \"${NEW_BUILD_NUMBER}\")\n\nendmacro()\n\n   以上宏代码会读取build_number.txt文件中的构建号，加1后从新写回build_number.txt中；如果build_number.txt文件不存在，则会创建一个新的build_number.txt,并将构件号设置为1。读取的构建号放在${VARPREFIX}_BUILD_NUMBER中。","showReadNum":269,"sourceDetail":null,"sourceType":99,"status":2,"summary":"  在项目构建的时候，我们经常会希望能够将git提交的分支信息和提交号(commitid)以及当前版本发布的tag信息作为版本号自动构建到程序里面，以便后续能够快速定位所运行的程序所定影的git源码的版本，从而快速发现和定位问题。  ","tagIds":[10283,12613,16786,17215,17567],"title":"基于cmake为项目自动获取git分支tag的版本号和commitid","uid":2120676,"updateTime":1721446153,"userSummary":"","userUpdateTime":1721446153,"isNewArticle":false},"authorInfo":{"articleNum":0,"avatarUrl":"https://ask.qcloudimg.com/avatar/2120676/rzl0j09fic.png","company":"","introduce":"","isProfessionVerified":0,"nickname":"码农心语","privilege":1,"title":"","uid":2120676},"authorType":{"isBlogMoveAuthor":0,"isCoCreator":0,"isInternalAuthor":0,"isOriginalAuthor":0},"classify":[{"id":5,"name":"编程语言"},{"id":19,"name":"开发工具"}],"columnInfo":{"columnAvatar":"https://cloudcache.tencent-cloud.com/qcloud/developer/images/release/column-icons/6.png","columnDesc":"","columnId":102557,"columnName":"码农心语","createTime":1712626968,"createUid":2120676,"memberNum":1,"showArticleNum":17,"showConcernNum":13},"columnList":[{"columnAvatar":"https://cloudcache.tencent-cloud.com/qcloud/developer/images/release/column-icons/6.png","columnDesc":"","columnId":102557,"columnName":"码农心语","createTime":1712626968,"createUid":2120676,"memberNum":1,"showArticleNum":17,"showConcernNum":13}],"editTime":0,"isTencent":false,"longtailTags":[],"publishTime":1721446153,"sourceDetail":{"blogType":1,"blogUrl":"","channelSource":"wechat","originalTime":"2024-07-14","sourceAuthor":"码农心语","sourceLink":"https://mp.weixin.qq.com/s?__biz=Mzk0NTY1NzM1OA==\u0026mid=2247483819\u0026idx=1\u0026sn=fa4bcd6caacb1719eef2f13d25967b0e\u0026chksm=c31342caf464cbdce02b700ca6d970be8fb0792f3119823cac4b673d0600bf120437484e6d7b#rd","wechatNickName":"码农心语","wechatUserName":"gh_90c6c66a80e7"},"tags":[{"categoryId":3,"createTime":"2018/05/11 12:33:57","groupId":10133,"groupName":"开发技术","tagId":10283,"tagName":"git"},{"categoryId":99,"createTime":"2023/03/14 11:33:33","groupId":0,"groupName":"","tagId":12613,"tagName":"cmake"},{"categoryId":99,"createTime":"2023/03/14 11:34:46","groupId":0,"groupName":"","tagId":16786,"tagName":"version"},{"categoryId":99,"createTime":"2023/03/14 11:34:54","groupId":0,"groupName":"","tagId":17215,"tagName":"程序"},{"categoryId":99,"createTime":"2023/03/14 11:35:00","groupId":0,"groupName":"","tagId":17567,"tagName":"源码"}],"textLink":[{"ext":{"categoryId":1025,"categoryName":"通用技术 - 运维","desc":"Git是一种分布式版本控制系统，用于管理软件开发过程中的源代码版本。它最初由Linux操作系统的开发者Linus Torvalds在2005年开发，现在已经成为广泛使用的版本控制工具之一。Git通过记录代码的变更历史，可以让开发者轻松地追踪代码的变化、回滚错误的代码、合并不同开发者的代码等。Git是一个开源的软件，可以在多种操作系统上运行，例如Windows、Mac OS X、Linux等。","kpCount":7,"name":"Git","pCategoryId":1002,"termId":1871},"id":3578,"link":"https://cloud.tencent.com/developer/techpedia/1871","sources":[2],"text":"Git"}]},"#url:\"/api/tag/products\",params:#tagIds:@10283,12613,16786,17215,17567,,objectType:1,objectId:2437695,,":[]},"tdk":{"title":"基于cmake为项目自动获取git分支tag的版本号和commitid-腾讯云开发者社区-腾讯云","keywords":"git,cmake,version,程序,源码","description":"  在项目构建的时候，我们经常会希望能够将git提交的分支信息和提交号(commitid)以及当前版本发布的tag信息作为版本号自动构建到程序里面，以便后续能够快速定位所运行的程序所定影的git源码的版本，从而快速发现和定位问题。  "},"meta":{"subject":"通用技术-开发技术-git,其他-空类-cmake,其他-空类-version,其他-空类-程序,其他-空类-源码","subjectTime":"2024-07-20 11:29:13","articleSource":"W","magicSource":"N","authorType":"","productSlug":"none"},"link":{"canonical":"https://cloud.tencent.com/developer/article/2437695"},"cssName":["Article","DraftMaster","Player"],"rbConfigKeys":["groupQRKeywords"],"pvId":"PTV_1WyR-wnYjO3XsBidw","clientIp":"118.193.105.162","globalAnnounce":{"announceId":32,"content":"参加发文瓜分万元礼品池，人人皆有机会抢无人机、键盘与海量鹅厂周边等。点击参加活动：\u003ca href=\"https://cloud.tencent.com/developer/article/2479906\" target=\"_blank\"\u003ehttps://cloud.tencent.com/developer/article/2479906\u003c/a\u003e\u003cbr/\u003e \n \u003cimg src=\"https://qcloudimg.tencent-cloud.cn/raw/413f50f72190b4a96912ce02a7c9cca8.jpg\"/\u003e","title":"21天技术创作挑战赛"},"rbConfig":{"groupQRKeywords":{"AI":{"keywords":[],"img":"https://qcloudimg.tencent-cloud.cn/raw/89b22f53dc3d4e0516d0a4f74ab01a30.png"}},"versionUpdateTipList":"","navList":[{"text":"学习","menuList":[{"iconName":"article","title":"文章","desc":"技术干货聚集地","href":"/developer/column?from=19154"},{"iconName":"ask","title":"问答","desc":"技术问题讨论区","href":"/developer/ask?from=19155"},{"iconName":"video","title":"视频","desc":"技术视频记录区","href":"/developer/video?from=19156"},{"iconName":"learn","title":"学习中心","desc":"一站式学习平台","href":"/developer/learning"},{"iconName":"lab","title":"腾讯云实验室","desc":"体验腾讯云产品功能","href":"/lab/labslist?from=20154\u0026from_column=20154\u0026channel=c1004\u0026sceneCode=dev"}]},{"text":"活动","menuList":[{"iconName":"living","title":"直播","desc":"技术大咖面对面","href":"/developer/salon?from=19161"},{"iconName":"competition","title":"竞赛","desc":"秀出你的技术影响力","href":"/developer/competition?from=19162"}]},{"text":"专区","menuList":[{"iconName":"https://qccommunity.qcloudimg.com/icons/tm-zone.svg","title":"腾讯云架构师技术同盟交流圈","desc":"架构行家智汇，海量一线案例","href":"/developer/zone/tm"},{"iconName":"https://qcloudimg.tencent-cloud.cn/raw/1deae15bfe2dcdd1036f601852df7dd2.svg","title":"腾讯云数据库专区","desc":"数据智能管理专家","href":"/developer/zone/tencentdb"},{"iconName":"cloudnative","title":"腾讯云原生专区","desc":"助力业务降本增效","href":"/developer/zone/cloudnative?from=19164"},{"iconName":"https://qccommunity.qcloudimg.com/icons/tencenthunyuan.svg","title":"腾讯混元专区","desc":"具备强大的中文创作、逻辑推理、任务执行能力","href":"/developer/zone/tencenthunyuan"},{"iconName":"https://qcloudimg.tencent-cloud.cn/raw/1d60f881ef280ea992e2e4b6490d974b.svg","title":"腾讯云TCE专区","desc":"私有化云解决方案","href":"/developer/zone/tce"},{"iconName":"https://qccommunity.qcloudimg.com/community/image/lighthouse.svg","title":"腾讯云Lighthouse专区","desc":"新一代开箱即用、面向轻量应用场景的云服务器","href":"/developer/zone/lighthouse"},{"iconName":"https://qccommunity.qcloudimg.com/community/image/HAi.svg","title":"腾讯云HAI专区","desc":"提供即插即用的高性能云服务","href":"/developer/zone/hai"},{"iconName":"https://cloudcache.tencent-cloud.com/qcloud/ui/static/static_source_business/b3e1b483-be77-4e08-827f-ef0e5cda26cf.svg","title":"腾讯云Edgeone专区","desc":"下一代CDN—EdgeOne，不止加速","href":"/developer/zone/tencentcloudedgeone"},{"iconName":"https://qccommunity.qcloudimg.com/community/image/cos.svg","title":"腾讯云存储专区","desc":"安全稳定的海量分布式存储服务","href":"/developer/zone/cos"},{"iconName":"https://qccommunity.qcloudimg.com/community/image/ai.svg","title":"腾讯云智能专区","desc":"数实融合，云上智能","href":"/developer/zone/ai"},{"iconName":"https://qccommunity.qcloudimg.com/community/image/ipass.svg","title":"腾讯轻联专区 ","desc":"新一代应用与数据集成平台","href":"/developer/zone/ipaas"},{"iconName":"https://qccommunity.qcloudimg.com/image/cloudbase.svg","title":"腾讯云开发专区","desc":"云原生一体化开发平台","href":"/developer/zone/tencentcloudbase"},{"iconName":"https://qccommunity.qcloudimg.com/image/TAPD.svg","title":"TAPD专区","desc":"让协作更敏捷","href":"/developer/zone/tapd"}]},{"text":"工具","menuList":[{"iconName":"https://qccommunity.qcloudimg.com/icons/ai-assistant.svg","title":"腾讯云AI代码助手","desc":"辅助编码工具，使研发提效增质","href":"/product/acc?from=22178"},{"iconName":"coding","title":"CODING DevOps","desc":"一站式软件研发管理平台","href":"/product/coding?from=20154\u0026from_column=20154"},{"iconName":"studio","title":"Cloud Studio","desc":"随时随地在线协作开发","href":"/product/cloudstudio?from=20154\u0026from_column=20154"},{"iconName":"sdk","title":"SDK中心","desc":"开发者语言与SDK","href":"/document/sdk?from=20154\u0026from_column=20154"},{"iconName":"api","title":"API中心","desc":"API 助力快捷使用云产品","href":"/document/api?from=20154\u0026from_column=20154"},{"iconName":"tool","title":"命令行工具","desc":"可快速调用管理云资源","href":"/document/product/440/6176?from=20154\u0026from_column=20154"}]}],"activity-popup":{"mImgUrl":"https://qccommunity.qcloudimg.com/mp/images/11-11mobile.jpg","imgUrl":"https://qccommunity.qcloudimg.com/mp/images/11-11pc.jpg","beginTime":"2024/10/24 00:00:00","endTime":"2024/10/31 23:59:59"},"header-advertisement":{"imageUrl":"https://qccommunity.qcloudimg.com/image/2024-11-01-18-15.png","link":"https://cloud.tencent.com/act/pro/double11-2024?from=22374\u0026from_column=22374#miaosha"}},"isBot":false,"session":{"isLogined":false,"isQCloudLogined":false,"isQCommunityLogined":false,"isDifferentUin":false}}},"page":"/article/[articleId]","query":{"articleId":"2437695"},"buildId":"Gh7-Oubyli-6koWtxSOAe","assetPrefix":"https://qccommunity.qcloudimg.com/community","isFallback":false,"gssp":true,"appGip":true,"scriptLoader":[]}</script><next-route-announcer><p aria-live="assertive" id="__next-route-announcer__" role="alert" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px; white-space: nowrap; overflow-wrap: normal;"></p></next-route-announcer><div id="tea-overlay-root"><div class="tea-overlay cdc-widget-global__bubble tea-transition-scale-738412514-enter-done" style="position: fixed; top: 450px; left: 907px;" data-placement="top-end"><div class="tea-bubble tea-bubble--bottom tea-bubble--end cdc-bubble announcement"><div class="tea-bubble__inner"><div class="cdc-widget-global__bubble-content" style="margin-bottom: 0px;"><div class="close-icon"><span class="cdc-svg-icon-con"><span class="cdc-svg-icon" style="width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.9498 4.46445L9.41425 7.99998L12.9498 11.5355L11.5356 12.9497L8.00004 9.41419L4.46451 12.9497L3.05029 11.5355L6.58583 7.99998L3.05029 4.46445L4.46451 3.05023L8.00004 6.58577L11.5356 3.05023L12.9498 4.46445Z"></path></svg></span></span></div><div class="announcement-inner-text"><a class="cdc-link white blue" href="https://cloud.tencent.com/">查看详情</a><span><span style="font-weight: 600;">【社区公告】</span> 21天技术创作挑战赛</span></div></div></div></div></div></div><iframe height="0" width="0" style="display: none; visibility: hidden;"></iframe><div class="cdc-portal-wrapper"></div><div class="cdc-portal-wrapper"><div class="cdc-modal__wrap"><div class="cdc-modal__mask"></div><div class="cdc-modal cdc-activity-modal"><div class="cdc-modal__inner"><header class="cdc-modal__hd"><i class="cdc-modal__close"></i></header><div class="cdc-activity-modal__body"><img class="cdc-activity-modal__img1" src="%E5%9F%BA%E4%BA%8Ecmake%E4%B8%BA%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96git%E5%88%86%E6%94%AFtag%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E5%92%8Ccommitid-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91_files/20250108-cbd12215.png"><button class="cdc-btn cdc-activity-modal__btn cdc-btn--hole">不再提示</button></div></div></div></div></div></body></html>