!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t="undefined"!=typeof globalThis?globalThis:t||self).ATPlugin=t.ATPlugin||{},t.ATPlugin.Exposure=e())}(this,(function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e={exports:{}};!function(t){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports}(e);var r=t(e.exports),n={exports:{}},o={exports:{}};!function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports}(o);var i={exports:{}};!function(t){t.exports=function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(u){c=!0,o=u}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}},t.exports.__esModule=!0,t.exports.default=t.exports}(i);var a={exports:{}},c={exports:{}};!function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},t.exports.__esModule=!0,t.exports.default=t.exports}(c),function(t){var e=c.exports;t.exports=function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}(a);var u={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}(u),function(t){var e=o.exports,r=i.exports,n=a.exports,c=u.exports;t.exports=function(t,o){return e(t)||r(t,o)||n(t,o)||c()},t.exports.__esModule=!0,t.exports.default=t.exports}(n);var s=t(n.exports),l={exports:{}};!function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}(l);var f=t(l.exports),d={exports:{}};!function(t){function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}(d);var h=t(d.exports),p={exports:{}};!function(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(p);var m=t(p.exports);!function(){if("object"===("undefined"==typeof window?"undefined":m(window)))if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=function(t){for(var e=window.document,r=o(e);r;)r=o(e=r.ownerDocument);return e}(),e=[],r=null,n=null;a.prototype.THROTTLE_TIMEOUT=100,a.prototype.POLL_INTERVAL=null,a.prototype.USE_MUTATION_OBSERVER=!0,a._setupCrossOriginUpdater=function(){return r||(r=function(t,r){n=t&&r?f(t,r):{top:0,bottom:0,left:0,right:0,width:0,height:0},e.forEach((function(t){t._checkForIntersections()}))}),r},a._resetCrossOriginUpdater=function(){r=null,n=null},a.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},a.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._unmonitorIntersections(t.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},a.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},a.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},a.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,r){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==r[e-1]}))},a.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},a.prototype._monitorIntersections=function(e){var r=e.defaultView;if(r&&-1==this._monitoringDocuments.indexOf(e)){var n=this._checkForIntersections,i=null,a=null;if(this.POLL_INTERVAL?i=r.setInterval(n,this.POLL_INTERVAL):(c(r,"resize",n,!0),c(e,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in r&&(a=new r.MutationObserver(n)).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(e),this._monitoringUnsubscribes.push((function(){var t=e.defaultView;t&&(i&&t.clearInterval(i),u(t,"resize",n,!0)),u(e,"scroll",n,!0),a&&a.disconnect()})),e!=(this.root&&(this.root.ownerDocument||this.root)||t)){var s=o(e);s&&this._monitorIntersections(s.ownerDocument)}}},a.prototype._unmonitorIntersections=function(e){var r=this._monitoringDocuments.indexOf(e);if(-1!=r){var n=this.root&&(this.root.ownerDocument||this.root)||t,i=this._observationTargets.some((function(t){var r=t.element.ownerDocument;if(r==e)return!0;for(;r&&r!=n;){var i=o(r);if((r=i&&i.ownerDocument)==e)return!0}return!1}));if(!i){var a=this._monitoringUnsubscribes[r];if(this._monitoringDocuments.splice(r,1),this._monitoringUnsubscribes.splice(r,1),a(),e!=n){var c=o(e);c&&this._unmonitorIntersections(c.ownerDocument)}}}},a.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},a.prototype._checkForIntersections=function(){if(this.root||!r||n){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(n){var o=n.element,a=s(o),c=this._rootContainsTarget(o),u=n.entry,l=t&&c&&this._computeTargetAndRootIntersection(o,a,e),f=null;this._rootContainsTarget(o)?r&&!this.root||(f=e):f={top:0,bottom:0,left:0,right:0,width:0,height:0};var d=n.entry=new i({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:a,rootBounds:f,intersectionRect:l});u?t&&c?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},a.prototype._computeTargetAndRootIntersection=function(e,o,i){if("none"!=window.getComputedStyle(e).display){for(var a,c,u,l,d,p,m,g,v=o,y=h(e),b=!1;!b&&y;){var w=null,_=1==y.nodeType?window.getComputedStyle(y):{};if("none"==_.display)return null;if(y==this.root||9==y.nodeType)if(b=!0,y==this.root||y==t)r&&!this.root?!n||0==n.width&&0==n.height?(y=null,w=null,v=null):w=n:w=i;else{var x=h(y),O=x&&s(x),A=x&&this._computeTargetAndRootIntersection(x,O,i);O&&A?(y=x,w=f(O,A)):(y=null,v=null)}else{var E=y.ownerDocument;y!=E.body&&y!=E.documentElement&&"visible"!=_.overflow&&(w=s(y))}if(w&&(a=w,c=v,u=void 0,l=void 0,d=void 0,p=void 0,m=void 0,g=void 0,u=Math.max(a.top,c.top),l=Math.min(a.bottom,c.bottom),d=Math.max(a.left,c.left),p=Math.min(a.right,c.right),g=l-u,v=(m=p-d)>=0&&g>=0&&{top:u,bottom:l,left:d,right:p,width:m,height:g}||null),!v)break;y=y&&h(y)}return v}},a.prototype._getRootRect=function(){var e;if(this.root&&!p(this.root))e=s(this.root);else{var r=p(this.root)?this.root:t,n=r.documentElement,o=r.body;e={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(e)},a.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,r){return"px"==e.unit?e.value:e.value*(r%2?t.width:t.height)/100})),r={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return r.width=r.right-r.left,r.height=r.bottom-r.top,r},a.prototype._hasCrossedThreshold=function(t,e){var r=t&&t.isIntersecting?t.intersectionRatio||0:-1,n=e.isIntersecting?e.intersectionRatio||0:-1;if(r!==n)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==r||i==n||i<r!=i<n)return!0}},a.prototype._rootIsInDom=function(){return!this.root||d(t,this.root)},a.prototype._rootContainsTarget=function(e){var r=this.root&&(this.root.ownerDocument||this.root)||t;return d(r,e)&&(!this.root||r==e.ownerDocument)},a.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},a.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=a,window.IntersectionObserverEntry=i}function o(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch(e){return null}}function i(t){this.time=t.time,this.target=t.target,this.rootBounds=l(t.rootBounds),this.boundingClientRect=l(t.boundingClientRect),this.intersectionRect=l(t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,r=e.width*e.height,n=this.intersectionRect;this.intersectionRatio=r?Number((n.width*n.height/r).toFixed(4)):this.isIntersecting?1:0}function a(t,e){var r,n,o,i=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType&&9!=i.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(r=this._checkForIntersections.bind(this),n=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){r(),o=null}),n))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function c(t,e,r,n){"function"==typeof t.addEventListener?t.addEventListener(e,r,n||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,r)}function u(t,e,r,n){"function"==typeof t.removeEventListener?t.removeEventListener(e,r,n||!1):"function"==typeof t.detachEvent&&t.detachEvent("on"+e,r)}function s(t){var e;try{e=t.getBoundingClientRect()}catch(r){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function f(t,e){var r=e.top-t.top,n=e.left-t.left;return{top:r,left:n,height:e.height,width:e.width,bottom:r+e.height,right:n+e.width}}function d(t,e){for(var r=e;r;){if(r==t)return!0;r=h(r)}return!1}function h(e){var r=e.parentNode;return 9==e.nodeType&&e!=t?o(e):(r&&r.assignedSlot&&(r=r.assignedSlot.parentNode),r&&11==r.nodeType&&r.host?r.host:r)}function p(t){return t&&9===t.nodeType}}();var g,v,y,b,w={useText:[".ant-btn",'[role="menuitem"]',".ant-cascader-menu-item",".ant-checkbox-wrapper",".ant-radio-wrapper",".ant-radio-button-wrapper",".ant-select-item",".ant-tabs-tab"]},_={useText:[".adm-tabs-tab",".adm-selector-item",".adm-button",".adm-dropdown-item",".adm-capsule-tabs-tab",".adm-checkbox"]},x={useText:[".el-button",".el-checkbox-button",".el-menu-item",".el-radio-button",".el-select-dropdown__item",".el-tabs__item",".el-cascader-node",".el-select-dropdown__item"]},O={useText:[".omui-button",".omui-radio",".omui-checkbox",".omui-dropdown__item",".omui-tab__label",".omui-select__item",".omui-suggestion__option"],useAttribute:{ignore:["_nk"]}},A={useText:[".t-button",".t-menu__item",".t-checkbox",".t-radio",".t-radio-button",".t-select-option",".t-anchor__item",".t-dropdown__item",".t-breadcrumb__item",".t-tabs__nav-item",".t-tree__item",".t-drawer__header",".t-popconfirm__inner"]},E={omui:{click:{autoSelector:[".omui-button",".omui-radio",".omui-input__inner",".omui-checkbox",".omui-dropdown__trigger",".omui-dropdown__item",".omui-tab__label",".omui-textarea",".omui-datepicker-input",".omui-icon-clear-reverse",".omui-thumb",".omui-select__input",".omui-select__item",".omui-swiper",".omui-suggestion__control",".omui-suggestion__option",".omui-upload-normal-trigger",".omui-upload-image-trigger",".omui-upload-container-wrap"],autoStrategy:O},area:{autoSelector:[".omui-panel",".omui-form__group",".omui-table-table",".omui-tooltip__content"],autoStrategy:O}},antd:{click:{autoSelector:['[role="menuitem"]',".ant-cascader-menu-item",".ant-checkbox-wrapper",".ant-radio-wrapper",".ant-radio-button-wrapper",".ant-select",".ant-select-item",'[role="button"]',".ant-tabs-tab"],autoStrategy:w},area:{autoSelector:[".ant-card",".ant-list",".ant-table",".ant-tabs-tabpane",'[role="tooltip"]','[role="dialog"]',".ant-notification-notice",".ant-form-item"],autoStrategy:w}},element:{click:{autoSelector:[".el-radio",".el-input",".el-checkbox",".el-input-number",".el-cascader",".el-dropdown",".el-tabs__item",".el-textarea",".el-date-editor",".el-switch",".el-select",".el-slider__button",".el-upload",".el-radio-button",".el-icon",".el-button",".el-slider",".el-checkbox-button",".el-color-picker",".el-select-v2",".el-avatar",".el-calendar",".el-carousel__item",".el-image",".el-tree-node",".el-backtop",".el-menu-item",".el-tabs__item",".el-select-dropdown__item"],autoStrategy:x},area:{autoSelector:[".el-tabs",".el-table",".el-form",".el-card",".el-descriptions",".el-timeline",".el-dialog"],autoStrategy:x}},antdm:{click:{autoSelector:[".adm-input",".adm-button",".adm-checkbox",".adm-cascader",".adm-picker",".adm-radio",".adm-switch",".adm-image-uploader",".adm-tabs-tab",".adm-tab-bar",".adm-dropdown-item",".adm-selector-item",".adm-text-area",".adm-calendar-cell",".adm-action-sheet-button-item-wrapper",".adm-capsule-tabs-tab",".adm-list-item"],autoStrategy:_},area:{autoSelector:[".adm-card",".adm-tabs",".adm-form",".adm-list",".adm-picker-body",".adm-popup-body"],autoStrategy:_}},tdesign:{click:{autoSelector:[".t-button",".t-menu__item",".t-input",".t-checkbox",".t-radio",".t-radio-button",".t-select",".t-select-option",".t-anchor__item",".t-dropdown__item",".t-breadcrumb__item",".t-tabs__nav-item",".t-tabs__btn",".t-date-picker__cell",".t-switch",".t-textarea",".t-tree__item",".t-swiper__arrow-left",".t-swiper__arrow-right",".t-icon-close",".t-icon-browse",".t-icon-add",".t-icon-delete"],autoStrategy:A},area:{autoSelector:[".t-table",".t-form",".t-steps",".t-list",".t-tooltip",".t-tab-panel",".t-cascader__panel",".t-date-picker__panel",".t-tree",".t-select__dropdown",".t-transfer",".t-time-picker__panel",".t-swiper__content",".t-alert",".t-dialog",".t-drawer__content-wrapper",".t-message",".t-popconfirm"],autoStrategy:A}}};!function(t){t.INITIAL="INITIAL",t.BEACON_OA="BEACON_OA",t.BEACON_CLOUD="BEACON_CLOUD"}(g||(g={}));var S=["id","class","length","style","width","height","fill","viewBox","target","dt-remark",/at-inspector/,/-checked/,/^aria-/,"disabled"],j={uid:"A1",atversion:"A300",system:"A301",browser:"A302",pathname:"A303",urlfrom:"A304",pagefrom:"A305",query:"A306",hostname:"A307",title:"A308",viewportWidth:"A309",viewportHeight:"A310",eid:"A311",text:"A312",queryDom:"A313",queryPath:"A314",domIndex:"A315",remark:"A316",isExit:"A317",staytime:"A318",scrollY:"A319",attributes:"A320",classnames:"A321",coordinate:"A322",spider:"A323",beacon_trigger_x:"A332",beacon_trigger_y:"A333"},k=(r(v={},g.BEACON_OA,j),r(v,g.BEACON_CLOUD,j),v),I="_init",T=(r(y={click:"at_click",show_area:"at_show_area",show_page:"at_imp",stay_page:"at_stay_page",stay_area:"at_stay_area",scroll_page:"at_scroll_page"},"click".concat(I),"at_click".concat(I)),r(y,"show_area".concat(I),"at_show_area".concat(I)),r(y,"show_page".concat(I),"at_imp".concat(I)),r(y,"stay_page".concat(I),"at_stay_page".concat(I)),r(y,"stay_area".concat(I),"at_stay_area".concat(I)),r(y,"scroll_page".concat(I),"at_scroll_page".concat(I)),y),C={ASYNC_EVENT_SFFIX:I,REPORT_PARAMS_MAP:k,REPORT_EVENT_MAP:(r(b={},g.BEACON_OA,T),r(b,g.BEACON_CLOUD,T),b)},D=function(t){return(t||"").split("").reduce((function(t,e){return e.charCodeAt(0)+(t<<6)+(t<<16)-t}),0)},P={throttle:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=Date.now();return function(){for(var i=this,a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];clearTimeout(e);var s=function(){o=Date.now(),e=null,t.apply(i,c)};(r=Date.now()-o)>n?s():e=setTimeout(s,n-r)}},debounce:function(t,e){var r;return function(){for(var n=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];r&&clearTimeout(r),r=setTimeout((function(){t.apply(n,i),r=null}),e)}},copyToClipboard:function(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},hashcode:D,getEid:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return String(D(e?"".concat(t,"~~").concat(e):t))},formatText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.replace(/[\r\n]/g,"").replace(/\s/g,"").slice(0,20)},mergeArrays:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Array.isArray(t)?t:t([]),n=Array.isArray(e)?r.concat(e):e(r);return Array.from(new Set(n))},getStayTime:function(t,e){return t<=e?t:e},strOrRegMatchFunc:function(t,e){return t instanceof RegExp?t.test(e):t===e}};function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N=function(){var t,e=navigator.userAgent,r=(null===(t=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===t?void 0:t.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||"unknown",n=e.indexOf("Android")>-1||e.indexOf("Adr")>-1,o=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i=["Win32","Windows"].includes(r),a=["Mac68K","MacPPC","Macintosh","MacIntel","macOS"].includes(r),c=String(r).indexOf("Linux")>-1;return n?"1":o?"2":i?"3":a?"4":c?"5":"100"},L=function(){var t=navigator.userAgent.match(/NetType\/(\w+)/),e="";if(t&&t.length>1){e=s(t,2)[1]}else{var r=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{},n=r.effectiveType,o=r.type;e=(void 0===n?"":n)||(void 0===o?"":o)}var i={wifi:"1","2g":"2","3g":"3","4g":"4","5g":"5","6g":"6"};return e&&i[e]?i[e]:"100"},U=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,n=window.ATInfo,o=n.uid,i=void 0===o?"":o,a=n.sdkVersion,c=void 0===a?"":a,u=R({id:"VbBIPNcGnBRAvRvYXE",uin:i||"_0",version:c,aid:U(),env:location.port?"local":"production",sessionId:"session-".concat(Date.now()),from:encodeURIComponent(location.href),platform:N(),netType:L(),vp:"".concat(e," * ").concat(r),sr:"".concat(screen.width," * ").concat(screen.height),referer:encodeURIComponent(document.referrer)},t),s="";return Object.keys(u).forEach((function(t,e){s+="".concat(0===e?"":"&").concat(t,"=").concat(u[t])})),s},F=function(t){var e=t.bodyData,r=void 0===e?"":e,n=t.queries,o=t.url,i=t.method,a=void 0===i?"post":i;fetch("".concat(void 0===o?"https://aegis.qq.com/collect":o,"?").concat(n),R({method:a,headers:{"content-type":"application/json"}},r?{body:r}:{})).catch((function(t){console.log(t)}))},V={reportError:function(t,e){console.warn(t,null==e?void 0:e.message);var r=JSON.stringify({level:[4],count:1,msg:[String(null==e?void 0:e.stack)]}),n=window.ATInfo.appkey,o=void 0===n?"":n,i=B({ext1:encodeURIComponent(t),ext2:o});F({bodyData:r,queries:i})},customReport:function(t,e){console.info(t);var r=JSON.stringify({level:[8192],count:1,msg:[t]}),n=localStorage.getItem("__BEACON_deviceId")||"",o=window.ATInfo.appkey,i=B({name:t,ext1:void 0===o?"":o,ext2:e.openType,ext3:n});F({bodyData:r,queries:i})}};function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var K=V.reportError,W=function(t,e){var r=Element.prototype,n=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;return!!n&&n.call(t,e)},z=function(t){return/^[a-zA-Z]+$/.test(t)},X=function(t){var e=t.name,r=t.value,n=t.transformAttributeKey,o={};if("function"==typeof n){var i=n(e);i&&(o[i]=r)}else o[e]=r;return o},Y=function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":m(HTMLElement))?t instanceof HTMLElement:!!t&&"object"===m(t)&&1===t.nodeType&&"string"==typeof t.nodeName},J={isNull:function(t){return"null"===Object.prototype.toString.call(t).replace(/\[object[\s]/,"").replace("]","").toLowerCase()},elementMatches:W,getClosest:function(t,e){if(!e)return null;if(Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(W(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}),Array.isArray(e)){var r=null;return e.find((function(e){var n=t.closest(e);return null!==n&&(r=n),!!n})),r}return t.closest(e)},getDataFromAttrKey:function(t,e){var r="",n=t.findIndex((function(t){var n,o=null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,e);return o&&(r=o),o}));return{parentList:-1===n?[]:t.slice(0,n+1),attrValue:r}},getVisibleEventAttr:function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.document;return void 0!==r.hidden?(t="hidden",e="visibilitychange"):void 0!==r.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==r.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),{hidden:t,visibilityChange:e}},getTagAndOtherSelector:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],r=[];return t.forEach((function(t){z(t)?e.push(t):r.push(t)})),{tagSelectors:e,otherSelectors:r}},getQuerySelectorAll:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=[];if(!t||!e)return r;try{r=Array.prototype.slice.call(e.querySelectorAll(t))}catch(n){K("getQuerySelectorAll error",n),r=[]}return r},getAttributesParams:function(t,e){var r={};return e.forEach((function(e){var n="",o={};if("string"==typeof e||e instanceof RegExp)n=e;else if((null==e?void 0:e.length)>0){var i=s(e,2);n=i[0],o=i[1]}if(n){var a=null==o?void 0:o.transformAttributeKey;if(n instanceof RegExp){var c,u=$(t.attributes);try{for(u.s();!(c=u.n()).done;){var l=c.value,f=l.name,d=l.value;n.test(f)&&(r=H(H({},r),X({name:f,value:d,transformAttributeKey:a})))}}catch(p){u.e(p)}finally{u.f()}}else{var h=t.getAttribute(n);h&&(r=H(H({},r),X({name:n,value:h,transformAttributeKey:a})))}}})),r},getCoords:function(t){if(t){var e=t.getBoundingClientRect(),r=document.body,n=document.documentElement,o=window.pageYOffset||n.scrollTop||r.scrollTop,i=window.pageXOffset||n.scrollLeft||r.scrollLeft,a=e.left+i-(n.clientLeft||r.clientLeft||0);return{top:Math.round(e.top+o-(n.clientTop||r.clientTop||0)),left:Math.round(a)}}return{top:0,left:0}},isElement:Y,getParents:function(t){for(var e=[],r=t;Y(r);)e.push(r),r=r.parentNode;return e}},G={exports:{}},Z={exports:{}};!function(t){var e=c.exports;t.exports=function(t){if(Array.isArray(t))return e(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(Z);var tt={exports:{}};!function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(tt);var et={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}(et),function(t){var e=Z.exports,r=tt.exports,n=a.exports,o=et.exports;t.exports=function(t){return e(t)||r(t)||n(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports}(G);var rt=t(G.exports),nt={},ot=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())}))},it="%[a-f0-9]{2}",at=new RegExp(it,"gi"),ct=new RegExp("("+it+")+","gi");function ut(t,e){try{return decodeURIComponent(t.join(""))}catch(o){}if(1===t.length)return t;var r=t.slice(0,e=e||1),n=t.slice(e);return Array.prototype.concat.call([],ut(r),ut(n))}function st(t){try{return decodeURIComponent(t)}catch(n){for(var e=t.match(at),r=1;r<e.length;r++)e=(t=ut(e,r).join("")).match(at);return t}}var lt=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+m(t)+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var r={"%FE%FF":"��","%FF%FE":"��"},n=ct.exec(t);n;){try{r[n[0]]=decodeURIComponent(n[0])}catch(e){var o=st(n[0]);o!==n[0]&&(r[n[0]]=o)}n=ct.exec(t)}r["%C2"]="�";for(var i=Object.keys(r),a=0;a<i.length;a++){var c=i[a];t=t.replace(new RegExp(c,"g"),r[c])}return t}(t)}},ft=function(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];var r=t.indexOf(e);return-1===r?[t]:[t.slice(0,r),t.slice(r+e.length)]},dt=function(t,e){for(var r={},n=Object.keys(t),o=Array.isArray(e),i=0;i<n.length;i++){var a=n[i],c=t[a];(o?-1!==e.indexOf(a):e(a,c,t))&&(r[a]=c)}return r};function ht(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return pt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(t){var e=ot,r=lt,n=ft,o=dt;function i(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(t,r){return r.encode?r.strict?e(t):encodeURIComponent(t):t}function c(t,e){return e.decode?r(t):t}function u(t){return Array.isArray(t)?t.sort():"object"===m(t)?u(Object.keys(t)).sort((function(t,e){return Number(t)-Number(e)})).map((function(e){return t[e]})):t}function l(t){var e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function f(t){var e=(t=l(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function d(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function h(t,e){i((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);var r=function(t){var e;switch(t.arrayFormat){case"index":return function(t,r,n){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return function(t,r,n){e=/(\[\])$/.exec(t),n[t=t.replace(/\[\]$/,"")]=e?void 0!==n[t]?[].concat(n[t],r):[r]:r};case"comma":case"separator":return function(e,r,n){var o="string"==typeof r&&r.includes(t.arrayFormatSeparator),i="string"==typeof r&&!o&&c(r,t).includes(t.arrayFormatSeparator);r=i?c(r,t):r;var a=o||i?r.split(t.arrayFormatSeparator).map((function(e){return c(e,t)})):null===r?r:c(r,t);n[e]=a};default:return function(t,e,r){r[t]=void 0!==r[t]?[].concat(r[t],e):e}}}(e),o=Object.create(null);if("string"!=typeof t)return o;if(!(t=t.trim().replace(/^[?#&]/,"")))return o;var a,l=ht(t.split("&"));try{for(l.s();!(a=l.n()).done;){var f=a.value;if(""!==f){var h=n(e.decode?f.replace(/\+/g," "):f,"="),p=s(h,2),g=p[0],v=p[1];v=void 0===v?null:["comma","separator"].includes(e.arrayFormat)?v:c(v,e),r(c(g,e),v,o)}}}catch(E){l.e(E)}finally{l.f()}for(var y=0,b=Object.keys(o);y<b.length;y++){var w=b[y],_=o[w];if("object"===m(_)&&null!==_)for(var x=0,O=Object.keys(_);x<O.length;x++){var A=O[x];_[A]=d(_[A],e)}else o[w]=d(_,e)}return!1===e.sort?o:(!0===e.sort?Object.keys(o).sort():Object.keys(o).sort(e.sort)).reduce((function(t,e){var r=o[e];return t[e]=Boolean(r)&&"object"===m(r)&&!Array.isArray(r)?u(r):r,t}),Object.create(null))}t.extract=f,t.parse=h,t.stringify=function(t,e){if(!t)return"";i((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);for(var r=function(r){return e.skipNull&&null==t[r]||e.skipEmptyString&&""===t[r]},n=function(t){switch(t.arrayFormat){case"index":return function(e){return function(r,n){var o=r.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:[].concat(rt(r),null===n?[[a(e,t),"[",o,"]"].join("")]:[[a(e,t),"[",a(o,t),"]=",a(n,t)].join("")])}};case"bracket":return function(e){return function(r,n){return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:[].concat(rt(r),null===n?[[a(e,t),"[]"].join("")]:[[a(e,t),"[]=",a(n,t)].join("")])}};case"comma":case"separator":return function(e){return function(r,n){return null==n||0===n.length?r:0===r.length?[[a(e,t),"=",a(n,t)].join("")]:[[r,a(n,t)].join(t.arrayFormatSeparator)]}};default:return function(e){return function(r,n){return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:[].concat(rt(r),null===n?[a(e,t)]:[[a(e,t),"=",a(n,t)].join("")])}}}}(e),o={},c=0,u=Object.keys(t);c<u.length;c++){var s=u[c];r(s)||(o[s]=t[s])}var l=Object.keys(o);return!1!==e.sort&&l.sort(e.sort),l.map((function(r){var o=t[r];return void 0===o?"":null===o?a(r,e):Array.isArray(o)?o.reduce(n(r),[]).join("&"):a(r,e)+"="+a(o,e)})).filter((function(t){return t.length>0})).join("&")},t.parseUrl=function(t,e){e=Object.assign({decode:!0},e);var r=n(t,"#"),o=s(r,2),i=o[1];return Object.assign({url:o[0].split("?")[0]||"",query:h(f(t),e)},e&&e.parseFragmentIdentifier&&i?{fragmentIdentifier:c(i,e)}:{})},t.stringifyUrl=function(e,r){r=Object.assign({encode:!0,strict:!0},r);var n=l(e.url).split("?")[0]||"",o=t.extract(e.url),i=t.parse(o,{sort:!1}),c=Object.assign(i,e.query),u=t.stringify(c,r);u&&(u="?".concat(u));var s=function(t){var e="",r=t.indexOf("#");return-1!==r&&(e=t.slice(r)),e}(e.url);return e.fragmentIdentifier&&(s="#".concat(a(e.fragmentIdentifier,r))),"".concat(n).concat(u).concat(s)},t.pick=function(e,r,n){n=Object.assign({parseFragmentIdentifier:!0},n);var i=t.parseUrl(e,n),a=i.fragmentIdentifier;return t.stringifyUrl({url:i.url,query:o(i.query,r),fragmentIdentifier:a},n)},t.exclude=function(e,r,n){var o=Array.isArray(r)?function(t){return!r.includes(t)}:function(t,e){return!r(t,e)};return t.pick(e,o,n)}}(nt);var vt=V.reportError,yt=function(t,e){return Object.keys(t).reduce((function(r,n){return r["".concat(e).concat(n.toLowerCase())]=t[n]||"",r}),{})},bt=function(t){return t&&t.length>=2&&"#/"===t.substring(0,2)},wt={getQueryAndParams:function(t,e,r,n){try{var o={};t&&(o=gt(gt({},o),nt.parse(t))),n.forEach((function(t){Object.prototype.hasOwnProperty.call(o,t)&&delete o[t]}));var i=yt(o,"qr_"),a=yt(e,"pr_"),c=yt(r,"rx_");return{queryObj:o,routerParams:gt(gt(gt({},i),a),c)}}catch(u){return vt("getQueryAndParams error",u),{}}},getRouteParams:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var r={};return t.find((function(t){var n=t(e);return n&&(r=n.params),n})),r}catch(n){return vt("getRouteParams error",n),{}}},extendEvent:function(t){var e=window.history[t];return function(){var r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,window.dispatchEvent(n),r}},splitHashAndQuery:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location;try{var e=t.hostname,r=t.hash,n=t.search,o=t.pathname,i=void 0===o?"":o,a=r.indexOf("?"),c=bt(r),u={hostname:e,pathname:"".concat(i).concat(c?r:""),search:n};if(-1===a)return u;var s=r.substring(a);return s="?"===s?"":s,u.pathname="".concat(i).concat(c?r.substring(0,a):""),u.search=n&&"?"!==n?"".concat(n).concat(s?"&".concat(s.substring(1)):""):s,u}catch(l){return vt("splitHashAndQuery error",l),{hostname:"",pathname:"",search:""}}},isHashRouteChange:function(t,e){return t!==e&&(bt(t)||bt(e))},isQueryChange:function(t,e){var r=nt.parse(t),n=nt.parse(e),o=Object.keys(r),i=Object.keys(n);if(o.length!==i.length)return!0;for(var a=0,c=o;a<c.length;a++){var u=c[a];if(!i.includes(u))return!0;if(r[u]!==n[u])return!0}return!1}},_t=P.strOrRegMatchFunc,xt=function(t){return t>=128||45===t||95===t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122},Ot=function(t){var e=String(t),r=e.length,n="",o=e.charCodeAt(0);if(1===r&&45===o)return"\\".concat(e);for(var i=0;i<r;i++){var a=e.charCodeAt(i);0!==a?a>=1&&a<=31||127===a||0===i&&a>=48&&a<=57||1===i&&a>=48&&a<=57&&45===o?n+="\\".concat(a.toString(16)," "):xt(a)?(n+=e.charAt(i),i+=1):n+="\\".concat(e.charAt(i)):n+="�"}return n},At=function(t){return t.replace(/("|\n)/g,(CSS.escape||Ot)("$1"))},Et=function(t,e){var r=e.ignore,n=e.match;return rt(t.attributes).reduce((function(t,e){var o=e.nodeName,i=e.value;return n.find((function(t){return _t(t,o)}))&&!r.find((function(t){return _t(t,o)}))&&t.push("[".concat(o,'="').concat(At(i),'"]')),t}),[])},St=P.strOrRegMatchFunc,jt=function(t,e){var r=function(t,e){var r=e.ignore,n=e.match;if(!t.hasAttribute("class"))return[];var o=[];try{o=Array.prototype.slice.call(t.classList)}catch(i){o=t.getAttribute("class").trim().replace(/\s+/g," ").split(" ")}return o.filter((function(t){return/^[a-z_-][a-z\d_-]*$/i.test(t)&&n.find((function(e){return St(e,t)}))&&!r.find((function(e){return St(e,t)}))}))}(t,e).filter(Boolean);return r.map((function(t){return".".concat(t)}))},kt=function t(e,r,n,o,i,a,c){if(a!==c)for(var u=o;u<=i&&i-u+1>=c-a;++u)n[a]=r[u],t(e,r,n,u+1,i,a+1,c);else e.push(n.slice(0,a).join(""))},It=function(t){var e=t.getAttribute("id");return null!==e&&""!==e?e.match(/(?:^\d|:|\.|%|#|\/)/)?'[id="'.concat(e,'"]'):"#".concat(e):null},Tt=J.isElement,Ct=function(t){var e=t.parentNode;if(Boolean(e)){var r=Array.prototype.slice.call(e.children).findIndex((function(e){return Tt(e)&&e===t}));if(r>-1)return":nth-child(".concat(r+1,")")}return null},Dt=J.getQuerySelectorAll,Pt=function(t,e){if(!Boolean(e))return!1;var r=Dt(e,t.ownerDocument);return 1===r.length&&r[0]===t};function Mt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Nt=J.getQuerySelectorAll,Lt=V.reportError,Ut=function(t,e){var r=t.parentNode;if(!r)return!0;var n=Nt(e,r);return 1===n.length&&n[0]===t},Bt=function(t,e){return e.find((function(e){return Ut(t,e)}))},Ft=function(t,e,r){var n=function(t,e){for(var r=[],n=t.length,o=[],i=1;i<=e;++i)kt(r,t,o,0,n-1,0,i);return r}(e,3),o=Bt(t,n);return Boolean(o)||Boolean(r)&&(n=n.map((function(t){return r+t})),o=Bt(t,n),Boolean(o))?o:null},Vt=function(t,e,r){var n,o,i=r.useAttribute,a=r.useClass,c=null===(n=t.tagName)||void 0===n?void 0:n.toLowerCase().replace(/:/g,"\\:"),u=Mt(e);try{for(u.s();!(o=u.n()).done;){switch(o.value){case"ID":var s=It(t);if(Boolean(s)&&Ut(t,s))return s;break;case"Attributes":var l=Et(t,i);if(Boolean(l)&&l.length){var f=Ft(t,l,c);if(f)return f}break;case"Class":var d=jt(t,a);if(Boolean(d)&&d.length){var h=Ft(t,d,c);if(h)return h}break;case"Tag":if(Boolean(c)&&Ut(t,c))return c;break;case"NthChild":var p=Ct(t);if(Boolean(p))return p}}}catch(m){u.e(m)}finally{u.f()}return"*"},qt={common:P,route:wt,domElement:J,unique:{getUniqueSelector:function(t,e){try{var r,n=s(t,1)[0],o=e.useAttribute,i=e.useClass,a=[e.useId&&"ID",o.match.length>0&&"Attributes",i.match.length>0&&"Class","Tag","NthChild"].filter((function(t){return!!t})),c=[],u=Mt(t);try{for(u.s();!(r=u.n()).done;){var l=Vt(r.value,a,{useAttribute:o,useClass:i});if(Boolean(l)){c.unshift(l);var f=c.join(" > ");if(Pt(n,f))return f}}}catch(d){u.e(d)}finally{u.f()}return null}catch(h){return Lt("getUniqueSelector error",h),null}},SELECTOR_LINK:" > "},tamReport:V,constant:C},Ht=qt.domElement,$t=qt.tamReport.reportError,Qt=Ht.getQuerySelectorAll,Kt=Ht.elementMatches,Wt=1e-4,zt=function(){function t(e){var r=e.selectors,n=void 0===r?[]:r,o=e.onEnterView,i=e.onLeaveView,a=e.showAreaThreshold,c=void 0===a?Wt:a;f(this,t);try{IntersectionObserver.prototype.THROTTLE_TIMEOUT=300}catch(u){console.log(u)}this.selectors=n,this.selectorsUnion=n.join(","),this.threshold=c>Wt&&c<=1?[Wt,c]:[Wt],this.intersectionInstance=null,this.mutationInstance=null,this.init({onEnterView:o,onLeaveView:i})}return h(t,[{key:"addObserveSelector",value:function(t){var e=this;if(t&&this.selectors.includes(t)){this.selectors.push(t),this.selectorsUnion=this.selectors.join(",");var r=Qt(t);r.length>0&&r.forEach((function(t){var r;t&&(null===(r=e.intersectionInstance)||void 0===r||r.observe(t))}))}}},{key:"unobserveTarget",value:function(t){var e;null===(e=this.intersectionInstance)||void 0===e||e.unobserve(t)}},{key:"disconnect",value:function(){var t,e;null===(t=this.intersectionInstance)||void 0===t||t.disconnect(),null===(e=this.mutationInstance)||void 0===e||e.disconnect()}},{key:"mutationChange",value:function(t,e){var r,n;try{var o=t;if(1===o.nodeType){if(null===(n=null===(r=null==o?void 0:o.className)||void 0===r?void 0:r.match)||void 0===n?void 0:n.call(r,/at-inspector/))return;this.selectors.find((function(t){return Kt(o,t)}))&&e(o);var i=Qt(this.selectorsUnion,o);i.length>0&&i.forEach((function(t){t&&e(t)}))}}catch(a){$t("domobserver mutationChange error",a)}}},{key:"init",value:function(t){var e=this,r=t.onEnterView,n=t.onLeaveView;this.intersectionInstance=new IntersectionObserver((function(t){try{null==t||t.forEach((function(t){var o=t.isIntersecting,i=t.target;o&&t.intersectionRatio>e.threshold[e.threshold.length-1]&&r(i),o||n(i)}))}catch(o){$t("domobserver IntersectionObserver error",o)}}),{root:null,rootMargin:"0px",threshold:this.threshold}),this.mutationInstance=new MutationObserver((function(t){try{null==t||t.forEach((function(t){var r,o;null===(r=t.addedNodes)||void 0===r||r.forEach((function(t){e.mutationChange(t,(function(t){var r;return null===(r=e.intersectionInstance)||void 0===r?void 0:r.observe(t)}))})),null===(o=t.removedNodes)||void 0===o||o.forEach((function(t){e.mutationChange(t,(function(t){var r;n(t),null===(r=e.intersectionInstance)||void 0===r||r.unobserve(t)}))}))}))}catch(r){$t("domobserver MutationObserver error",r)}})),document.body?(this.mutationInstance.observe(document.body,{childList:!0,subtree:!0}),this.mutationChange(document.body,(function(t){var r;return null===(r=e.intersectionInstance)||void 0===r?void 0:r.observe(t)}))):console.warn("请在页面加载后初始化autoTracker")}}]),t}(),Xt={exports:{}},Yt={exports:{}};!function(t){t.exports=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)e.indexOf(r=i[n])>=0||(o[r]=t[r]);return o},t.exports.__esModule=!0,t.exports.default=t.exports}(Yt),function(t){var e=Yt.exports;t.exports=function(t,r){if(null==t)return{};var n,o,i=e(t,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)r.indexOf(n=a[o])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i},t.exports.__esModule=!0,t.exports.default=t.exports}(Xt);var Jt=t(Xt.exports),Gt=["useText"];function Zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ee=qt.domElement,re=qt.common,ne=qt.unique,oe=qt.tamReport.reportError,ie=ee.getCoords,ae=ee.getQuerySelectorAll,ce=ee.getTagAndOtherSelector,ue=ee.elementMatches,se=re.getEid,le=re.formatText,fe=re.strOrRegMatchFunc,de=ne.getUniqueSelector,he=ne.SELECTOR_LINK,pe=function(t){return!t.includes(">")&&!t.includes(",")&&!function(t){var e=[" ",">","~","+","|",","];return!!t.split("").find((function(r,n){return n>0&&n<t.length&&" "===r&&!e.includes(t[n-1])&&!e.includes(t[n+1])}))}(t)},me=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=0,o="";if(!(null==t?void 0:t.length))return{domIndex:n,queryPath:o};var i="",a=[],c=e.findIndex((function(e){return i=t.find((function(t){var r=-1,o=-1!==(r=pe(t)?ae(t,e.parentNode).findIndex((function(t){return t===e})):ae(t).findIndex((function(t){return t===e})));return o&&(n=r+1),o})),a.unshift(i||e.tagName.toLowerCase()),!!i}));if(i){var u=pe(i);if(u){var s=de(e.slice(c+1,e.length),r);s&&(o=[s].concat(a).join(he))}else o=a.join(he)}return{domIndex:n,queryPath:o}},ge=function(t,e){var r=s(t,1)[0],n=r.className,o=r.attributes,i=le(r.innerText),a=ie(r),c={};Array.prototype.slice.call(o).filter((function(t){var e=t.nodeName,r=t.value;return!S.find((function(t){return fe(t,e)}))&&r})).forEach((function(t){c[t.nodeName]=t.value}));var u=JSON.stringify(c),l=e.autoStrategy,f=ce(e.list),d=f.tagSelectors,h=void 0===d?[]:d,p=f.otherSelectors,m=me(void 0===p?[]:p,t,l),g=m.queryPath?m:me(h,t,l);return te({text:i,classnames:n,attributes:"{}"===u?"":u,coordinate:"".concat(a.top,",").concat(a.left)},g)},ve={getTargetBasicInfo:ge,readElement:function(t,e){var r=ge(t,e),n=function(t,e,r){var n=s(t,1)[0],o=r.useText,i=Jt(r,Gt);if(o.length>0&&e){var a=o.find((function(t){return ue(n,t)}));if(a){var c=ae(a);if(1===c.length)return{queryDom:a,eid:se(a)};if(!c.find((function(t){return t!==n&&le(t.innerText)===e})))return{queryDom:a,eid:se(a,e)}}}var u=de(t,i);return{queryDom:u,eid:se(u||"")}}(t,r.text,e.autoStrategy),o=n.queryDom,i=n.eid;return o?te(te({},r),{},{queryDom:o,eid:i}):null},getElementsFromData:function(t){var e=t.trackData,r=t.trackConfig;if(!r||!e)return[];try{var n=e.eid;if(!e.queryDom){var o="[".concat(r.keyAttribute,"='").concat(n,"']");return ae(o)}var i=function(t){var e=t.trackData,r=e.queryDom,n=e.eid,o=e.text,i=ae(r);if(0===i.length)return null;if(se(r)===n)return 1===i.length?i[0]:null;if(se(r,o)===n){var a=i.filter((function(t){return le(t.innerText)===o}));return 1===a.length?a[0]:null}return null}({trackData:e});return i?[i]:[]}catch(a){return oe("getElementsFromData error",a),[]}}},ye=["useText","useAttribute","useClass"],be=["autoSelector","list","autoStrategy","extraAttributes"],we=["useText","useAttribute","useClass"],_e=["autoSelector","list","autoStrategy","extraAttributes"];function xe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ae=ve.readElement,Ee=ve.getTargetBasicInfo,Se=qt.domElement,je=qt.tamReport.reportError,ke=Se.getDataFromAttrKey,Ie=Se.getTagAndOtherSelector,Te=Se.getAttributesParams,Ce=Se.getParents,De=Se.isElement,Pe=Se.elementMatches,Me=qt.common.mergeArrays,Re=function(t,e){if(!(null==t?void 0:t.length))return[];var r=e.findIndex((function(e){return Pe(e,t.join(","))}));return-1===r?[]:e.slice(r,e.length)},Ne=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match,n=t.ignore,o=e.match,i=e.ignore;return{match:Me(r,o),ignore:Me(n,i)}},Le=function(t,e){try{var r=t.autoSelector,n=t.list,o=t.autoStrategy,i=(o=void 0===o?{}:o).useText,a=o.useAttribute,c=o.useClass,u=Jt(o,ye),s=t.extraAttributes,l=Jt(t,be),f=e.autoSelector,d=e.list,h=e.autoStrategy,p=(h=void 0===h?{}:h).useText,m=h.useAttribute,g=h.useClass,v=Jt(h,we),y=e.extraAttributes,b=Jt(e,_e);return Oe(Oe(Oe({},l),b),{},{autoSelector:Me(r,f),list:Me(n,d),autoStrategy:Oe(Oe(Oe({},u),v),{},{useText:Me(i,p),useAttribute:Ne(a,m),useClass:Ne(c,g)}),extraAttributes:Me(s,y)})}catch(w){return je("mergeTrackConfigs error",w),t}},Ue=["name","for","role","type"],Be=["a","button","input","textarea"],Fe=["li","tr"],Ve=[/-active$/,/-selected$/,/-checked$/,/-disabled$/,/^is--/,/-is-/],qe={domObserver:zt,element:ve,track:{getInitTrackConfig:function(t,e){var r=(Array.isArray(t)?t:[t]).reduce((function(t,r){return Le(E[r][e?"click":"area"],t)}),function(t){return Oe({autoSelector:t?Be:[],keyAttribute:t?"dt-eid":"dt-areaid",list:Fe,autoStrategy:{useId:!0,useAttribute:{match:Ue,ignore:S},useClass:{match:[/.*/],ignore:Ve}},extraAttributes:[["dt-remark",{transformAttributeKey:function(t){return t.replace(/^dt-/,"")}}]],autoMode:!0},t?{}:{areaDelay:1e3,areaThreshold:.5,trackStayarea:!1,repeated:!0})}(e));return r},mergeCustomConfig:function(t,e){var r,n,o,i,a=Le(t,e),c="[".concat(a.keyAttribute,"]");(null===(n=null===(r=a.autoSelector)||void 0===r?void 0:r.includes)||void 0===n?void 0:n.call(r,c))||null===(o=a.autoSelector)||void 0===o||o.push(c);var u="[".concat(t.keyAttribute,"]"),s=a.autoSelector.findIndex((function(t){return t===u}));s>-1&&u!==c&&(null===(i=a.autoSelector)||void 0===i||i.splice(s,1));var l="[".concat(a.keyAttribute,"]");return!1===a.autoMode&&(a.autoSelector=[l]),a},trackClickDom:function(t,e){var r;try{var n=t.target;if(!n)return null;var o=t instanceof MouseEvent?null===(r=t.composedPath)||void 0===r?void 0:r.call(t).filter((function(t){return De(t)})):Ce(n),i=e.autoSelector,a=e.extraAttributes,c=ke(o,e.keyAttribute),u=c.parentList,l=c.attrValue;if(l){var f=s(u,1)[0];return Oe(Oe(Oe({},Te(f,a)),Ee(u,e)),{},{realTarget:f,eid:l})}if(i.length>1){var d=Ie(i),h=d.tagSelectors,p=void 0===h?[]:h,m=d.otherSelectors,g=Re(void 0===m?[]:m,o),v=g.length>0?g:Re(p,o);if(v.length>0){var y=s(v,1)[0],b=Ae(v,e);return b?Oe(Oe(Oe({},Te(y,a)),b),{},{realTarget:y}):null}}return null}catch(w){return je("trackClickDom error",w),null}},trackExposeDom:function(t,e){try{var r=e.keyAttribute,n=e.extraAttributes;if(!t||!Pe(t,e.autoSelector.join(",")))return null;var o=Ce(t),i=t.getAttribute(r)||"",a=Te(t,n);if(i)return Oe(Oe(Oe({},a),Ee(o,e)),{},{eid:i});var c=Ae(o,e);return c?Oe(Oe({},a),c):null}catch(u){return je("trackExposeDom error",u),null}}}};function He(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?He(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qe=qe.track,Ke=Qe.trackExposeDom,We=Qe.mergeCustomConfig,ze=Qe.getInitTrackConfig,Xe=qe.domObserver,Ye=qt.tamReport.reportError,Je=qt.common.getStayTime,Ge=(0,qt.domElement.getVisibleEventAttr)(),Ze=Ge.visibilityChange,tr=Ge.hidden,er=function(){function t(){f(this,t),this.pluginName="Exposure"}return h(t,[{key:"setConfig",value:function(t){this.areaConfig=We(this.areaConfig,t),window.CustomEvent&&window.dispatchEvent(new CustomEvent("at-areaconfig-change",{detail:{value:this.areaConfig}}))}},{key:"getConfig",value:function(){return this.areaConfig}},{key:"init",value:function(t,e){var r=t.uselib,n=t.maxStaytime;this.dtReport=t.dtReport,this.maxStaytime=n,this.uselib=r,this.targetDataArr=[],this.hiddenMoment=0,this.showMoment=0,this.areaConfig=ze(r,!1),this.setConfig(e),this.handleVisibility=this.pageVisiblityChange.bind(this),this.handlePage=this.handlePageChange.bind(this),this.handleEventListener()}},{key:"remove",value:function(){this.removeData(!0),window.removeEventListener(Ze,this.handleVisibility),window.removeEventListener("at-router-change",this.handlePage)}},{key:"stop",value:function(){this.remove()}},{key:"reStart",value:function(){this.handleEventListener()}},{key:"handleEventListener",value:function(){this.newObserver(),window.addEventListener(Ze,this.handleVisibility),window.addEventListener("at-router-change",this.handlePage)}},{key:"newObserver",value:function(){var t=this;this.observerInstance=new Xe({selectors:this.areaConfig.autoSelector,showAreaThreshold:this.areaConfig.areaThreshold,onEnterView:function(e){return t.onEnterView(e)},onLeaveView:function(e){return t.onLeaveView(e)}})}},{key:"handlePageChange",value:function(){this.removeData(),this.newObserver()}},{key:"removeData",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=this.observerInstance)||void 0===t||t.disconnect();for(var r=this.targetDataArr.length,n=0;n<r;n++)this.reportStay({index:n,needBeacon:e,needDelete:!1});this.targetDataArr=[]}},{key:"getNow",value:function(){return(new Date).getTime()}},{key:"pageVisiblityChange",value:function(){var t=this,e=tr?document[tr]:null,r=this.getNow();try{Object.entries(this.targetDataArr).forEach((function(n){var o=s(n,2),i=o[0],a=o[1].hiddenTime,c=void 0===a?0:a;e?(t.hiddenMoment=r,t.showMoment=0):t.hiddenMoment&&(c=c+r-t.hiddenMoment,t.showMoment=r),t.targetDataArr[i].hiddenTime=c}))}catch(n){Ye("expose pageVisiblityChange error",n)}}},{key:"onEnterView",value:function(t){var e=this;if(!this.targetDataArr.find((function(e){return e.target===t}))){var r={target:t,enterMoment:this.getNow(),routeInfo:$e({},window.ATInfo.reportRouterinfo)};r.timer=window.setTimeout((function(){try{if(r.timer){var n=Ke(t,e.areaConfig);n&&(r.areaParam=n,e.dtReport("show_area",n,"onUserAction",r.target)),window.clearTimeout(r.timer),delete r.timer}}catch(o){Ye("expose onEnterView error",o)}}),this.areaConfig.areaDelay),this.targetDataArr.push(r)}}},{key:"onLeaveView",value:function(t){var e=this.targetDataArr.findIndex((function(e){return e.target===t}));e>-1&&this.reportStay({index:e})}},{key:"reportStay",value:function(t){var e,r=t.index,n=t.needBeacon,o=void 0!==n&&n,i=t.needDelete,a=void 0===i||i;try{var c=this.targetDataArr[r],u=c.target,s=c.enterMoment,l=c.hiddenTime,f=void 0===l?0:l,d=c.areaParam,h=c.timer,p=c.routeInfo,m=this.getNow();if(h)return window.clearTimeout(h),void(a&&this.targetDataArr.splice(r,1));var g=f;!this.showMoment&&this.hiddenMoment&&(g=f+m-this.hiddenMoment),this.areaConfig.trackStayarea&&this.dtReport("stay_area",$e($e({staytime:Je(m-s-g,this.maxStaytime)},d),p),o?"onSendBeacon":"onUserAction",u),a&&this.targetDataArr.splice(r,1),this.areaConfig.repeated||null===(e=this.observerInstance)||void 0===e||e.unobserveTarget(u)}catch(v){Ye("expose reportStay error",v)}}}]),t}();return new er}));
