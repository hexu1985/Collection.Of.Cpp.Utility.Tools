(function(_ds){var window=this;var fda=function(){return(0,_ds.U)('<span class="devsite-var-input-wrapper"><button class="material-icons devsite-icon-close" tabindex="-1"></button></span>')},gda=function(){return(0,_ds.U)('<input class="devsite-var-input" type="text" translate="no" spellcheck="false">')},hda=function(a){return(0,_ds.U)('<span class="devsite-var-wrapper"><var spellcheck="false" is-upgraded>'+_ds.V(a.placeholder)+"</var></span>")},ida=function(){return(0,_ds.U)('<button class="material-icons devsite-icon-edit" tabindex="-1"></button>')};var G8=function(){return"devsite-var"},jda=async function(a){a.o=a.innerText;var b=a.getAttribute("label");b||(a.setAttribute("label",a.o),b=a.o);a.qa=b;b=_ds.lk(a,"devsite-code");a:{if(a.classList.contains("no-scope"))a.removeAttribute("scope");else if(!a.hasAttribute("scope")&&b){var c=!0;break a}c=!1}c&&a.setAttribute("scope",a.o);b&&(await customElements.whenDefined("devsite-code"),await b.whenReady());_ds.N(a,hda,{placeholder:a.innerText});a.j=a.querySelector("var");(c=a.getAttribute("scope"))&&
(c=await a.storage.get(G8(),c))&&a.j&&(a.j.innerText=c);if(H8(a,b)){b=_ds.O(ida);_ds.Uj(a.j,b,1);b=a.querySelector(".devsite-var-wrapper");a.v=_ds.O(fda);_ds.Uj(b,a.v,0);a.h=_ds.O(gda);a.setAttribute("tabindex","0");let d;null==(d=a.j)||d.setAttribute("data-title",`${"\u4fee\u6539"} ${a.qa}`);let e;null==(e=a.j)||e.setAttribute("aria-label",`${"\u4fee\u6539"} ${a.qa}`)}a.removeAttribute("label")},H8=function(a,b){if(a.classList.contains("edit"))return!0;if(b){const c=b.querySelector("pre");return!b.hasAttribute("no-copy")&&
!(null==c?0:c.classList.contains("readonly"))&&!a.classList.contains("readonly")}return!1},mda=function(a){a.eventHandler.listen(a,"focusin",()=>{a.hasAttribute("active")||(a.setAttribute("active",""),_ds.Uj(a.v,a.h,0),a.h&&(a.h.value=a.innerText,a.h.select()),a.setAttribute("tabindex","-1"))});a.h&&(a.eventHandler.listen(a.h,"focusout",()=>{a.removeAttribute("active");a.v&&a.h&&a.v.removeChild(a.h);a.setAttribute("tabindex","0")}),a.eventHandler.listen(a.h,"change",b=>{kda(a,b.target.value);lda(a)}));
a.eventHandler.listen(a,"keydown",b=>{if(13===b.keyCode||27===b.keyCode){let c;null==(c=a.h)||c.blur()}});a.eventHandler.listen(a,"input",b=>{if(!a.oa){if(a.hasAttribute("scope")){var c=a.getAttribute("scope");a.ea=[...document.querySelectorAll(`devsite-var[${"scope"}="${c}"]`)]}else a.ea=[a];a.dispatchEvent(new CustomEvent("devsite-analytics-observation",{detail:{category:"Site-Wide Custom Events",action:"New Placeholder Edited",label:a.o,value:a.ea.length},bubbles:!0}));c={eventData:JSON.stringify({name:"New Placeholder Edited".replace(/\s/g,
""),type:"editablePlaceholderVariable",metadata:{"var":a.o,varsInScope:a.ea.length}})};a.dispatchEvent(new CustomEvent("devsite-analytics-observation-cloudtrack",{detail:c,bubbles:!0}));a.oa=!0}b=b.target.value;for(const d of a.ea)d.setAttribute("value",b)})},kda=async function(a,b){const c=a.getAttribute("scope");c&&await a.storage.set(G8(),c,b)},lda=async function(a){nda(a);if(a.ma){const b=new _ds.Ne;let c;null==(c=a.j)||c.setAttribute("aria-label","\u5f53\u524d\u4f1a\u8bdd\u7684\u53d8\u91cf\u5df2\u66f4\u65b0");
_ds.Dm(a.eventHandler,a.ma,"transitionend",()=>{b.g()});await b.promise;_ds.Dm(a.eventHandler,a.ma,"transitionend",()=>{let d;null==(d=a.j)||d.setAttribute("aria-label",`${"\u4fee\u6539"} ${a.qa}`)})}},nda=function(a){var b="\u5f53\u524d\u4f1a\u8bdd\u7684\u53d8\u91cf\u5df2\u66f4\u65b0";a.dispatchEvent(new CustomEvent("devsite-show-custom-snackbar-msg",{detail:{msg:b,showClose:!1},bubbles:!0}))},I8=class extends _ds.F{constructor(){super(["devsite-code","devsite-snackbar"]);this.eventHandler=new _ds.H(this);
this.oa=!1;this.qa=this.o="";this.ma=this.h=this.v=this.j=null;this.storage=new _ds.wI;this.ea=[]}static get observedAttributes(){return["value"]}async connectedCallback(){if(!this.hasAttribute("ready")){this.setAttribute("ready","");var a=this.querySelector("var");if(a)for(const b of a.attributes)this.setAttribute(b.name,b.value);await jda(this)}a=_ds.lk(this,"devsite-code");H8(this,a)&&mda(this);this.ma=document.querySelector("devsite-snackbar")}attributeChangedCallback(a,b,c){a=this.querySelector("var");
(null==a?0:a.lastElementChild)?(b=a.lastElementChild,a.innerText=c?c:"",a.appendChild(b)):a&&(a.innerText=c?c:"")}disconnectedCallback(){_ds.I(this.eventHandler)}};I8.prototype.disconnectedCallback=I8.prototype.disconnectedCallback;I8.prototype.attributeChangedCallback=I8.prototype.attributeChangedCallback;I8.prototype.connectedCallback=I8.prototype.connectedCallback;I8.getTagName=G8;try{customElements.define(G8(),I8)}catch(a){console.warn("devsite.app.CustomElement.DevsiteVar",a)};})(_ds_www);
