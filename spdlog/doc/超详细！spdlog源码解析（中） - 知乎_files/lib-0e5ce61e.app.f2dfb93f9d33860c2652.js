"use strict";(self.webpackChunkheifetz=self.webpackChunkheifetz||[]).push([[887],{64099:function(e,t,n){n.d(t,{$f:function(){return tE},As:function(){return tP},BU:function(){return t4},EN:function(){return tS},Ho:function(){return ne},RK:function(){return t$},RP:function(){return tJ},S_:function(){return tZ},TS:function(){return e8},Zd:function(){return nt},cx:function(){return e6},pE:function(){return t6},rI:function(){return tq}});var o,r,a=n(9338),i=n(22107),c=n(94707),l=n(87320),s=n(55164),d=n(57477),u=n(71728),f=n(94009),h=n(79065),m=n(49899),p=n(30971),g=n(85879),k=n(87363),v=n(88329),C=n.n(v),A=n(69383);n(75570);var b=n(63638),y=n(65733),x=n(38151),w=n(91850),L=n(17103),_=n(83537),B=n(14168),z=n.n(B),Z=n(67814),I=n.n(Z),S=n(41402),R=n(37831),T=n(92769),N=n.n(T),G=n(88423),E=n(74135),P=n(76073),M=n.n(P),D=n(7629),W=n(78842),K=n(2016),U=n(93406),X=n(67753),H=n(72746),V=n(31714),j=n(8424),q=n(7459),F=n(79794),O=n(13962),Q=n(41550),Y=n(60006),J=n(30722),$=n(88642),ee=n(11612),et=n.n(ee),en=n(23579),eo=n(80565),er=n(53845),ea=n(74351),ei=n(18837),ec=n.n(ei),el=n(20072),es=n(61533),ed=n(4667),eu=n.n(ed),ef=n(32193),eh=n(54231),em=n(57045),ep=n(51940);function eg(){var e=(0,h._)(["\n   from { opacity: 0; }\n   to { opacity: 1; }\n"]);return eg=function(){return e},e}var ek=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach(function(t){"function"==typeof t?t(e):t&&(t.current=e)})}};function ev(e){var t=this;return e.length?function(n,o){for(var r=e.length-1,a=n;r>=0;)a=e[r].call(t,a,o),r--;return a}:C()}var eC=function(e){var t=function(e){if(0!==e.intersectionRatio){var t=e.target;t.dataset.zaDetailViewId=t.cardShowViewId,A.Z.trackCardShow(t,{},{link:{url:t.href}}),n.unobserve(t),t.clickViewId&&(t.dataset.zaDetailViewId=t.clickViewId)}},n=new IntersectionObserver(function(e){e.forEach(t)},{threshold:[.1]});return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'},{cardShowViewId:7692,selector:"a.FileLinkCard .FileLinkCard-info"},{cardShowViewId:9744,selector:".Catalog"}].forEach(function(t){var o=t.selector,r=t.cardShowViewId,a=t.clickViewId;Array.from(e.querySelectorAll(o)).forEach(function(e){e.cardShowViewId=r,e.clickViewId=a,n.observe(e)})}),function(){n.disconnect()}},eA="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},eb=function(e){var t=(0,k.useRef)(null);(0,k.useEffect)(function(){if(e)return eA(function(){e&&(t.current=eC(e))}),function(){t.current&&t.current()}},[e])},ey=function(e){return{elementLocation:{type:"Button",content:{type:e.dataset.zaContentType}}}},ex=function(e){return{attachedInfoBytes:e.dataset.zaAttachInfo}},ew=[{selector:"a.external, a.internal",zaBlock:"ZTextLink"},{selector:"a.member_mention, a.UserLink-link, a.ztext-mention-hook",zaBlock:"ZTextMention"},{selector:"a.video-box",zaBlock:"ZTextVideoCard"},{selector:'a.LinkCard.old[data-draft-type="link-card"]',zaBlock:"ZTextLinkCard"},{selector:'a.LinkCard.new.static[data-draft-type="link-card"]:not([data-za-content-type="Zvideo"])',zaBlock:"ZTextLinkCard",viewInfoBuilder:ey,extraInfoBuilder:ex},{selector:'a.LinkCard.new.static[data-draft-type="link-card"][data-za-content-type="Zvideo"]',zaBlock:"ZTextZVideoLinkCard",viewInfoBuilder:ey,extraInfoBuilder:ex},{selector:"a.FileLinkCard",zaBlock:"ZTextFileLinkCard"}],eL=function(e){var t,n,o=e.element,r=e.config,a=null===(t=r.viewInfoBuilder)||void 0===t?void 0:t.call(r,o,r),i=(0,s._)({elementLocation:{type:"Button"},block:r.zaBlock},a),c=(0,s._)({action:"OpenUrl",elementLocation:{type:"Button"},block:r.zaBlock,eventType:"Click"},a),l=(0,s._)({link:{url:o.href}},null===(n=r.extraInfoBuilder)||void 0===n?void 0:n.call(r,o,r)),d=(0,b.useTracker)().trackEvent,u=(0,b.useShow)(i,l),f=(0,y.A)(function(e){d(c,l),"ZTextLinkCard"===r.zaBlock&&o.dataset.isEcommerce&&e.preventDefault()});return(0,k.useEffect)(function(){return o.addEventListener("click",f),function(){o.removeEventListener("click",f)}},[]),(0,k.useEffect)(function(){return u(o),function(){return u(null)}},[]),null},e_=function(e){var t=e.root,n=(0,f._)((0,k.useState)([]),2),o=n[0],r=n[1];return(0,k.useEffect)(function(){if(t){var e=[];ew.forEach(function(n){var o=n.selector;Array.from(t.querySelectorAll(o)).forEach(function(t){e.push({el:t,config:n})})}),r(e)}},[t]),(0,g.tZ)(k.Fragment,{children:o.map(function(e,t){var n=e.el,o=e.config;return(0,g.tZ)(eL,{element:n,config:o},t)})})},eB=/<p><br><\/p>/g,ez=/<[^<>\s]+(\s|>)/,eZ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solid";return{borderBottom:"1px ".concat(t," ").concat(e.colors.GBL07A)}},eI=function(e){return{color:e.colors.GBL07A,"&:hover":eZ(e)}},eS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[data-focus-visible]";return(0,l._)({outline:"none",transition:"box-shadow 0.3s"},"html".concat(t," &"),{boxShadow:"0 0 0 2px ".concat(e.colors.GBK99A,", 0 0 0 4px ").concat(e.colorMod(e.colors.GBL01A).alpha(.3))})},eR=(0,S.F4)(eg()),eT="#fff",eN=function(e){var t="1.4em";return(0,s._)({wordBreak:"break-word",lineHeight:"1.6","> [data-first-child]":{marginTop:0},"> :last-child":{marginBottom:0},"h1,h2":{clear:"left",marginTop:"calc((".concat(t," * 2) / 1.2)"),marginBottom:"calc(".concat(t," / 1.2)"),fontSize:"1.2em",lineHeight:1.5,fontWeight:e.fontWeights.bold},"h3,h4,h5,h6":{clear:"left",marginTop:"calc((".concat(t," * 1.5) / 1.1)"),marginBottom:"calc(".concat(t," / 1.1)"),fontSize:"1.1em",lineHeight:"1.5",fontWeight:e.fontWeights.bold},u:{textDecoration:"none",borderBottom:"1px solid ".concat(e.colors.GBK03A)},b:{fontWeight:e.fontWeights.bold},sup:{fontSize:"0.8em"},"sup[data-draft-type='reference']":{color:e.colors.GBL07A},"a:focus":eS(e),"a.ztext-link,a.internal,a.external,a.videox":{textDecoration:"none",cursor:"pointer",color:e.colors.MapLink,"&:hover":{color:e.colors.MapLink}," > .ellipsis::after":{content:"'...'"},"> .invisible":{font:"0/0 a",color:"transparent",textShadow:"none",backgroundColor:"transparent"},u:{border:"none"}},"a.member_mention":eI(e),"a.UserLink-link":eI(e),p:{margin:"".concat(t," 0")},"p.ztext-empty-paragraph":{margin:"calc((".concat("2.8em","- (").concat(t," * 2 + 1.6em)) / 2) 0"),"+ .ztext-empty-paragraph":{margin:"".concat(t," 0")}},hr:{margin:"4em auto",width:"240px",maxWidth:"100%",border:"none",borderTop:"1px solid ".concat(e.colors.GBK08A)},"img[eeimg]":(0,s._)({maxWidth:"100%",verticalAlign:"middle"},e.isDarkMod&&{filter:"invert(1)"}),'img[eeimg="1"]':{margin:"0 3px",maxWidth:"calc(100% - 6px)",display:"inline-block"},'img[eeimg="2"]':{margin:"".concat(t," auto"),display:"block"},'.ztext-math[data-eeimg="2"]':{margin:"0 auto",display:"block",textAlign:"center"},blockquote:{margin:"".concat(t," 0"),paddingLeft:"1em",color:e.colors.GBK04A,borderLeft:"3px solid ".concat(e.colors.GBK08A)},"ol,ul":{margin:"".concat(t," 0"),padding:0,width:"100%","ol,ul":{margin:0},"li::before":{width:"1em"},"> ol, > ul":{paddingLeft:"1em",boxSizing:"border-box"}},ul:{"&>li":{display:"table",width:"100%",listStyle:"none","&::before":{display:"table-cell",content:"'•  '",whiteSpace:"pre"}}},ol:{counterReset:"ol","> li":{display:"table",width:"100%",listStyle:"none","&::before":{display:"table-cell",textAlign:"right",counterIncrement:"ol",content:"counter(ol) '. '",whiteSpace:"pre"}}},"ol ol":{counterReset:"ol2","li::before":{counterIncrement:"ol2",content:"counter(ol2) '. '"}},"ol ol ol":{counterReset:"ol3","li::before":{counterIncrement:"ol3",content:"counter(ol3) '. '"}},"ol ol ol ol":{counterReset:"ol4","li::before":{counterIncrement:"ol4",content:"counter(ol4) '. '"}},figure:{margin:"".concat(t," 0"),".content_image,.origin_image":{margin:"0 auto"},figcaption:{marginTop:"calc(0.6em / 0.9)",padding:"0 1em",fontSize:"0.9em",lineHeight:"1.5",textAlign:"center",color:e.colors.GBK06A},"& + figure":{marginTop:"calc(".concat(t," * 1.6)")},"&[data-size='small'],&:not([data-size]) > [data-size='small']":{clear:"both"},"&[data-size='left'],&:not([data-size]) > [data-size='left']":{float:"left",margin:"0 20px 20px 0",maxWidth:"33%"},"&[data-size='right'],&:not([data-size]) > [data-size='right']":{float:"right",margin:"0 0 20px 20px",maxWidth:"33%"},"&[data-size='collapse']":{marginBottom:0,"& + figure":{marginTop:0}}},".content_image, .origin_image":{display:"block",maxWidth:"100%",height:"auto",margin:"".concat(t," auto"),backgroundColor:eT,"&[data-size='small']":{maxWidth:"40%"},"&.zh-lightbox-thumb":{cursor:"zoom-in"}},code:{margin:"0 2px",padding:"3px 4px",borderRadius:"3px",fontFamily:e.fonts.monospace,fontSize:"0.9em",backgroundColor:e.colors.GBK10A},pre:{margin:"".concat(t," 0"),padding:"calc(0.8em / 0.9)",fontSize:"0.9em",wordBreak:"initial",wordWrap:"initial",whiteSpace:"pre",overflow:"auto",WebkitOverflowScrolling:"touch",background:e.colors.GBK10A,borderRadius:"4px",code:{margin:0,padding:0,fontSize:"inherit",borderRadius:0,backgroundColor:"inherit"}},"li pre":{whiteSpace:"pre-wrap"},"table[data-draft-type='table']":{borderCollapse:"collapse",fontSize:"15px",margin:"".concat(t," auto"),maxWidth:"100%",tableLayout:"fixed",textAlign:"left",width:"100%","&[data-size='small']":{minWidth:"260px",width:"40%"},"&[data-row-style='striped'] tr:nth-of-type(2n + 1)":{background:e.colors.GBK10A},"td,th":{border:"1px solid ".concat(e.colors.GBK08A),lineHeight:"24px",height:"24px",padding:"3px 12px"},th:{background:e.colors.GBK09A,color:e.colors.GBK02A,fontWeight:500}},"& .video-box, & .link-box":{position:"relative",display:"flex",justifyContent:"space-between",margin:"".concat(t," 0"),overflow:"auto",whiteSpace:"normal",cursor:"pointer",border:"solid 1px ".concat(e.colors.GBK09A),borderRadius:"4px"}},{".lazy[data-lazy-status]":{backgroundColor:e.colors.GBK10A},'.lazy[data-lazy-status="ok"]':{backgroundColor:eT,animation:"".concat(eR," 0.5s ease-in")}})},eG=[function(e){return e?e.replace(eB,'<p class="ztext-empty-paragraph"><br /></p>'):e},function(e){return e?e.replace(ez,function(e,t){return e.replace(t," data-first-child".concat(t))}):e}],eE=(0,k.forwardRef)(function(e,t){var n,o=e.as,r=e.tag,a=e.className,i=e.html,c=e.clearBoth,l=void 0!==c&&c,d=e.richContentKey,f=e.root,h=e.Portal,m=e.useHooks,p=(0,u._)(e,["as","tag","className","html","clearBoth","richContentKey","root","Portal","useHooks"]),k=ev(eG);m(f);var v=null!==(n=null!=o?o:r)&&void 0!==n?n:"div";return(0,g.BX)(g.HY,{children:[h&&(0,g.tZ)(h,{root:f}),(0,g.tZ)(v,(0,s._)({ref:t,css:function(e){return(0,s._)({},eN(e),{"& .highlight":{margin:"1em 0",pre:{margin:0},".hll":{backgroundColor:e.colors.GBK12A},".c":{fontStyle:"italic",color:e.colors.GBK06A},".err":{color:e.colors.GRD03A},".k":{fontWeight:600},".o":{fontWeight:600},".cm":{fontStyle:"italic",color:e.colors.GBK06A},".cp":{fontWeight:600,color:e.colors.GBK06A},".c1":{fontStyle:"italic",color:e.colors.GBK06A},".cs":{fontStyle:"italic",fontWeight:600,color:e.colors.GBK06A},".gd":{color:e.colors.GRD01A},".ge":{fontStyle:"italic"},".gr":{color:e.colors.GRD03A},".gh":{color:e.colors.GBK06A},".gi":{color:"#12b370"},".go":{color:e.colors.GBK05A},".gp":{color:e.colors.GBK04A},".gs":{fontWeight:600},".gu":{color:e.colors.GBK06A},".gt":{color:e.colors.GRD03A},".kc":{fontWeight:600},".kd":{fontWeight:600},".kn":{fontWeight:600},".kp":{fontWeight:600},".kr":{fontWeight:600},".kt":{fontWeight:600,color:e.colors.GBL07A},".m":{color:e.colors.GBL01A},".s":{color:e.colors.GRD03A},".na":{color:e.colors.GBL01A},".nb":{color:e.colors.GBL01A},".nc":{fontWeight:600,color:e.colors.GBL07A},".no":{color:e.colors.GBL01A},".ni":{color:e.colors.GRD07A},".ne":{fontWeight:600,color:e.colors.GRD03A},".nf":{fontWeight:600,color:e.colors.GRD03A},".nn":{color:e.colors.GBK04A},".nt":{color:e.colors.GBL07A},".nv":{color:e.colors.GBL01A},".ow":{fontWeight:600},".w":{color:e.colors.GBK07A},".mf":{color:e.colors.GBL01A},".mh":{color:e.colors.GBL01A},".mi":{color:e.colors.GBL01A},".mo":{color:e.colors.GBL01A},".sb":{color:e.colors.GRD03A},".sc":{color:e.colors.GRD03A},".sd":{color:e.colors.GRD03A},".s2":{color:e.colors.GRD03A},".se":{color:e.colors.GRD03A},".sh":{color:e.colors.GRD03A},".si":{color:e.colors.GRD03A},".sx":{color:e.colors.GRD03A},".sr":{color:e.colors.GYL02A},".s1":{color:e.colors.GRD03A},".ss":{color:e.colors.GRD03A},".bp":{color:e.colors.GBK06A},".vc":{color:e.colors.GBL01A},".vg":{color:e.colors.GBL01A},".vi":{color:e.colors.GBL01A},".il":{color:e.colors.GBL01A},"&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-thumb:horizontal":{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.5),borderRadius:"6px","&:hover":{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.6)}}}},l&&{"&::before, &::after":{clear:"both",content:'""',display:"block"}})},className:I()("RichText","ztext",a,{"RichText--clearBoth":l}),dangerouslySetInnerHTML:{__html:k(i)}},p),d||i)]})});eE.propTypes={as:z().string,tag:z().string,html:z().string.isRequired,clearBoth:z().bool,ref:z().func,Portal:z().func,useHooks:z().func},eE.defaultProps={useHooks:C()};var eP=(0,k.memo)(eE),eM=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return"180x120";if(n<=.8)return"120x160"}return"ipico"},eD=(0,k.forwardRef)(function(e,t){var n=N()(e,["entityType","entityData","notCommerce"]),o=n.text,r=n.target,a=n.url,i=n.image,c=n.imageWidth,l=n.imageHeight,f=n.component,h=n.className,m=n.size,p=n.children,k=(0,u._)(n,["text","target","url","image","imageWidth","imageHeight","component","className","size","children"]),v=eM(c,l),C=(0,G.imgUrl)(i,v);return(0,g.tZ)(f,(0,d._)((0,s._)((0,d._)((0,s._)({ref:t,target:r,href:a,"data-draft-node":"block","data-draft-type":"link-card"},C&&{"data-image":C},c&&{"data-image-width":c},l&&{"data-image-height":l},m&&{"data-size":m},o!==a&&o&&{"data-text":o}),{className:I()("LinkCard new",h)}),k),{children:p||(0,g.BX)(g.HY,{children:[(0,g.tZ)("span",{className:"LinkCard-image LinkCard-image--default"}),(0,g.BX)("span",{className:"LinkCard-contents",children:[(0,g.tZ)("span",{className:"LinkCard-title loading","data-text":!0}),(0,g.tZ)("span",{className:"LinkCard-desc loading"})]})]})}))});eD.propTypes={component:z().oneOfType([z().string,z().func]),target:z().string,url:z().string.isRequired,text:z().string,image:z().string,imageWidth:z().oneOfType([z().string,z().number]),imageHeight:z().oneOfType([z().string,z().number])},eD.defaultProps={component:"a",target:"_blank"};var eW={answer:{en:"Answer",zh:"回答"},article:{en:"Article",zh:"文章"},zvideo:{en:"Video",zh:"视频"},question:{en:"Question",zh:"问题"},collection:{en:"Collection",zh:"收藏夹"},roundtable:{en:"Roundtable",zh:"圆桌"},topic:{en:"Topic",zh:"话题"},voteupCount:{en:"Voteup",zh:"赞同"},commentCount:{en:"Comment",zh:"评论"},playCount:{en:"Play",zh:"播放"},followerCount:{en:"Follower",zh:"关注"},answerCount:{en:"Answer",zh:"回答"},visitCount:{en:"Visit",zh:"浏览"},discussionCount:{en:"Discussion",zh:"讨论"}},eK=function(e){return["column","podcast-channel","podcast-episode","ailab","zhi-da-session","zhi-da-share","zhi-da-folder"].includes(e)},eU=function(e){if(!e)return{};try{var t=JSON.parse(e);if(!t||"object"!=typeof t)return{};return(0,E.camelizeKeys)(t)}catch(e){return{}}},eX=function(e){return e?eK(e.objectType)?eU(e.extraInfo).title||"":e.extraInfo?eU(e.extraInfo).title||e.title||"":e.title||"":""},eH=function(e){if(!e)return"";var t=eU(e.extraInfo);return t.coverImage||t.cover||e.thumbnail||""},eV={answer:"回答",article:"文章",zvideo:"视频",question:"问题",collection:"收藏夹",roundtable:"圆桌",topic:"话题",pin:"想法"},ej={voteupCount:"赞同",commentCount:"评论",playCount:"播放",followerCount:"关注",answerCount:"回答",visitCount:"浏览",discussionCount:"讨论"},eq={answer:["voteupCount","commentCount"],article:["voteupCount","commentCount"],zvideo:["playCount","voteupCount"],question:["followerCount","answerCount"],collection:["visitCount","followerCount"],topic:["visitCount","discussionCount"],default:["followerCount","visitCount"]},eF=function(e){var t=e.twoLine,n=e.children;return!!n&&(0,g.tZ)("span",{className:I()("LinkCard-title",{"two-line":t}),children:n})},eO=function(e){var t,n,o=e.data,r=e.language,a=o.objectType,i="",c=eU(o.extraInfo);return c.desc?(i=c.desc||"",(0,g.tZ)("span",{className:"LinkCard-desc LinkCard-desc-wrapper",dangerouslySetInnerHTML:{__html:i}})):(i=(eq[a]||eq.default).map(function(e){var t,n=o[e];return"".concat((0,J.Zh)(n)).concat(null!==(t=eW[e][r])&&void 0!==t?t:ej[e])}).filter(Boolean).join(" \xb7 "),(0,g.BX)("span",{className:"LinkCard-desc LinkCard-desc-wrapper-line-clamp",children:[i,(0,g.tZ)("span",{children:(0,g.tZ)("span",{className:"LinkCard-tag",children:null!==(n=null===(t=eW[a])||void 0===t?void 0:t[r])&&void 0!==n?n:eV[a]})})]}))},eQ=function(e){var t=e.url,n=e.showIcon,o=(0,k.useMemo)(function(){var e=null,n=M()(t,!0);return"link.zhihu.com"===n.hostname&&(e=n.query.target),(e||t||"").replace(/^https?:\/\//,"")},[t]);return(0,g.BX)("span",{className:"LinkCard-desc",children:[(void 0===n||n)&&(0,g.tZ)(D.n,{size:14,center:!0}),o]})},eY=function(e){var t=e.url,n=e.isVideo,o=e.ratio,r=e.onClick;return!!t&&(0,g.BX)("span",{className:"LinkCard-image",style:{height:66*(void 0===o?1:o)},children:[(0,g.tZ)("img",{src:t,onClick:r,alt:n?"点击可播放视频":""}),n&&(0,g.tZ)("span",{className:"LinkCard-image--video",children:(0,g.tZ)(W.Z,{size:28,center:!0})})]})},eJ=(0,k.forwardRef)(function(e,t){var n=e.url,o=e.data,r=e.onClick,a=e.onClickImage,i=e.language,c=o.title,l=o.thumbnail,s=o.objectType;return(0,g.BX)(g.HY,{children:[(0,g.tZ)(eY,{url:l,isVideo:"zvideo"===s,onClick:a}),(0,g.BX)("span",{ref:t,className:"LinkCard-contents",onClick:r,children:[(0,g.tZ)(eF,{twoLine:!0,children:c}),s?(0,g.tZ)(eO,{data:o,language:void 0===i?"zh":i}):(0,g.tZ)(eQ,{url:n,showIcon:!1})]})]})}),e$=function(e){var t=e.className,n=e.html;return n?(0,g.tZ)("span",{className:"LinkCard-richText ".concat(t),dangerouslySetInnerHTML:{__html:"<object>".concat(n,"</object>")}}):null},e0=function(e){var t=e.data,n=t.title,o=t.desc,r=t.url,a=t.image,i=t.ratio,c=t.isVideo;return(0,g.BX)(g.HY,{children:[(0,g.tZ)(eY,{url:a,ratio:i,isVideo:c}),(0,g.BX)("span",{className:"LinkCard-contents",children:[(0,g.tZ)(eF,{twoLine:!0,children:n},"title"),(0,g.tZ)(e$,{className:"LinkCard-desc",html:o}),!o&&(0,g.tZ)(eQ,{url:r},"url")]})]})},e1={ANSWER:"Answer",ARTICLE:"Column",ZVIDEO:"Zvideo",QUESTION:"Question",COLLECTION:"Collection",ROUNDTABLE:"Roundtable",SPECIAL:"Special",TOPIC:"Topic"},e2=function(e){var t={};if(e.data){var n=(0,E.camelizeKeys)("string"==typeof e.data?JSON.parse(e.data):e.data),o=n.source,r=n.display,a=void 0===r?{}:r,i=n.zaData,c=a.cardOpenUrl,l=a.title,u=a.content,f=a.desc,h=a.image||{};t={source:void 0===o?{}:o,url:c,title:l,content:u,desc:f,image:h.imageUrl,ratio:h.ratio,isVideo:h.isVideo,zaAttachInfo:(void 0===i?{}:i).attachInfo}}return(0,d._)((0,s._)({},t,e),{title:e.text||t.title,image:t.image||e.image})},e4=(0,k.forwardRef)(function(e,t){var n=(0,k.useMemo)(function(){return e2(e)},[e]),o=n.source,r=n.target,a=n.title,i=n.url,c=n.zaAttachInfo;return(0,g.tZ)(eD,{ref:t,notCommerce:!0,target:r,text:a,url:i,"data-za-attach-info":c,"data-za-content-type":e1[null==o?void 0:o.contentType]||"Unknown",className:"static",children:(0,g.tZ)(e0,{data:n})})}),e3=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function e6(){return Math.max(window.innerHeight/10,100)}var e7=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t);if([n.overflow,n.overflowY,n.overflowX].some(function(e){return"scroll"===e||"auto"===e}))return t;t=t.parentNode||t.parentElement}return window};function e8(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=e7(e),r=e.getBoundingClientRect().top+(o.pageYOffset||o.scrollTop||0)-(n?e6():0)-t;o.scrollTo({top:r,behavior:"smooth"})}var e9=/<a\b([^>]*data-draft-type="link-card"[^>]*)>(.*?)<\/a>/g,e5=function(e){var t=e.target,n=e.url,o=e.component,r=e.className;return(0,g.tZ)(o,{target:t,href:n,"data-draft-node":"block","data-draft-type":"link-card","data-is-ecommerce":"1",className:I()("LinkCard",r),children:(0,g.BX)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard",children:[(0,g.tZ)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper",children:(0,g.tZ)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})}),(0,g.BX)("div",{className:"LinkCard-ecommerceLoadingCardLoadingbar",children:[(0,g.tZ)("span",{}),(0,g.tZ)("span",{})]})]})})};e5.defaultProps={component:"a",target:"_blank"};var te=/<a\b([^>]*BIZ(=|%3D)ECOMMERCE[^>]*)>(.*?)<\/a>/g,tt={zhicon_icon_24_paper_plain_text:K.Z,zhicon_icon_24_video_camera:U.Z,zhicon_icon_24_column_new:X.Z,zhicon_icon_24_headphone:H.Z,zhicon_icon_24_ai_lab:V.Z,zhicon_icon_24_book_cover:j.Z,zhicon_icon_24_zhida_logo:q.Z,zhicon_icon_24_bag:F.Z,zhicon_icon_24_circle_club:O.ZP},tn={question:"Question",answer:"Answer",collection:"Collection",ebook:"EBook",roundtable:"Roundtable",live:"Live",topic:"Topic",people:"User",org:"User",pin:"Pin",link:"Link",zvideo:"Zvideo",column:"Column",parker:"Unknown",discussion:"Discussion",infinity:"Conversation",podcast_channel:"PodcastChannel",podcast_episode:"PodcastEpisode","gaokao-2020":"Unknown","new-knowledge-youth-2025":"Unknown",ailab:"AILab",ring:"Ring"},to=new Map;Array.isArray(er)&&er.forEach(function(e){e.stickers&&Array.isArray(e.stickers)&&e.stickers.forEach(function(e){e.placeholder&&e.static_image_url&&to.set(e.placeholder,e.static_image_url)})});var tr=function(e){return e?e.replace(/\[([^\]]+)\]/g,function(e){var t=to.get(e);return t?'<img src="'.concat(t,'" loading="lazy" class="sticker" width="20" height="20" alt="').concat(e,'" style="margin-bottom: -4px;" />'):e}):e},ta=function(e,t){var n=e.match(new RegExp("".concat(t,'="([^"]*)"')));return n?n[1]:""},ti=function(e){if(!e)return{};var t=/<a[^>]*>([^<]*)<\/a>/g.exec(e);if(!t)return{text:tr(e)};var n=e.substring(0,t.index),o=t[0],r=ta(o,"data-icon-name");return{text:tr(n),linkHtml:o,href:ta(o,"href"),linkText:t[1],contentToken:ta(o,"data-content-token"),contentType:ta(o,"data-content-type"),icon:tt[r]||D.ZP}},tc=(0,k.forwardRef)(function(e,t){var n=e.data,o=e.onClick,r=e.onClickImage,a=(0,k.useMemo)(function(){return eU(n.extraInfo)},[n.extraInfo]),i=a.cover,c=a.title,l=a.isVideo,s=a.desc,d=a.content,u=(0,k.useMemo)(function(){return ti(d)},[d]),h=u.text,m=u.linkHtml,p=u.href,v=u.linkText,C=u.icon,A=u.contentToken,y=u.contentType,x=(0,k.useRef)(null),w=(0,f._)((0,k.useState)(0),2),L=w[0],_=w[1];return(0,k.useEffect)(function(){if(!c||""===c.trim()){_(2);return}if(d&&""===d.trim()){_(0);return}if(x.current){var e=x.current,t=setTimeout(function(){e.scrollHeight>22?_(0):_(1)},0);return function(){return clearTimeout(t)}}},[c,d]),(0,g.BX)(g.HY,{children:[(0,g.tZ)(eY,{url:i,isVideo:l,onClick:r}),(0,g.BX)("span",{className:"PinLinkCard LinkCard-contents",ref:t,onClick:o,children:[!!c&&(0,g.tZ)("span",{className:"LinkCard-title two-line",ref:x,children:c}),!!(L>0&&d)&&(0,g.BX)("span",{className:I()("LinkCard-title PinLinkCard-content ",{"two-line":2===L}),children:[(0,g.tZ)("span",{dangerouslySetInnerHTML:{__html:h}}),m&&(0,g.BX)(b.ZAClick,{component:"a",href:p,target:"_blank",rel:"noreferrer",className:"PinLinkCard-link",zaType:"Text",zaAction:"OpenUrl",zaModuleId:"original_link",view:{elementLocation:{content:{token:A,type:tn[y]||"Unknown"},parentContent:{id:n.objectId,type:"Pin"}}},onClick:function(e){e.stopPropagation()},children:[(0,g.tZ)("span",{className:"PinLinkCard-link-icon",children:(0,g.tZ)(C,{size:"16px",center:!0})}),(0,g.tZ)("span",{children:v})]})]}),!!s&&(0,g.tZ)("span",{className:"LinkCard-desc",dangerouslySetInnerHTML:{__html:s}})]})]})}),tl=(0,k.forwardRef)(function(e,t){var n=e.color,o=e.className,r=(0,u._)(e,["color","className"]);return(0,g.tZ)("span",(0,s._)({ref:t,className:I()("LinkCard-wrapper",o),style:{background:n&&"string"==typeof n?"linear-gradient(180deg, ".concat((0,en.a)(n).alpha(.12)," 0%, ").concat((0,en.a)(n).alpha(0)," 100%)"):"transparent"}},r))}),ts=(0,k.forwardRef)(function(e,t){var n=e.data,o=e.onClick,r=n.title,a=n.extraInfo,i=(0,k.useMemo)(function(){return eU(a)},[a]);return(0,g.BX)(tl,{color:i.coverColor,ref:t,onClick:o,children:[(0,g.tZ)(eY,{url:i.coverImage}),(0,g.BX)("span",{className:"LinkCard-contents",onClick:o,children:[(0,g.tZ)(eF,{children:r}),!!i.subtitle&&(0,g.tZ)("span",{className:"LinkCard-excerpt",children:i.subtitle}),(0,g.tZ)("span",{className:"LinkCard-desc",children:i.metricsText})]})]})}),td=(0,k.forwardRef)(function(e,t){var n,o=e.data,r=e.onClick,a=o.title,i=o.extraInfo,c=(0,k.useMemo)(function(){return eU(i)},[i]);return(0,g.BX)(tl,{color:c.coverColor,ref:t,onClick:r,children:[(0,g.tZ)(eY,{url:c.coverImage}),(0,g.BX)("span",{className:"LinkCard-contents",children:[(0,g.tZ)(eF,{children:a}),!!c.subtitle&&(0,g.tZ)("span",{className:"LinkCard-excerpt",children:c.subtitle}),(0,g.BX)("span",{className:"LinkCard-desc",children:[c.metricsText,null===(n=c.tags)||void 0===n?void 0:n.map(function(e,t){return(0,g.tZ)("span",{children:(0,g.tZ)("span",{className:"LinkCard-tag",children:e})},String([e,t]))})]})]})]})}),tu=(0,k.forwardRef)(function(e,t){var n=e.data,o=e.onClick,r=n.title,a=n.extraInfo,i=(0,k.useMemo)(function(){return eU(a)},[a]);return(0,g.BX)(tl,{color:i.coverColor,ref:t,onClick:o,children:[(0,g.tZ)(eY,{url:i.coverImage}),(0,g.BX)("span",{className:"LinkCard-contents",onClick:o,children:[(0,g.tZ)(eF,{children:r}),!!i.subtitle&&(0,g.tZ)("span",{className:"LinkCard-excerpt",children:i.subtitle}),(0,g.BX)("span",{className:"LinkCard-desc",children:[i.metricsText,(0,g.tZ)("span",{children:(0,g.tZ)("span",{className:"LinkCard-tag",children:"播客栏目"})})]})]})]})}),tf=(0,k.forwardRef)(function(e,t){var n=e.data,o=e.onClick,r=n.title,a=n.extraInfo,i=(0,k.useMemo)(function(){return eU(a)},[a]),c=" \xb7 "+(null==i.duration?"--":Math.ceil(i.duration/6e4))+" 分钟";return(0,g.BX)(tl,{color:i.coverColor,ref:t,className:"PodcastEpisodeLinkCard",onClick:o,children:[(0,g.tZ)(eY,{url:i.coverImage}),(0,g.BX)("span",{className:"LinkCard-contents",children:[(0,g.BX)("span",{className:"LinkCard-contents-main",children:[(0,g.tZ)(eF,{twoLine:!0,children:r}),(0,g.BX)("span",{className:"PodcastEpisodeLinkCard-desc",children:[(0,g.tZ)("span",{className:"LinkCard-desc",children:i.podcastChannelTitle}),(0,g.tZ)("span",{className:"PodcastEpisodeLinkCard-duration",children:c}),(0,g.tZ)("span",{className:"PodcastEpisodeLinkCard-collect",children:(0,g.tZ)(Q.ZP,{size:"20px",className:"PodcastEpisodeLinkCard-collect-icon"})})]})]}),(0,g.tZ)("span",{className:"PodcastEpisodeLinkCard-play",children:(0,g.tZ)(W.Z,{size:"20px",className:"PodcastEpisodeLinkCard-play-icon"})})]})]})}),th=(0,k.forwardRef)(function(e,t){var n,o=e.data,r=e.onClick,a=o.title,i=o.extraInfo,c=(0,k.useMemo)(function(){return eU(i)},[i]);return(0,g.BX)("span",{className:"ZhidaLinkCard",ref:t,onClick:r,children:[(0,g.BX)("span",{className:"ZhidaLinkCard-content",children:[(0,g.BX)("span",{className:"ZhidaLinkCard-header",children:[(0,g.tZ)("span",{className:"ZhidaLinkCard-avatar-container",children:(0,g.tZ)("img",{className:"ZhidaLinkCard-avatar",src:(null===(n=c.author)||void 0===n?void 0:n.avatarUrl)||"https://picx.zhimg.com/v2-abed1a8c04700ba7d72b45195223e0ff_l.jpg",alt:"头像"})}),(0,g.tZ)("span",{className:"ZhidaLinkCard-source",children:c.source})]}),(0,g.tZ)(eF,{children:a}),(0,g.tZ)("span",{className:"ZhidaLinkCard-answer",children:c.summary})]}),(0,g.BX)("span",{className:"ZhidaLinkCard-footer",children:[(0,g.tZ)(q.Z,{size:"16px",className:"ZhidaLinkCard-logo"}),(0,g.tZ)("span",{className:"ZhidaLinkCard-footer-text",children:"去直答提问"}),(0,g.tZ)(Y.Z,{size:"16px",className:"ZhidaLinkCard-arrow"})]})]})}),tm=(o={column:ts,pin:tc,"podcast-channel":tu,"podcast-episode":tf,ailab:td},(0,l._)(o,"zhi-da-session",th),(0,l._)(o,"zhi-da-share",th),(0,l._)(o,"zhi-da-folder",ts),o),tp=(0,k.forwardRef)(function(e,t){var n=tm[e.data.objectType]||eJ;return(0,g.tZ)(n,(0,d._)((0,s._)({},e),{ref:t}))}),tg=function(){function e(t){(0,i._)(this,e);var n,o,r,c=this;o="fetch",n=(0,a._)(function(e){var t,n=arguments;return(0,p.__generator)(this,function(o){switch(o.label){case 0:if(t=n.length>1&&void 0!==n[1]?n[1]:{},c.url||(c.url=e),!(e!==c.url))return[3,4];if(!(c.queue.length>0))return[3,2];return clearTimeout(c.timeout),[4,c.doFetch()];case 1:return o.sent(),[3,3];case 2:clearTimeout(c.timeout),o.label=3;case 3:c.url=e,c.startTime=Date.now(),o.label=4;case 4:return[2,new Promise(function(e,n){c.addToQueue({options:t,resolve:e,reject:n})})]}})}),r=function(e){return n.apply(this,arguments)},o in this?Object.defineProperty(this,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[o]=r,this.instance=null,this.customFetch=t,this.delay=200,this.maxDelay=1e3,this.url="",this.queueMaxLength=10,this.queue=[],this.startTime=Date.now(),this.timeout=null,this.initialized=!1}return(0,c._)(e,[{key:"initConfig",value:function(e){var t=e.delay,n=e.maxDelay,o=e.maxBatchCount;t&&(this.delay=t),n&&(this.maxDelay=n),o&&(this.maxBatchCount=o),this.initialized=!0}},{key:"buildFetchParams",value:function(e){var t=(0,f._)(e,1)[0].options,n=e.reduce(function(e,t){var n,o;return(null===(o=(n=t.options).dataBuilder)||void 0===o?void 0:o.call(n,e,t))||e},{}),o=this.url,r=!t.method||"GET"===t.method.toUpperCase();if(r){var a=M()(o,!0);a.query=(0,s._)({},a.query,n),o=a.toString()}return[o,(0,d._)((0,s._)({},t),{data:r?null:(0,s._)({},t.data,n)})]}},{key:"doFetch",value:function(){var e=this;return(0,a._)(function(){var t,n,o;return(0,p.__generator)(this,function(r){switch(r.label){case 0:if(0===e.queue.length)return[2];t=e.queue,e.queue=[],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.customFetch.apply(e,(0,m._)(e.buildFetchParams(t)))];case 2:return n=r.sent(),t.forEach(function(e){var t=e.options;(0,e.resolve)(t.resultBuilder?t.resultBuilder(n):n)}),[3,4];case 3:return o=r.sent(),t.forEach(function(e){return e.reject(o)}),[3,4];case 4:return[2]}})})()}},{key:"addToQueue",value:function(e){var t=this;this.initialized||this.initConfig(e.options),clearTimeout(this.timeout),(Date.now()-this.startTime>this.maxDelay||this.queue.length>=this.maxBatchCount)&&(this.startTime=Date.now(),this.doFetch()),this.queue.push(e),setTimeout(function(){t.startTime=Date.now(),t.doFetch()},this.delay)}}]),e}(),tk=null,tv=function(e){var t;return t=(0,a._)(function(t,n){return(0,p.__generator)(this,function(o){switch(o.label){case 0:return[4,e(t,n)];case 1:return[4,o.sent().json()];case 2:return[2,o.sent()]}})}),function(e,n){return t.apply(this,arguments)}},tC=function(){throw Error("Not implemented")},tA=function(){var e;return e=tv("undefined"!=typeof fetch?fetch:tC),function(t,n){return tk||(tk=new tg(e)),tk.fetch(t,n)}},tb=ec()(function(e,t){var n=e?"/api/v4/editor/link_card_infos?scene=".concat(t?"editor":"pcweb"):"/api/v4/link_card_infos";return(0,ea.isBrowser)()&&window.location.origin,"https://www.zhihu.com".concat(n)},function(e,t){return"".concat(e,"-").concat(t)}),ty={},tx=function(e){var t=(0,k.useRef)(0),n=e.inEditor,o=e["data-offset-key"],r=e["data-text"],i=e["data-image"],c=e.href,l=e.onFetchSuccess,u=e.enableNewCardStyle,h=e["data-draft-title"],m=e["data-draft-cover"],g=(0,k.useRef)(!1),v=(0,k.useRef)(c),C="draftjs"===n,A=(0,f._)((0,k.useState)(function(){return C&&ty[o]||null}),2),b=A[0],w=A[1],L=(0,f._)((0,x.Y)({once:!0}),2),_=L[0],B=L[1],z=(0,y.A)(function(e){var t=e||b;if(!t||0===Object.keys(t).length)return{objectType:null,title:r||h||c,thumbnail:i||m};var n=(0,d._)((0,s._)({},t),{title:r||eX(t)||h||c,thumbnail:eH(t)||m,cached:!0});return C&&(ty[o]=n),n}),Z=(0,y.A)(tA()),I=(0,y.A)((0,a._)(function(){var e;return(0,p.__generator)(this,function(o){switch(o.label){case 0:t.current+=1,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Z(tb(u,n),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},dataBuilder:function(e){return e.urls="".concat(e.urls?e.urls+",":"").concat(c),e},resultBuilder:function(e){return(0,E.camelizeKeys)(e[c])}})];case 2:return w(z(e=o.sent())),null==l||l((0,d._)((0,s._)({},e),{title:eX(e),cover:eH(e)}),r),[3,4];case 3:return o.sent(),t.current<=1?I():w(z()),[3,4];case 4:return[2]}})})),S=!!(!b||!b.cached);return(0,k.useEffect)(function(){(B&&S||v.current!==c)&&I()},[B,S,I,c]),(0,k.useEffect)(function(){n&&g.current&&w(z(v.current!==c?{title:r}:null))},[n,z,r,c]),(0,k.useEffect)(function(){v.current=c},[c]),(0,k.useEffect)(function(){g.current=!0},[]),[_,b]},tw=function(e){A.Z.trackCardShow(e,{id:7844},{button:{text:"inlinezvideo"}})},tL=function(e,t,n){var o;A.Z.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(o=t.onImageClick)||void 0===o||o.call(t,e,n)},t_=function(e,t,n){var o;A.Z.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(o=t.onImageClick)||void 0===o||o.call(t,e,n)},tB=function(e,t,n){var o=e["data-text"],r=e.href,a=e.zvideoLinkCardProps;(0,k.useEffect)(function(){n&&(0,el.y3)(t.current,function(){return tw(t.current)})},[n,t]);var i=(0,y.A)(function(e){tL(e,{title:o,url:r,video:{}})}),c=(0,y.A)(function(e){t_(e,a,{title:o,url:r})});return n?{handleImageClick:i,handleInfoClick:c}:{}},tz=(r={answer:"general",article:"general",question:"general",collection:"general",roundtable:"general",topic:"general",pin:"general",zvideo:"video","podcast-channel":"PodcastChannel","podcast-episode":"PodcastEpisode",column:"Column"},(0,l._)(r,"zhi-da-session","zhida"),(0,l._)(r,"zhi-da-share","zhida"),(0,l._)(r,"zhi-da-folder","zhida_repository"),(0,l._)(r,"ailab","ailab"),r),tZ=k.forwardRef(function(e,t){var n,o=N()(e,["zvideoLinkCardProps"]),r=o.inEditor,a=o["data-text"],i=o.href,c=o.className,h=(0,u._)(o,["inEditor","data-text","href","className"]),m=(0,k.useRef)(),p=(0,f._)(tx(e),2),v=p[0],C=p[1],A=tB(e,m,(null==C?void 0:C.objectType)==="zvideo"),y=A.handleImageClick,x=A.handleInfoClick,w=(0,k.useCallback)(ek(t,v,m),[]),L=r?tp:b.ZAClick,_=r?null:{as:tp,shouldTrackShow:!0,zaType:"Block",zaAction:"OpenUrl",zaModuleId:"link_card",extra:{link:{url:i},configMap:{url:i,insert_card_content_type:tz[null==C?void 0:C.objectType]||"Unknown"}}},B=(0,g.tZ)(L,(0,d._)((0,s._)({},_),{url:i,data:C,onClick:x,onClickImage:y,language:e.language}));return(0,g.tZ)(eD,(0,d._)((0,s._)({ref:w,text:a,url:i,component:"a",className:I()(c,(n={},(0,l._)(n,"LinkCard--customStyle",!!(null==C?void 0:C.objectType)&&eK(C.objectType)),(0,l._)(n,"LinkCard--fileLinkCard",(null==C?void 0:C.objectType)==="file-link-card"),n))},h),{children:!!C&&B}))}),tI=function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var o=e.getAttribute(t),r=document.createElement("div");return r.className=n,e.parentNode.replaceChild(r,e),{data:{id:o},target:r}}},tS=function(e){return function(t){var n=(0,f._)((0,k.useState)(null),2),o=n[0],r=n[1],a=e.idAttr,i=e.selector,c=e.component,l=e.targetClassName,d=e.cardDataFilter,h=e.getCardProps,m=t.root,p=(0,u._)(t,["root"]),v=a&&i&&l&&(0,k.useCallback)(function(e){return tI({idAttr:a,targetClassName:l})(e)},[a,l]),A=(0,k.useMemo)(function(){return v?function(e){return Array.from(e.querySelectorAll(i)).map(v)}:C()},[v,m,i]);return(0,k.useEffect)(function(){if(m||i&&d){var e=(d||A)(m).map(function(e){var t=e.data,n=e.target,o=null;return"function"==typeof h&&(o=h(t)),(0,es.createPortal)((0,g.tZ)(c,(0,s._)({id:t.id},o,p),t.id),n)});e.length>0&&r(e)}},[m]),o}},tR=tS({cardDataFilter:function(e){return Array.from(e.querySelectorAll("a.LinkCard[data-draft-type=link-card]:not([data-is-ecommerce])")).map(function(e){var t=Array.from(e.attributes).reduce(function(e,t){return"class"===t.name?e.className=t.value:e[t.name]=t.value,e},{}),n=document.createElement("div");return n.className="RichText-LinkCardContainer",e.parentNode.replaceChild(n,e),{data:t,target:n}})},getCardProps:function(e){return e},component:tZ}),tT=function(e){return{".LinkCard.old":{position:"relative",display:"block",margin:"1em auto",width:390,boxSizing:"border-box",borderRadius:12,maxWidth:"100%",overflow:"hidden","&,&:hover":{textDecoration:"none",border:"none !important",color:"inherit !important"}},".LinkCard-ecommerceLoadingCard":{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",padding:12,borderRadius:"inherit",height:80,boxSizing:"border-box",background:e.colorMod(e.colors.GBK10A).alpha(.88),color:e.colors.GBK08A},".LinkCard-ecommerceLoadingCardAvatarWrapper":{width:60,height:60,background:e.colors.GBK09A,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,marginRight:10},".LinkCard-ecommerceLoadingCardNetwork":{width:20,height:20},".LinkCard-ecommerceLoadingCardLoadingbar":{height:60,flex:1,display:"flex",flexDirection:"column",span:{height:16,display:"inline-block",background:e.colors.GBK09A},"span:nth-of-type(1)":{width:60,marginBottom:4},"span:nth-of-type(2)":{width:127}}}},tN=function(e){var t={fontSize:13,height:18,lineHeight:"18px",color:e.colors.MapText06A,wordBreak:"break-all"};return{position:"relative",display:"flex",boxSizing:"border-box",flexDirection:"row",alignItems:"center",width:390,minHeight:90,borderRadius:8,maxWidth:"100%",overflow:"hidden",margin:"16px auto",padding:"12px",backgroundColor:e.colors.GBK10A,"&, &:hover":{textDecoration:"none",border:"none !important",color:"inherit !important"},"&.LinkCard--customStyle":{display:"block",padding:0,background:"linear-gradient(180deg, ".concat(e.colors.MapUIFrame99C," 0%, ").concat(e.colorMod(e.colors.MapUIFrame10A).alpha(.4)," 100%)"),"& .LinkCard-wrapper":{display:"flex",boxSizing:"border-box",flexDirection:"row",alignItems:"center",minHeight:90,padding:12},"& .LinkCard-image":{width:66,height:66,borderRadius:"6px",marginRight:12,marginLeft:0}},".LinkCard-contents":{display:"block",flex:"1 1 auto",position:"relative",".loading":{height:14,background:e.colors.GBK09A,borderRadius:7},"&.withTitle":{marginBottom:3}},".LinkCard-title":(0,d._)((0,s._)({display:"block",fontSize:15,fontWeight:500,lineHeight:1.4,marginBottom:4,color:e.colors.GBK02A},(0,eo.S)(1)),{"&.two-line":(0,s._)({lineHeight:"20px"},(0,eo.S)(2)),"&.loading":{marginBottom:8,width:"80%","&.withTitle":{marginBottom:6}},"&.loadingTitle":{marginBottom:5}}),".LinkCard-excerpt":(0,d._)((0,s._)((0,d._)((0,s._)({display:"block",textOverflow:"ellipsis"},t),{marginBottom:4}),(0,eo.S)(1)),{".LinkCard-author":{color:e.colors.GBK03A}}),".LinkCard-desc":(0,d._)((0,s._)({display:"block"},t),{".LinkCard-tag,.tag":{display:"inline-block",fontSize:11,marginLeft:6,padding:"0 4px",borderRadius:3,lineHeight:"16px",background:e.colors.MapUIFrame09A},"&.loading":{width:"40%"},svg:{marginRight:2}}),".LinkCard-desc-wrapper":{overflow:"visible",whiteSpace:"nowrap"},".LinkCard-desc-wrapper-line-clamp":(0,s._)({},(0,eo.S)(1)),".LinkCard-image":{flex:"0 0 auto",backgroundColor:e.colors.GBK09A,backgroundSize:"cover",backgroundPosition:"center",position:"relative",display:"block",width:66,height:66,marginRight:12,marginLeft:0,objectFit:"cover",borderRadius:"6px",overflow:"hidden","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.16,pointerEvents:"none",zIndex:0,background:e.colorMod(e.colors.MapUIFrame01A).alpha(.16)},"&.LinkCard-image--default":{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.colors.GBK09A,color:e.colors.GBK08A,svg:{color:e.colors.GBK06A}},img:{width:"100%",height:"100%",objectFit:"cover"},".LinkCard-image--video":{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",width:28,height:28,borderRadius:14,pointerEvents:"none",zIndex:1,background:"transparent",svg:{color:e.colors.MapText99B,position:"relative",left:"2px"}}},".LinkCard-richText":{".text":{color:e.colors.GBK03A},".bold":{fontWeight:e.fontWeights.bold},".tag":{marginLeft:8}},".LinkCard-richText object":{display:"flex",alignItems:"center"},".PodcastEpisodeLinkCard-desc":{display:"flex",alignItems:"center"},".PodcastEpisodeLinkCard-duration":(0,d._)((0,s._)({},t),{flex:"0 0 auto",marginRight:"15px"}),".PodcastEpisodeLinkCard-collect":{height:18,width:20,flex:"0 0 20px",marginLeft:"auto",color:e.colors.MapText05A,position:"relative"},".PodcastEpisodeLinkCard-collect-icon":{position:"absolute",bottom:0,right:0},".PodcastEpisodeLinkCard-play":{height:34,width:34,flex:"0 0 34px",marginLeft:"12px",color:e.colors.MapBrand,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.colorMod(e.colors.MapBrand).alpha(.08),alignSelf:"flex-end"},".PodcastEpisodeLinkCard-play-icon":{marginLeft:"2px"},".PodcastEpisodeLinkCard .LinkCard-contents":{display:"flex",justifyContent:"space-between",".LinkCard-contents-main":{flex:"1 1 auto",".LinkCard-title":{marginBottom:6}}},".ZhidaLinkCard":{display:"flex",flexDirection:"column",maxWidth:390,borderRadius:8,overflow:"hidden",border:"1px solid ".concat(e.colors.MapUIFrame09A)},".ZhidaLinkCard-content":{display:"block",padding:"12px 12px 10px"},".ZhidaLinkCard-header":{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:8},".ZhidaLinkCard-avatar-container":{display:"flex",alignItems:"center",flex:"0 0 auto"},".ZhidaLinkCard-avatar":{width:16,height:16,borderRadius:"100%",objectFit:"cover"},".ZhidaLinkCard-source":(0,s._)({marginLeft:6,fontSize:12,lineHeight:"16px",color:e.colors.MapText06A},(0,eo.S)(1)),".ZhidaLinkCard-answer":(0,s._)({display:"block",fontSize:13,lineHeight:"19px",color:e.colors.MapText04A},(0,eo.S)(3)),".ZhidaLinkCard-footer":{display:"flex",alignItems:"center",padding:"10px 12px",backgroundColor:e.colors.GBK10A,cursor:"pointer",lineHeight:"19px"},".ZhidaLinkCard-logo":{display:"flex",alignItems:"center",justifyContent:"center",fill:e.colors.MapAI},".ZhidaLinkCard-footer-text":{display:"block",fontSize:13,fontWeight:500,lineHeight:"19px",color:e.colors.GBK02A,marginLeft:6},".ZhidaLinkCard-arrow":{color:e.colors.MapAI,marginLeft:"auto"},".PinLinkCard":{".PinLinkCard-content":{fontWeight:400},".PinLinkCard-link":{display:"inline",color:e.colors.GBL07A,textDecoration:"none","&:hover":{borderBottom:"1px solid ".concat(e.colors.GBL07A)}},".PinLinkCard-link-icon":{display:"inline-flex",alignItems:"center",marginRight:2}},"&.LinkCard--fileLinkCard":{"& .LinkCard-image":{backgroundColor:e.colors.MapUIFrame99C}}}},tG=function(e){return{".LinkCard.new":tN(e)}},tE=function(e){return(0,k.forwardRef)(function(t,n){return(0,g.tZ)(e,(0,s._)({css:tG,ref:n},t))})},tP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,(0,s._)({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then(function(e){return e.json()})},tM=function(e){return(0,s._)({},tT(e),tG(e))},tD=function(e){return(0,s._)({},tG(e),tT(e))},tW=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.rootMargin,r=n.threshold,a=n.once,i=void 0===a||a;e=Array.isArray(e)?e:e?[e]:[];var c=(0,k.useRef)(null),l=(0,y.A)(t);(0,k.useEffect)(function(){if(e.length)return c.current&&e.forEach(function(e){return c.current.unobserve(e)}),c.current=new IntersectionObserver(function(e){e.forEach(function(e){e.intersectionRatio>0&&(l(e),i&&c.current.unobserve(e.target))})},{rootMargin:o,threshold:r}),e.forEach(function(e){return c.current.observe(e)}),function(){e.forEach(function(e){return c.current.unobserve(e)})}},[e,o,JSON.stringify(r),i])},tK=n(18837),tU="function"==typeof Image,tX={},tH=tU?tK(function(e){return new Promise(function(t){var n,o;return n=function(e,n){tX[e]=n,t(n)},void((o=new Image).onload=function(){var t=o.width>0&&o.height>0;n(e,t)},o.onerror=function(){n(e,!1)},o.src="data:image/webp;base64,"+({lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"})[e])})}):function(){return Promise.resolve(!1)},tV=function(e){var t=tX[e],n=(0,f._)((0,k.useState)(t),2),o=n[0],r=n[1];return tU&&void 0===t&&tH(e).then(r),o},tj={class:"className"},tq=(0,k.forwardRef)(function(e,t){var n=e.node,o=e.tagName,r=(0,u._)(e,["node","tagName"]),a=(0,k.useMemo)(function(){return Array.from(n.attributes).reduce(function(e,t){var n=tj[t.name]||t.name;return"style"!==n&&(e[n]=t.value),e},{})},[n]);return(0,k.createElement)(o||n.tagName.toLowerCase(),(0,d._)((0,s._)({},a,r),{ref:t}))}),tF=eu()(function(){return/Mobile/.test(navigator.userAgent)}),tO=function(e){var t=e.image,n=e.enableWebP,o=e.size,r=e.quality,a=t.dataset,i=a.actualsrc,c=a.actualgif;return n&&c&&c.match(/.gif$/i)?i:(o||(o="720w",!tF()&&window.devicePixelRatio>=1.5&&(o="1440w"),tF()&&window.devicePixelRatio*window.innerWidth>=1080&&(o="1440w")),(0,G.imgUrl)(i,{quality:void 0===r?80:r,size:o}))};function tQ(e,t){A.Z.trackMonitor({name:t},{monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}})}var tY=function(e){var t=e.onLoadStateChange,n=e.onImageLoaded,o=e.enableWebP,r=e.size,a=e.quality;return function(e){var i=e.target,c=tO({image:i,enableWebP:o,size:r,quality:a});if(o&&(c=c.replace(/\.(jpg|png|jpeg|gif)/,".webp")),i.dataset.rawheight&&!i.getAttribute("height")&&i.setAttribute("height",i.dataset.rawheight),i.src=c,i.complete){i.dataset.lazyStatus="ok",null==n||n();return}t&&i.addEventListener("loadstart",function(){t("loadstart",c)}),i.dataset.lazyStatus="loading";var l=setTimeout(function(){i.complete||tQ(i.url,"image_web_timeout_image"),t&&t("timeout",c)},15e3);i.addEventListener("load",function(){i.dataset.lazyStatus="ok",clearTimeout(l),tQ(i.url,"image_web_success_image"),t&&t("load",c),null==n||n()}),i.addEventListener("error",function(){clearTimeout(l),tQ(i.url,"image_web_fail_image"),t&&t("error",c)})}},tJ=function(e){var t=e.node,n=e.useWebP,o=e.onLoadStateChange,r=e.size,a=e.quality,i=e.index,c=t.classList.contains("lazy"),l=tV("lossless"),s=(0,f._)((0,x.Y)({once:!0,rootMargin:"600px"}),3),d=s[0],u=s[1],h=s[2],m=(0,f._)((0,w.k)(!c),2),p=m[0],v=m[1],C=(0,y.A)(v.on),A=(0,y.A)(tY({onLoadStateChange:o,onImageLoaded:C,enableWebP:l&&(void 0===n||n),size:r,quality:a}));(0,k.useEffect)(function(){u&&A(h)},[h,u,A]);var _=(0,k.useMemo)(function(){return{elementLocation:{type:"Image",moduleId:"image_card",moduleIndex:i}}},[i]),B=(0,b.useShow)(_),z=(0,L.q)(p?B:void 0,c?d:void 0),Z=(0,b.useTracker)().trackEvent,I=(0,y.A)(function(){return p&&Z(_)});return(0,g.tZ)(tq,{node:t,ref:z,onClick:I})},t$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useWebP,o=t.disabled,r=void 0!==o&&o,a=t.onLoadStateChange,i=t.size,c=t.quality,l=(0,f._)((0,k.useState)([]),2),s=l[0],d=l[1];tW(s,tY({onLoadStateChange:a,enableWebP:tV("lossless")&&(void 0===n||n),size:i,quality:c}),{rootMargin:"300px"}),(0,k.useEffect)(function(){if(e&&!r){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&d(t)}},[e,r])},t0=function(e){return t$(e.root,e.options),null},t1=function(e,t){A.Z.trackEvent(e,{action:"StatusReport",element:"Card"},{status:{result:t}})},t2=function(e,t){var n,o;null==window||null===(n=window.Raven)||void 0===n||null===(o=n.captureException)||void 0===o||o.call(n,e,{fingerprint:["gif2mp4"],extra:t})},t4=function(e){var t=e.src,n=e.useWebP,o=void 0===n?"auto":n,r=e.useMp4,a=void 0!==r&&r,i=e.onRef,c=e.onLoadStateChange,l=e.onPlayChange,d=(0,u._)(e,["src","useWebP","useMp4","onRef","onLoadStateChange","onPlayChange"]),h=(0,f._)((0,k.useState)(""),2),m=h[0],p=h[1],v=(0,f._)((0,k.useState)(null),2),b=v[0],y=v[1],x=(0,f._)((0,k.useState)(Date.now()),2),w=x[0],L=x[1],B=(0,f._)((0,k.useState)(!1),2),z=B[0],Z=B[1],I=(0,f._)((0,k.useState)(null),2),S=I[0],R=I[1],T=tV("animation"),N=(0,k.useCallback)(function(){var e=((0,ef.imgPathParse)(t)||{}).hash;a&&(0,el.y3)(b,function(){fetch("https://api.zhihu.com/gif2mp4/".concat(e),{credentials:"include",headers:{"X-Requested-With":"Fetch"}}).then(function(e){return e.json()}).then(function(e){var t,n,o=e.playlist,r=(null==o?void 0:null===(t=o.SD)||void 0===t?void 0:t.play_url)||(null==o?void 0:null===(n=o.LD)||void 0===n?void 0:n.play_url);r&&eh.ZP.increment("Gif2Mp4Player.mp4.fetch.success.count"),p(r)}).catch(C())})},[b,t,a]);(0,k.useEffect)(N,[t,a,b]),(0,k.useEffect)(function(){b&&A.Z.setModule(b,{module:"GifItem"})},[b]),tW(b,function(){A.Z.trackCardShow(b,{element:"Card"})}),(0,_.K)(function(){eh.ZP.increment("Gif2Mp4Player.mp4.play.failure.count"),t2(Error("Gif2Mp4 play timeout"),{src:t,videoUrl:m}),Z(!1)},z?2e3:null),(0,_.K)(function(){eh.ZP.increment("Gif2Mp4Player.mp4.play.success.count"),eh.ZP.timing("Gif2Mp4Player.mp4.first_frame_time",Date.now()-w-100),Z(!1),R(null)},S);var G=(0,ef.default)(t,{extension:("auto"===o?T:o)?"webp":"gif"});return(0,g.tZ)(ep.ZP,(0,s._)({videoUrl:m,src:G,onRef:(0,k.useCallback)(ek(i,y),[]),onPlayChange:function(e){null==l||l(e),e||(L(Date.now()),m&&(eh.ZP.increment("Gif2Mp4Player.mp4.click.count"),Z(!0)),A.Z.trackEvent(b,{action:"Click",element:"Image"}))},onLoadStart:function(){if(m){var e=em.parse(m).expiration;e&&Number(e)<Date.now()/1e3+900&&N()}L(Date.now()),c&&c("loadstart",G)},onSuccess:function(){t1(b,"Success"),m?z&&R(100):eh.ZP.timing("Gif2Mp4Player.gif.first_frame_time",Date.now()-w),c&&c("load",G)},onFailed:function(e){t1(b,"Fail"),m&&(z&&(eh.ZP.increment("Gif2Mp4Player.mp4.play.failure.count"),Z(!1),R(null)),t2(e,{videoUrl:m,src:t})),c&&c("error",G)}},d))},t3=function(e){var t=e.dataset,n=t.thumbnail,o=t.size,r=t.rawheight;return{src:n,poster:n,size:o,width:t.rawwidth,height:r}},t6=function(e){var t=e.node,n=e.Component,o=void 0===n?t4:n,r=(0,k.useMemo)(function(){return t3(t)},[t]);return(0,g.tZ)(o,(0,s._)({},r))},t7=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Component,o=void 0===n?t4:n,r=(0,f._)((0,k.useState)(null),2),a=r[0],i=r[1];return(0,k.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll("img.origin_image[data-thumbnail],img.content_image[data-thumbnail]"));t.length&&i(t.map(function(e,t){var n=document.createElement("div");return n.className="RichText-gifPlaceholder",e.parentNode.replaceChild(n,e),(0,es.createPortal)((0,g.tZ)(t6,{node:e,Component:o},t),n)}))}},[e]),a},t8=function(e){return t7(e.root,e.options)},t9=function(e){var t=e.root,n=e.ConditionalImage,o=(0,f._)((0,k.useState)([]),2),r=o[0],a=o[1];return(0,k.useEffect)(function(){if(t){var e=Array.from(t.querySelectorAll("img.origin_image,img.content_image"));e.length&&a(e.map(function(e,t){var o=document.createElement("div");return e.parentNode.replaceChild(o,e),(0,es.createPortal)((0,g.tZ)(n,{index:t,node:e},t),o)}))}},[t]),r},t5=ev([function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).linkCardInfo;return e?e.replace(e9,function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=(0,$.f)(n,{decodeValue:!0}),a=r.target,i=r.href,c=void 0===i?"":i,l=r["data-image"],d=r["data-image-width"],u=r["data-image-height"],f=r["data-entity-type"],h=r["data-entity-data"],m=r["data-size"];if(r["data-is-ecommerce"])return e;var p=o.replace(/<[^>]*>/g,"");p=(0,$.p)(p);var k=t?e4:eD;return(0,R.renderToStaticMarkup)((0,g.tZ)(k,(0,s._)({text:p,url:c,target:void 0===a?"_blank":a,image:l,imageWidth:d,imageHeight:u,entityType:f,entityData:e3(h),size:m},t&&{data:t[c]})))}):e},function(e){return e?e.replace(te,function(e,t){var n=(0,$.f)(t,{decodeValue:!0}),o=n["data-draft-type"],r=n.href,a=n.class;return"link-card"!==o?e:(0,R.renderToStaticMarkup)((0,g.tZ)(e5,{url:r,className:et()(a,{old:!0,new:!1,static:!1})}))}):e}]),ne=(0,k.forwardRef)(function(e,t){var n=(0,f._)((0,k.useState)(null),2),o=n[0],r=n[1],a=e.html,i=e.css,c=e.options,l=void 0===c?{}:c,d=e.ConditionalImage,h=e.linkCardInfo,m=e.language,p=(0,u._)(e,["html","css","options","ConditionalImage","linkCardInfo","language"]),v=l.lazyLoadImageOptions,C=l.useGifPortalOption,A=(0,u._)(l,["lazyLoadImageOptions","useGifPortalOption"]);eb(o);var b=[tM,tD,i].reduce(function(e,t){return(t||(t={}),"function"==typeof t)?function(n){return(0,s._)({},e(n),t(n))}:function(n){return(0,s._)({},e(n),t)}},function(e){return{}}),y=(0,k.useCallback)(ek(t,r),[]);return(0,g.BX)(k.Fragment,{children:[!h&&(0,g.tZ)(tR,{css:tD,root:o,language:m,enableNewCardStyle:!0}),d?(0,g.tZ)(t9,{root:o,ConditionalImage:d}):(0,g.BX)(g.HY,{children:[(0,g.tZ)(t0,{root:o,options:v}),(0,g.tZ)(t8,{root:o,options:C})]}),(0,g.tZ)(e_,{root:o}),(0,g.tZ)(eP,(0,s._)({ref:y,html:t5(a,{linkCardInfo:h}),css:b,root:o,options:A},p))]})}),nt=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g}}]);
//# sourceMappingURL=lib-0e5ce61e.app.f2dfb93f9d33860c2652.js.map