"use strict";(self.webpackChunkheifetz=self.webpackChunkheifetz||[]).push([[4260],{26649:function(e,t,n){n.d(t,{S1:function(){return F},y0:function(){return W}});var o=n(9338),r=n(22107),a=n(94707),i=n(87320),s=n(86325),c=n(15030),l=n(49899),u=n(85626),h=n(30971),f=n(21078),p=n(90829);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function d(){return(d=(0,o._)(function(e){var t,n;return(0,h.__generator)(this,function(o){return t=e.entry,n=e.remoteEntryExports,[2,new Promise(function(e,o){try{n?e(n):Function("callbacks",'import("'.concat(t,'").then(callbacks[0]).catch(callbacks[1])'))([e,o])}catch(e){o(e)}})]})})).apply(this,arguments)}function y(){return(y=(0,o._)(function(e){var t,n,o,r,a;return(0,h.__generator)(this,function(i){return(t=e.name,n=e.globalName,o=e.entry,r=e.createScriptHook,a=(0,f.c)(t,n).entryExports)?[2,a]:"undefined"==typeof document?[2,(0,p.qN)(o,{attrs:{name:t,globalName:n},createScriptHook:r}).then(function(){var e=(0,f.c)(t,n),r=e.remoteEntryKey,a=e.entryExports;return(0,f.d)(a,"\n        Unable to use the ".concat(t,"'s '").concat(o,"' URL with ").concat(r,"'s globalName to get remoteEntry exports.\n        Possible reasons could be:\n\n        1. '").concat(o,"' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n        2. ").concat(r," cannot be used to get remoteEntry exports in the window object.\n      ")),a}).catch(function(e){return e})]:[2,(0,p.ve)(o,{attrs:{},createScriptHook:r}).then(function(){var e=(0,f.c)(t,n),r=e.remoteEntryKey,a=e.entryExports;return(0,f.d)(a,"\n      Unable to use the ".concat(t,"'s '").concat(o,"' URL with ").concat(r,"'s globalName to get remoteEntry exports.\n      Possible reasons could be:\n\n      1. '").concat(o,"' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n      2. ").concat(r," cannot be used to get remoteEntry exports in the window object.\n    ")),a}).catch(function(e){return e})]})})).apply(this,arguments)}function v(e){var t=e.entry,n=e.name;return(0,p.M8)(n,t)}function g(e){return b.apply(this,arguments)}function b(){return(b=(0,o._)(function(e){var t,n,o,r,a,i,s,c;return(0,h.__generator)(this,function(l){return(t=e.remoteEntryExports,n=e.remoteInfo,o=e.createScriptHook,r=n.entry,a=n.name,i=n.type,s=n.entryGlobalName,c=v(n),t)?[2,t]:(f.a[c]||("esm"===i?f.a[c]=function(e){return d.apply(this,arguments)}({entry:r,remoteEntryExports:t}):f.a[c]=function(e){return y.apply(this,arguments)}({name:a,globalName:s,entry:r,createScriptHook:o})),[2,f.a[c]])})})).apply(this,arguments)}function S(e){return m({},e,{entry:"entry"in e?e.entry:"",type:e.type||f.D,entryGlobalName:e.entryGlobalName||e.name,shareScope:e.shareScope||f.b})}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var _=function(){function e(t){var n=t.remoteInfo,o=t.host;(0,r._)(this,e),this.inited=!1,this.lib=void 0,this.remoteInfo=n,this.host=o}return(0,a._)(e,[{key:"getEntry",value:function(){var e=this;return(0,o._)(function(){var t;return(0,h.__generator)(this,function(n){switch(n.label){case 0:if(e.remoteEntryExports)return[2,e.remoteEntryExports];return[4,g({remoteInfo:e.remoteInfo,remoteEntryExports:e.remoteEntryExports,createScriptHook:function(t){var n=e.host.loaderHook.lifecycle.createScript.emit({url:t});if("undefined"==typeof document||(0,c._)(n,HTMLScriptElement))return n}})];case 1:return t=n.sent(),(0,f.d)(t,"remoteEntryExports is undefined \n ".concat((0,f.s)(e.remoteInfo))),e.remoteEntryExports=t,[2,e.remoteEntryExports]}})})()}},{key:"get",value:function(e,t){var n=this;return(0,o._)(function(){var o,r,a,i,s,c,l,u,p,m;return(0,h.__generator)(this,function(h){switch(h.label){case 0:return r=void 0===(o=(t||{loadFactory:!0}).loadFactory)||o,[4,n.getEntry()];case 1:if(a=h.sent(),n.inited)return[3,5];return(i=n.host.shareScopeMap)[s=n.remoteInfo.shareScope||"default"]||(i[s]={}),c=i[s],l=[],Object.defineProperty(u={version:n.remoteInfo.version||""},"hostId",{value:n.host.options.id||n.host.name,enumerable:!1}),[4,n.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:c,remoteEntryInitOptions:u,initScope:l,remoteInfo:n.remoteInfo,origin:n.host})];case 2:return p=h.sent(),[4,a.init(p.shareScope,p.initScope,p.remoteEntryInitOptions)];case 3:return h.sent(),[4,n.host.hooks.lifecycle.initContainer.emit(k({},p,{remoteEntryExports:a}))];case 4:h.sent(),h.label=5;case 5:return n.lib=a,n.inited=!0,[4,a.get(e)];case 6:if(m=h.sent(),(0,f.d)(m,"".concat((0,f.e)(n.remoteInfo)," remote don't export ").concat(e,".")),!r)return[2,m];return[4,m()];case 7:return[2,h.sent()]}})})()}}]),e}(),E=function(){function e(t){(0,r._)(this,e),this.type="",this.listeners=new Set,t&&(this.type=t)}return(0,a._)(e,[{key:"on",value:function(e){"function"==typeof e&&this.listeners.add(e)}},{key:"once",value:function(e){var t=this;this.on(function n(){for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return t.remove(n),e.apply(null,r)})}},{key:"emit",value:function(){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.listeners.size>0&&this.listeners.forEach(function(t){e=t.apply(void 0,(0,l._)(n))}),e}},{key:"remove",value:function(e){this.listeners.delete(e)}},{key:"removeAll",value:function(){this.listeners.clear()}}]),e}(),w=function(e){(0,s._)(n,e);var t=(0,u._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,a._)(n,[{key:"emit",value:function(){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=Array.from(this.listeners);if(r.length>0){var a=0,i=function(e){return!1!==e&&(a<r.length?Promise.resolve(r[a++].apply(null,n)).then(i):e)};e=i()}return Promise.resolve(e)}}]),n}(E);function I(e,t){if(!(0,f.i)(t))return!1;if(e!==t){for(var n in e)if(!(n in t))return!1}return!0}var O=function(e){(0,s._)(n,e);var t=(0,u._)(n);function n(e){var o;return(0,r._)(this,n),(o=t.call(this)).onerror=f.f,o.type=e,o}return(0,a._)(n,[{key:"emit",value:function(e){(0,f.i)(e)||(0,f.f)('The data for the "'.concat(this.type,'" hook should be an object.'));var t=!0,n=!1,o=void 0;try{for(var r,a=this.listeners[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value;try{var s=i(e);if(I(e,s))e=s;else{this.onerror('A plugin returned an unacceptable value for the "'.concat(this.type,'" type.'));break}}catch(e){(0,f.w)(e),this.onerror(e)}}}catch(e){n=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}return e}}]),n}(E),R=function(e){(0,s._)(n,e);var t=(0,u._)(n);function n(e){var o;return(0,r._)(this,n),(o=t.call(this)).onerror=f.f,o.type=e,o}return(0,a._)(n,[{key:"emit",value:function(e){var t=this;(0,f.i)(e)||(0,f.f)('The response data for the "'.concat(this.type,'" hook must be an object.'));var n=Array.from(this.listeners);if(n.length>0){var o=0,r=function(n){return(0,f.w)(n),t.onerror(n),e},a=function(i){if(I(e,i)){if(e=i,o<n.length)try{return Promise.resolve(n[o++](e)).then(a,r)}catch(e){return r(e)}}else t.onerror('A plugin returned an incorrect value for the "'.concat(t.type,'" type.'));return e};return Promise.resolve(a(e))}return Promise.resolve(e)}}]),n}(E),x=function(){function e(t){(0,r._)(this,e),this.registerPlugins={},this.lifecycle=t,this.lifecycleKeys=Object.keys(t)}return(0,a._)(e,[{key:"applyPlugin",value:function(e){var t=this;(0,f.d)((0,f.h)(e),"Plugin configuration is invalid.");var n=e.name;(0,f.d)(n,"A name must be provided by the plugin."),this.registerPlugins[n]||(this.registerPlugins[n]=e,Object.keys(this.lifecycle).forEach(function(n){var o=e[n];o&&t.lifecycle[n].on(o)}))}},{key:"removePlugin",value:function(e){var t=this;(0,f.d)(e,"A name is required.");var n=this.registerPlugins[e];(0,f.d)(n,'The plugin "'.concat(e,'" is not registered.')),Object.keys(n).forEach(function(e){"name"!==e&&t.lifecycle[e].remove(n[e])})}},{key:"inherit",value:function(e){var t=e.lifecycle,n=e.registerPlugins,o=this;Object.keys(t).forEach(function(e){(0,f.d)(!o.lifecycle[e],'The hook "'.concat(e,'" has a conflict and cannot be inherited.')),o.lifecycle[e]=t[e]}),Object.keys(n).forEach(function(e){(0,f.d)(!o.registerPlugins[e],'The plugin "'.concat(e,'" has a conflict and cannot be inherited.')),o.applyPlugin(n[e])})}}]),e}();function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function P(e){return A({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},e)}function M(e,t,n){var o=n.cssAssets,r=n.jsAssetsWithoutEntry,a=n.entryAssets;if(t.options.inBrowser){a.forEach(function(n){var o=n.moduleInfo,r=t.moduleCache.get(e.name);r?g({remoteInfo:o,remoteEntryExports:r.remoteEntryExports,createScriptHook:function(e){var n=t.loaderHook.lifecycle.createScript.emit({url:e});if((0,c._)(n,HTMLScriptElement))return n}}):g({remoteInfo:o,remoteEntryExports:void 0,createScriptHook:function(e){var n=t.loaderHook.lifecycle.createScript.emit({url:e});if((0,c._)(n,HTMLScriptElement))return n}})});var i=document.createDocumentFragment();o.forEach(function(e){var n=(0,p.EW)(e,function(){},{rel:"preload",as:"style"},function(e){var n=t.loaderHook.lifecycle.createLink.emit({url:e});if((0,c._)(n,HTMLLinkElement))return n}),o=n.link;n.needAttach&&i.appendChild(o)}),r.forEach(function(e){var n=(0,p.EW)(e,function(){},{rel:"preload",as:"script"},function(e){var n=t.loaderHook.lifecycle.createLink.emit({url:e});if((0,c._)(n,HTMLLinkElement))return n}),o=n.link;n.needAttach&&document.head.appendChild(o)}),document.head.appendChild(i)}}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function H(e,t){"remoteEntry"in t&&t.remoteEntry||(0,f.f)("The attribute remoteEntry of ".concat(name," must not be undefined."));var n=t.remoteEntry,o=(0,p.vM)(t,n);e.type=t.remoteEntryType,e.entryGlobalName=t.globalName,e.entry=o,e.version=t.version,e.buildVersion=t.buildVersion}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var C=function(){function e(t){(0,r._)(this,e),this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new x({beforeLoadRemoteSnapshot:new w("beforeLoadRemoteSnapshot"),loadSnapshot:new R("loadGlobalSnapshot"),loadRemoteSnapshot:new R("loadRemoteSnapshot")}),this.manifestLoading=f.G.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=t,this.loaderHook=t.loaderHook}return(0,a._)(e,[{key:"loadSnapshot",value:function(e){var t=this;return(0,o._)(function(){var n,o,r,a,i,s;return(0,h.__generator)(this,function(c){switch(c.label){case 0:return n=t.HostInstance.options,r=(o=t.getGlobalRemoteInfo(e)).hostGlobalSnapshot,a=o.remoteSnapshot,i=o.globalSnapshot,[4,t.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:e,hostGlobalSnapshot:r,remoteSnapshot:a,globalSnapshot:i})];case 1:return[2,{remoteSnapshot:(s=c.sent()).remoteSnapshot,globalSnapshot:s.globalSnapshot}]}})})()}},{key:"loadRemoteSnapshotInfo",value:function(e){var t=this;return(0,o._)(function(){var n,o,r,a,s,c,l,u,m,d,y,v,g;return(0,h.__generator)(this,function(h){switch(h.label){case 0:return n=t.HostInstance.options,[4,t.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:n,moduleInfo:e})];case 1:return h.sent(),(o=(0,f.q)({name:t.HostInstance.options.name,version:t.HostInstance.options.version}))||(o={version:t.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},(0,f.r)((0,i._)({},t.HostInstance.options.name,o))),o&&"remotesInfo"in o&&!(0,f.l)(o.remotesInfo,e.name).value&&("version"in e||"entry"in e)&&(o.remotesInfo=j({},null==o?void 0:o.remotesInfo,(0,i._)({},e.name,{matchedVersion:"version"in e?e.version:e.entry}))),a=(r=t.getGlobalRemoteInfo(e)).hostGlobalSnapshot,s=r.remoteSnapshot,c=r.globalSnapshot,[4,t.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:e,hostGlobalSnapshot:a,remoteSnapshot:s,globalSnapshot:c})];case 2:if(u=(l=h.sent()).remoteSnapshot,m=l.globalSnapshot,!u)return[3,7];if(!(0,p.xw)(u))return[3,4];return[4,t.getManifestJson(u.remoteEntry,e,{})];case 3:return d=h.sent(),y=(0,f.t)(j({},e,{entry:u.remoteEntry}),d),[2,{remoteSnapshot:d,globalSnapshot:y}];case 4:return[4,t.hooks.lifecycle.loadRemoteSnapshot.emit({options:t.HostInstance.options,moduleInfo:e,remoteSnapshot:u,from:"global"})];case 5:return[2,{remoteSnapshot:h.sent().remoteSnapshot,globalSnapshot:m}];case 6:return[3,11];case 7:if(!(0,f.j)(e))return[3,10];return[4,t.getManifestJson(e.entry,e,{})];case 8:return v=h.sent(),g=(0,f.t)(e,v),[4,t.hooks.lifecycle.loadRemoteSnapshot.emit({options:t.HostInstance.options,moduleInfo:e,remoteSnapshot:v,from:"global"})];case 9:return[2,{remoteSnapshot:h.sent().remoteSnapshot,globalSnapshot:g}];case 10:(0,f.f)("\n          Cannot get remoteSnapshot with the name: '".concat(e.name,"', version: '").concat(e.version,"' from __FEDERATION__.moduleInfo. The following reasons may be causing the problem:\n\n          1. The Deploy platform did not deliver the correct data. You can use __FEDERATION__.moduleInfo to check the remoteInfo.\n\n          2. The remote '").concat(e.name,"' version '").concat(e.version,"' is not released.\n\n          The transformed module info: ").concat(JSON.stringify(m),"\n        ")),h.label=11;case 11:return[2]}})})()}},{key:"getGlobalRemoteInfo",value:function(e){var t=(0,f.q)({name:this.HostInstance.options.name,version:this.HostInstance.options.version}),n=t&&"remotesInfo"in t&&t.remotesInfo&&(0,f.l)(t.remotesInfo,e.name).value;return n&&n.matchedVersion?{hostGlobalSnapshot:t,globalSnapshot:(0,f.u)(),remoteSnapshot:(0,f.q)({name:e.name,version:n.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:(0,f.u)(),remoteSnapshot:(0,f.q)({name:e.name,version:"version"in e?e.version:void 0})}}},{key:"getManifestJson",value:function(e,t,n){var r=this;return(0,o._)(function(){return(0,h.__generator)(this,function(n){var a,i;return a=(0,o._)(function(){var n,o,a;return(0,h.__generator)(this,function(i){switch(i.label){case 0:if(n=r.manifestCache.get(e))return[2,n];i.label=1;case 1:return i.trys.push([1,6,,7]),[4,r.loaderHook.lifecycle.fetch.emit(e,{})];case 2:if(!(!(o=i.sent())||!(0,c._)(o,Response)))return[3,4];return[4,fetch(e,{})];case 3:o=i.sent(),i.label=4;case 4:return[4,o.json()];case 5:return n=i.sent(),(0,f.d)(n.metaData&&n.exposes&&n.shared,"".concat(e," is not a federation manifest")),r.manifestCache.set(e,n),[2,n];case 6:return a=i.sent(),(0,f.f)("Failed to get manifestJson for ".concat(t.name,". The manifest URL is ").concat(e,". Please ensure that the manifestUrl is accessible.\n          \n Error message:\n          \n ").concat(a)),[3,7];case 7:return[2]}})}),i=(0,o._)(function(){var n,o;return(0,h.__generator)(this,function(i){switch(i.label){case 0:return[4,function(){return a.apply(this,arguments)}()];case 1:return n=i.sent(),o=(0,p.S5)(n,{version:e}),[4,r.hooks.lifecycle.loadRemoteSnapshot.emit({options:r.HostInstance.options,moduleInfo:t,manifestJson:n,remoteSnapshot:o,manifestUrl:e,from:"manifest"})];case 2:return[2,i.sent().remoteSnapshot]}})}),r.manifestLoading[e]||(r.manifestLoading[e]=(function(){return i.apply(this,arguments)})().then(function(e){return e})),[2,r.manifestLoading[e]]})})()}}]),e}();function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var L=function(){function e(t){(0,r._)(this,e),this.hooks=new x({beforeInit:new O("beforeInit"),init:new E,beforeRequest:new R("beforeRequest"),afterResolve:new R("afterResolve"),beforeInitContainer:new R("beforeInitContainer"),initContainerShareScopeMap:new R("initContainer"),initContainer:new R("initContainer"),onLoad:new w("onLoad"),handlePreloadModule:new E("handlePreloadModule"),errorLoadRemote:new w("errorLoadRemote"),beforeLoadShare:new R("beforeLoadShare"),loadShare:new w,resolveShare:new O("resolveShare"),beforePreloadRemote:new w,generatePreloadAssets:new w("generatePreloadAssets"),afterPreloadRemote:new w}),this.version="0.1.7",this.moduleCache=new Map,this.loaderHook=new x({getModuleInfo:new E,createScript:new E,createLink:new E,fetch:new w("fetch")});var n={id:(0,f.z)(),name:t.name,plugins:[{name:"snapshot-plugin",afterResolve:function(e){return(0,o._)(function(){var t,n,o,r,a,i,s,c,l,u;return(0,h.__generator)(this,function(h){switch(h.label){case 0:if(t=e.remote,n=e.pkgNameOrAlias,o=e.expose,r=e.origin,a=e.remoteInfo,!(!(0,f.j)(t)||!(0,f.k)(t)))return[3,3];return[4,r.snapshotHandler.loadRemoteSnapshotInfo(t)];case 1:return s=(i=h.sent()).remoteSnapshot,c=i.globalSnapshot,H(a,s),l={remote:t,preloadConfig:{nameOrAlias:n,exposes:[o],resourceCategory:"sync",share:!1,depsRemote:!1}},[4,r.hooks.lifecycle.generatePreloadAssets.emit({origin:r,preloadOptions:l,remoteInfo:a,remote:t,remoteSnapshot:s,globalSnapshot:c})];case 2:return(u=h.sent())&&M(a,r,u),[2,N({},e,{remoteSnapshot:s})];case 3:return[2,e]}})})()}},{name:"generate-preload-assets-plugin",generatePreloadAssets:function(e){return(0,o._)(function(){var t,n,o,r,a,i;return(0,h.__generator)(this,function(s){return(t=e.origin,n=e.preloadOptions,o=e.remoteInfo,r=e.remote,a=e.globalSnapshot,i=e.remoteSnapshot,(0,f.j)(r)&&(0,f.k)(r))?[2,{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:r.name,url:r.entry,moduleInfo:{name:o.name,entry:r.entry,type:"global",entryGlobalName:"",shareScope:""}}]}]:(H(o,i),[2,function(e,t,n,o,r){var a=[],i=[],s=[],c=new Set,u=new Set,h=e.options,m=t.preloadConfig,d=m.depsRemote;if(function e(t,n,o,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5?arguments[5]:void 0,s=(0,f.e)(n),c=(0,f.l)(t,s).value,l=i||c;if(l&&!(0,p.xw)(l)&&(o(l,n,r),l.remotesInfo)){var u=Object.keys(l.remotesInfo),h=!0,m=!1,d=void 0;try{for(var y,v=u[Symbol.iterator]();!(h=(y=v.next()).done);h=!0){var g=y.value;if(!a[g]){a[g]=!0;var b=function(e){var t=e.split(":");return 1===t.length?{name:t[0],version:void 0}:2===t.length?{name:t[0],version:t[1]}:{name:t[1],version:t[2]}}(g),S=l.remotesInfo[g];e(t,{name:b.name,version:S.matchedVersion},o,!1,a,void 0)}}}catch(e){m=!0,d=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw d}}}}(o,n,function(t,n,o){var r=function(e){var n=e.map(function(e){return(0,p.vM)(t,e)});return S.filter?n.filter(S.filter):n};if(o)S=m;else if(Array.isArray(d)){var c=d.find(function(e){return e.nameOrAlias===n.name||e.nameOrAlias===n.alias});if(!c)return;S=P(c)}else{if(!0!==d)return;S=m}var u=(0,p.vM)(t,"remoteEntry"in t?t.remoteEntry:"");u&&s.push({name:n.name,moduleInfo:{name:n.name,entry:u,type:"remoteEntryType"in t?t.remoteEntryType:"global",entryGlobalName:"globalName"in t?t.globalName:n.name,shareScope:"",version:"version"in t?t.version:void 0},url:u});var h="modules"in t?t.modules:[],y=(b=S.exposes)?b.map(function(e){return"."===e?e:e.startsWith("./")?e.replace("./",""):e}):[];if(y.length&&"modules"in t&&(h=null==t?void 0:null==(k=t.modules)?void 0:k.reduce(function(e,t){return(null==y?void 0:y.indexOf(t.moduleName))!==-1&&e.push(t),e},[])),h)for(var v=h.length,g=0;g<v;g++){var b,S,k,_=h[g],E="".concat(n.name,"/").concat(_.moduleName);e.hooks.lifecycle.handlePreloadModule.emit({id:"."===_.moduleName?n.name:E,name:n.name,remoteSnapshot:t,preloadConfig:S,remote:n,origin:e}),(0,f.m)(E)||("all"===S.resourceCategory?(a.push.apply(a,(0,l._)(r(_.assets.css.async))),a.push.apply(a,(0,l._)(r(_.assets.css.sync))),i.push.apply(i,(0,l._)(r(_.assets.js.async))),i.push.apply(i,(0,l._)(r(_.assets.js.sync)))):(S.resourceCategory="sync",a.push.apply(a,(0,l._)(r(_.assets.css.sync))),i.push.apply(i,(0,l._)(r(_.assets.js.sync)))),(0,f.n)(E))}},!0,{},r),r.shared){var y=function(t,n){var o=(0,f.o)(e.shareScopeMap,n.sharedName,t,e.hooks.lifecycle.resolveShare);o&&"function"==typeof o.lib&&(n.assets.js.sync.forEach(function(e){c.add(e)}),n.assets.css.sync.forEach(function(e){u.add(e)}))};r.shared.forEach(function(e){var t,n=null==(t=h.shared)?void 0:t[e.sharedName];if(n){var o=e.version?n.find(function(t){return t.version===e.version}):n;o&&(0,f.p)(o).forEach(function(t){y(t,e)})}})}var v=i.filter(function(e){return!c.has(e)});return{cssAssets:a.filter(function(e){return!u.has(e)}),jsAssetsWithoutEntry:v,entryAssets:s}}(t,n,o,a,i)])})})()}}],remotes:[],shared:{},inBrowser:(0,f.A)()};this.name=t.name,this.options=n,this.shareScopeMap={},this._setGlobalShareScopeMap(),this.snapshotHandler=new C(this),this.registerPlugins((0,l._)(n.plugins).concat((0,l._)(t.plugins||[]))),this.options=this.formatOptions(n,t)}return(0,a._)(e,[{key:"_setGlobalShareScopeMap",value:function(){var e=(0,f.v)(),t=this.options.id||this.options.name;t&&!e[t]&&(e[t]=this.shareScopeMap)}},{key:"initOptions",value:function(e){this.registerPlugins(e.plugins);var t=this.formatOptions(this.options,e);return this.options=t,t}},{key:"loadShare",value:function(e,t){var n=this;return(0,o._)(function(){var r,a,i,s,c,l,u;return(0,h.__generator)(this,function(p){var m,d,y;switch(p.label){case 0:if(!(null==(r=(0,f.x)({pkgName:e,extraOptions:t,shareInfos:n.options.shared}))?void 0:r.scope))return[3,2];return[4,Promise.all(r.scope.map((m=(0,o._)(function(e){return(0,h.__generator)(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.initializeSharing(e,r.strategy))];case 1:return t.sent(),[2]}})}),function(e){return m.apply(this,arguments)})))];case 1:p.sent(),p.label=2;case 2:return[4,n.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:r,shared:n.options.shared,origin:n})];case 3:if(a=p.sent().shareInfo,(0,f.d)(a,"Cannot find ".concat(e," Share in the ").concat(n.options.name,". Please ensure that the ").concat(e," Share parameters have been injected")),i=(0,f.o)(n.shareScopeMap,e,a,n.hooks.lifecycle.resolveShare),s=function(e){e.useIn||(e.useIn=[]),(0,f.B)(e.useIn,n.options.name)},!(i&&i.lib))return[3,4];return s(i),[2,i.lib];case 4:if(!(i&&i.loading&&!i.loaded))return[3,6];return[4,i.loading];case 5:return c=p.sent(),i.loaded=!0,i.lib||(i.lib=c),s(i),[2,c];case 6:if(i)return d=(0,o._)(function(){var t,o;return(0,h.__generator)(this,function(r){switch(r.label){case 0:return[4,i.get()];case 1:return t=r.sent(),a.lib=t,a.loaded=!0,s(a),(o=(0,f.o)(n.shareScopeMap,e,a,n.hooks.lifecycle.resolveShare))&&(o.lib=t,o.loaded=!0),[2,t]}})}),l=function(){return d.apply(this,arguments)}(),n.setShared({pkgName:e,loaded:!1,shared:i,from:n.options.name,lib:null,loading:l}),[2,l];if(null==t?void 0:t.customShareInfo)return[2,!1];return y=(0,o._)(function(){var t,o;return(0,h.__generator)(this,function(r){switch(r.label){case 0:return[4,a.get()];case 1:return t=r.sent(),a.lib=t,a.loaded=!0,s(a),(o=(0,f.o)(n.shareScopeMap,e,a,n.hooks.lifecycle.resolveShare))&&(o.lib=t,o.loaded=!0),[2,t]}})}),u=function(){return y.apply(this,arguments)}(),n.setShared({pkgName:e,loaded:!1,shared:a,from:n.options.name,lib:null,loading:u}),[2,u];case 7:return[2]}})})()}},{key:"loadShareSync",value:function(e,t){var n=this,o=(0,f.x)({pkgName:e,extraOptions:t,shareInfos:this.options.shared});(null==o?void 0:o.scope)&&o.scope.forEach(function(e){n.initializeSharing(e,o.strategy)});var r=(0,f.o)(this.shareScopeMap,e,o,this.hooks.lifecycle.resolveShare),a=function(e){e.useIn||(e.useIn=[]),(0,f.B)(e.useIn,n.options.name)};if(r){if("function"==typeof r.lib)return a(r),r.loaded||(r.loaded=!0,r.from!==this.options.name||(o.loaded=!0)),r.lib;if("function"==typeof r.get){var i=r.get();if(!(0,c._)(i,Promise))return a(r),this.setShared({pkgName:e,loaded:!0,from:this.options.name,lib:i,shared:r}),i}}if(o.lib)return o.loaded||(o.loaded=!0),o.lib;if(o.get){var s=o.get();if((0,c._)(s,Promise))throw Error("\n        The loadShareSync function was unable to load ".concat(e,". The ").concat(e," could not be found in ").concat(this.options.name,".\n        Possible reasons for failure: \n\n        1. The ").concat(e," share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ").concat(e," share was not registered with the 'lib' attribute.\n\n      "));return o.lib=s,this.setShared({pkgName:e,loaded:!0,from:this.options.name,lib:o.lib,shared:o}),o.lib}throw Error("\n        The loadShareSync function was unable to load ".concat(e,". The ").concat(e," could not be found in ").concat(this.options.name,".\n        Possible reasons for failure: \n\n        1. The ").concat(e," share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ").concat(e," share was not registered with the 'lib' attribute.\n\n      "))}},{key:"initRawContainer",value:function(e,t,n){var o=S({name:e,entry:t}),r=new _({host:this,remoteInfo:o});return r.remoteEntryExports=n,this.moduleCache.set(e,r),r}},{key:"_getRemoteModuleAndOptions",value:function(e){var t=this;return(0,o._)(function(){var n,o,r,a,i,s,c,l;return(0,h.__generator)(this,function(u){switch(u.label){case 0:return[4,t.hooks.lifecycle.beforeRequest.emit({id:e,options:t.options,origin:t})];case 1:return n=u.sent().id,o=function(e,t){var n=!0,o=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,c=t.startsWith(s.name),l=t.replace(s.name,"");if(c){if(l.startsWith("/")){var u=s.name;return l=".".concat(l),{pkgNameOrAlias:u,expose:l,remote:s}}if(""===l)return{pkgNameOrAlias:s.name,expose:".",remote:s}}var h=s.alias&&t.startsWith(s.alias),f=s.alias&&t.replace(s.alias,"");if(s.alias&&h){if(f&&f.startsWith("/")){var p=s.alias;return f=".".concat(f),{pkgNameOrAlias:p,expose:f,remote:s}}if(""===f)return{pkgNameOrAlias:s.alias,expose:".",remote:s}}}}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}}(t.options.remotes,n),(0,f.d)(o,"\n        Unable to locate ".concat(n," in ").concat(t.options.name,". Potential reasons for failure include:\n\n        1. ").concat(n," was not included in the 'remotes' parameter of ").concat(t.options.name||"the host",".\n\n        2. ").concat(n," could not be found in the 'remotes' of ").concat(t.options.name," with either 'name' or 'alias' attributes.\n        3. ").concat(n," is not online, injected, or loaded.\n        4. ").concat(n,"  cannot be accessed on the expected.\n        5. The 'beforeRequest' hook was provided but did not return the correct 'remoteInfo' when attempting to load ").concat(n,".\n      ")),r=S(o.remote),[4,t.hooks.lifecycle.afterResolve.emit(T({id:n},o,{options:t.options,origin:t,remoteInfo:r}))];case 2:return i=(a=u.sent()).remote,s=a.expose,(0,f.d)(i&&s,"The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ".concat(n,".")),c=t.moduleCache.get(i.name),l={host:t,remoteInfo:r},c||(c=new _(l),t.moduleCache.set(i.name,c)),[2,{module:c,moduleOptions:l,remoteMatchInfo:a}]}})})()}},{key:"loadRemote",value:function(e,t){var n=this;return(0,o._)(function(){var o,r,a,i,s,c,l,u,f,p,m,d,y,v,g,b;return(0,h.__generator)(this,function(h){switch(h.label){case 0:return h.trys.push([0,4,,6]),r=void 0===(o=(t||{loadFactory:!0}).loadFactory)||o,[4,n._getRemoteModuleAndOptions(e)];case 1:return i=(a=h.sent()).module,s=a.moduleOptions,l=(c=a.remoteMatchInfo).pkgNameOrAlias,u=c.remote,f=c.expose,p=c.id,[4,i.get(f,t)];case 2:return m=h.sent(),[4,n.hooks.lifecycle.onLoad.emit({id:p,pkgNameOrAlias:l,expose:f,exposeModule:r?m:void 0,exposeModuleFactory:r?void 0:m,remote:u,options:s,moduleInstance:i,origin:n})];case 3:if("function"==typeof(d=h.sent()))return[2,d];return[2,m];case 4:return y=h.sent(),g=void 0===(v=(t||{from:"runtime"}).from)?"runtime":v,[4,n.hooks.lifecycle.errorLoadRemote.emit({id:e,error:y,from:g,origin:n})];case 5:if(!(b=h.sent()))throw y;return[2,b];case 6:return[2]}})})()}},{key:"preloadRemote",value:function(e){var t=this;return(0,o._)(function(){return(0,h.__generator)(this,function(n){switch(n.label){case 0:return[4,t.hooks.lifecycle.beforePreloadRemote.emit({preloadOptions:e,options:t.options,origin:t})];case 1:var r,a;return n.sent(),r=t.options.remotes,[4,Promise.all(e.map(function(e){var t=function(e,t){var n=!0,o=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;if(t===s.name||s.alias&&t===s.alias)return s}}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}}(r,e.nameOrAlias);return(0,f.d)(t,"Unable to preload ".concat(e.nameOrAlias," as it is not included in ").concat(!t&&(0,f.s)({remoteInfo:t,remotes:r}))),{remote:t,preloadConfig:P(e)}}).map((a=(0,o._)(function(e){var n,o,r,a,i,s;return(0,h.__generator)(this,function(c){switch(c.label){case 0:return o=S(n=e.remote),[4,t.snapshotHandler.loadRemoteSnapshotInfo(n)];case 1:return a=(r=c.sent()).globalSnapshot,i=r.remoteSnapshot,[4,t.hooks.lifecycle.generatePreloadAssets.emit({origin:t,preloadOptions:e,remote:n,remoteInfo:o,globalSnapshot:a,remoteSnapshot:i})];case 2:if(!(s=c.sent()))return[2];return M(o,t,s),[2]}})}),function(e){return a.apply(this,arguments)})))];case 2:return n.sent(),[2]}})})()}},{key:"initializeSharing",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.b,n=arguments.length>1?arguments[1]:void 0,r=this,a=this.shareScopeMap,i=this.options.name;a[t]||(a[t]={});var s=a[t],c=function(e,t){var n,o=t.version,r=t.eager;s[e]=s[e]||{};var a=s[e],c=a[o],l=!!(c&&(c.eager||(null==(n=c.shareConfig)?void 0:n.eager)));(!c||"loaded-first"!==c.strategy&&!c.loaded&&(!r!=!l?r:i>c.from))&&(a[o]=t)},l=[],u=this,p=(e=(0,o._)(function(e){var n,o;return(0,h.__generator)(this,function(r){switch(r.label){case 0:return[4,u._getRemoteModuleAndOptions(e)];case 1:if(!(n=r.sent().module).getEntry)return[3,3];return[4,n.getEntry()];case 2:o=r.sent(),!n.inited&&(o&&o.init&&o.init(a[t]),n.inited=!0),r.label=3;case 3:return[2]}})}),function(t){return e.apply(this,arguments)});return Object.keys(this.options.shared).forEach(function(e){r.options.shared[e].forEach(function(n){n.scope.includes(t)&&c(e,n)})}),"version-first"===n&&this.options.remotes.forEach(function(e){e.shareScope===t&&l.push(p(e.name))}),l}},{key:"initShareScopeMap",value:function(e,t){this.shareScopeMap[e]=t,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:t,options:this.options,origin:this})}},{key:"formatOptions",value:function(e,t){var n=this,o=(0,f.y)(t.shared||{},t.name),r=T({},e.shared);Object.keys(o).forEach(function(e){r[e]?o[e].forEach(function(t){r[e].find(function(e){return e.version===t.version})||r[e].push(t)}):r[e]=o[e]});var a=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:t,options:e,shareInfo:r}),i=a.userOptions,s=a.options,c=(i.remotes||[]).reduce(function(e,t){return n.registerRemote(t,e,{force:!1}),e},s.remotes);Object.keys(o).forEach(function(e){o[e].forEach(function(o){!(0,f.o)(n.shareScopeMap,e,o,n.hooks.lifecycle.resolveShare)&&o&&o.lib&&n.setShared({pkgName:e,lib:o.lib,get:o.get,loaded:!0,shared:o,from:t.name})})});var u=(0,l._)(s.plugins);i.plugins&&i.plugins.forEach(function(e){u.includes(e)||u.push(e)});var h=T({},e,t,{plugins:u,remotes:c,shared:r});return this.hooks.lifecycle.init.emit({origin:this,options:h}),h}},{key:"registerPlugins",value:function(e){var t,n,o=(t=[this.hooks,this.snapshotHandler.hooks,this.loaderHook],(n=(0,f.g)()).length>0&&n.forEach(function(t){(null==e?void 0:e.find(function(e){return e.name!==t.name}))&&e.push(t)}),e&&e.length>0&&e.forEach(function(e){t.forEach(function(t){t.applyPlugin(e)})}),e);this.options.plugins=this.options.plugins.reduce(function(e,t){return t&&e&&!e.find(function(e){return e.name===t.name})&&e.push(t),e},o||[])}},{key:"setShared",value:function(e){var t=e.pkgName,n=e.shared,o=(e.from,e.lib),r=e.loading,a=e.loaded,i=e.get,s=this,c=n.version,l=n.scope,u=void 0===l?"default":l,h=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t.indexOf(n=a[o])>=0||(r[n]=e[n]);return r}(n,["version","scope"]);(Array.isArray(u)?u:[u]).forEach(function(e){s.shareScopeMap[e]||(s.shareScopeMap[e]={}),s.shareScopeMap[e][t]||(s.shareScopeMap[e][t]={}),!s.shareScopeMap[e][t][c]&&(s.shareScopeMap[e][t][c]=T({version:c,scope:["default"]},h,{lib:o,loaded:a,loading:r}),i&&(s.shareScopeMap[e][t][c].get=i))})}},{key:"removeRemote",value:function(e){var t=e.name,n=this.options.remotes.findIndex(function(e){return e.name===t});-1!==n&&this.options.remotes.splice(n,1);var o=this.moduleCache.get(e.name);if(o){var r=o.remoteInfo.entryGlobalName;globalThis[r]&&delete globalThis[r];var a=v(o.remoteInfo);f.a[a]&&delete f.a[a],this.moduleCache.delete(e.name)}}},{key:"registerRemote",value:function(e,t,n){var o=function(){if(e.alias){var n=t.find(function(t){var n;return e.alias&&(t.name.startsWith(e.alias)||(null==(n=t.alias)?void 0:n.startsWith(e.alias)))});(0,f.d)(!n,"The alias ".concat(e.alias," of remote ").concat(e.name," is not allowed to be the prefix of ").concat(n&&n.name," name or alias"))}"entry"in e&&(0,f.A)()&&!e.entry.startsWith("http")&&(e.entry=new URL(e.entry,window.location.origin).href),e.shareScope||(e.shareScope=f.b),e.type||(e.type=f.D)},r=t.find(function(t){return t.name===e.name});if(r){var a=['The remote "'.concat(e.name,'" is already registered.'),(null==n?void 0:n.force)?"Hope you have known that OVERRIDE it may have some unexpected errors":'If you want to merge the remote, you can set "force: true".'];(null==n?void 0:n.force)&&(this.removeRemote(r),o(),t.push(e)),(0,f.w)(a.join(" "))}else o(),t.push(e)}},{key:"registerRemotes",value:function(e,t){var n=this;e.forEach(function(e){n.registerRemote(e,n.options.remotes,{force:null==t?void 0:t.force})})}}]),e}(),G=null;function F(e){var t=(0,f.E)(e.name,e.version);return t?(t.initOptions(e),G||(G=t),t):(G=new((0,f.F)()||L)(e),(0,f.H)(G),G)}function W(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,f.d)(G,"Please call init first"),G.loadRemote.apply(G,t)}(0,f.C)(L)}}]);
//# sourceMappingURL=lib-fae4f1f9.app.8210fbad01cca9b08efe.js.map