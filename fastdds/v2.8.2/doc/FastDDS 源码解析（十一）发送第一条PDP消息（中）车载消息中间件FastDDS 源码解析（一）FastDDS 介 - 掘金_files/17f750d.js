(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1356:function(e,t,n){},1975:function(e,t,n){"use strict";n(1356)},2444:function(e,t,n){"use strict";n.r(t),n.d(t,"shouldShowBanner",(function(){return O}));n(377),n(18);var r=n(5),l=n(3),o=n(7),c=n(4),v=n(30),_=n(395);function f(){var e=localStorage.getItem("TOP_BANNERS_SHOWN");if(!e)return{};try{return JSON.parse(e)||{}}catch(e){return{}}}function d(e){return!!f()[e]}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return!!r&&(!t&&(!n||!d(n)))}var k=Object(l.b)({setup:function(e,t){var n=t.root,k=Object(l.l)(!1),m=Object(l.l)({}),h=Object(l.l)({}),j=n.$getBean("eventBus"),w=Object(l.l)(!0),x=Object(l.l)(""),link=Object(l.l)(""),N=Object(l.l)(""),$=function(){var e;return O(n.$route,n.$device.isMobile,N.value,w.value)?(k.value=!0,C(!0),n.$TEA("global_top_banner_expose",{user_is_login:Boolean(null===(e=n.$store.state.auth.user)||void 0===e?void 0:e.user_id),res_url:link.value,current_url:window.location.href}),!0):(k.value=!1,C(!1),!1)},C=function(e){j&&j.emit&&j.emit("GLOBAL_BANNER_VISIBILITY_CHANGE",e)};Object(l.s)((function(){return n.$route}),(function(){$()}));var S=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,r,l,o,f,O,m,h,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$store.dispatch(c.TCC_CONFIG,"juejin_top_banner_prob");case 2:if(!(t=e.sent)||!t.enabled){e.next=26;break}if(w.value=!0,r=Object(v.b)(t.startTime||0),l=Object(v.b)(t.endTime||0),o=Date.now(),!(r&&o<r||l&&o>l)){e.next=13;break}return w.value=!1,k.value=!1,C(!1),e.abrupt("return");case 13:if(!(t.variants&&t.variants.length>0)){e.next=26;break}if(!(f=Object(_.a)(t.variants))){e.next=26;break}if(f.link&&(link.value=f.link),!f.image){e.next=24;break}if(N.value=f.image,x.value=f.image,!d(N.value)){e.next=24;break}return k.value=!1,C(!1),e.abrupt("return");case 24:return $(),e.abrupt("return");case 26:return e.next=28,n.$store.dispatch(c.TCC_CONFIG,"juejin_top_banner");case 28:if(O=e.sent){e.next=34;break}return w.value=!1,k.value=!1,C(!1),e.abrupt("return");case 34:if(w.value=!!O.enabled,O.enabled){e.next=39;break}return k.value=!1,C(!1),e.abrupt("return");case 39:if(m=Object(v.b)(O.startTime),h=Object(v.b)(O.endTime),j=Date.now(),!(m&&j<m)){e.next=45;break}return k.value=!1,e.abrupt("return");case 45:if(!(h&&j>h)){e.next=49;break}return k.value=!1,C(!1),e.abrupt("return");case 49:if(O.link&&(link.value=O.link),!O.image){e.next=57;break}if(N.value=O.image,x.value=O.image,!d(N.value)){e.next=57;break}return k.value=!1,C(!1),e.abrupt("return");case 57:$();case 58:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.onMounted)((function(){S()}));return{containerStyle:m,visible:k,closeStyle:h,handleClose:function(){var e;if(k.value=!1,N.value){var t=f();t[N.value]=!0,localStorage.setItem("TOP_BANNERS_SHOWN",JSON.stringify(t))}n.$TEA("global_top_banner_close",{user_is_login:Boolean(null===(e=n.$store.state.auth.user)||void 0===e?void 0:e.user_id),res_url:link.value,current_url:window.location.href}),C(!1)},handleLink:function(){var e;n.$TEA("global_top_banner_click",{user_is_login:Boolean(null===(e=n.$store.state.auth.user)||void 0===e?void 0:e.user_id),res_url:link.value,current_url:window.location.href}),window.open(link.value,"_blank")},imageUrl:x}}}),m=(n(1975),n(29)),component=Object(m.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.visible?r("div",{staticClass:"global-banner",on:{click:e.handleLink}},[e.imageUrl?r("img",{staticClass:"global-banner-img",attrs:{src:e.imageUrl,alt:"横幅"}}):e._e(),e._v(" "),r("img",{staticClass:"global-banner-close",attrs:{src:n(573)},on:{click:function(t){return t.stopPropagation(),e.handleClose(t)}}})]):e._e()}),[],!1,null,null,null);t.default=component.exports}}]);
//# sourceMappingURL=17f750d.js.map